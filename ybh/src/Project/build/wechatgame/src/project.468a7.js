window.__require=function t(e,i,n){function o(r,a){if(!i[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var h="function"==typeof __require&&__require;if(!a&&h)return h(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+r+"'")}}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){return o(e[r][1][t]||t)},l,l.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,i){(function(i,n){"function"==typeof define&&define.amd?define(["long"],n):"function"==typeof t&&"object"==typeof e&&e&&e.exports?e.exports=function(){var e;try{e=t("long")}catch(t){}return n(e)}():(i.dcodeIO=i.dcodeIO||{}).ByteBuffer=n(i.dcodeIO.Long)})(this,function(t){"use strict";var e=function(t,i,o){if(void 0===t&&(t=e.DEFAULT_CAPACITY),void 0===i&&(i=e.DEFAULT_ENDIAN),void 0===o&&(o=e.DEFAULT_NOASSERT),!o){if((t|=0)<0)throw RangeError("Illegal capacity");i=!!i,o=!!o}this.buffer=0===t?n:new ArrayBuffer(t),this.view=0===t?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=t,this.littleEndian=i,this.noAssert=o};e.VERSION="5.0.1",e.LITTLE_ENDIAN=!0,e.BIG_ENDIAN=!1,e.DEFAULT_CAPACITY=16,e.DEFAULT_ENDIAN=e.BIG_ENDIAN,e.DEFAULT_NOASSERT=!1,e.Long=t||null;var i=e.prototype;i.__isByteBuffer__,Object.defineProperty(i,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var n=new ArrayBuffer(0),o=String.fromCharCode;function s(t){var e=0;return function(){return e<t.length?t.charCodeAt(e++):null}}function r(){var t=[],e=[];return function(){if(0===arguments.length)return e.join("")+o.apply(String,t);t.length+arguments.length>1024&&(e.push(o.apply(String,t)),t.length=0),Array.prototype.push.apply(t,arguments)}}function a(t,e,i,n,o){var s,r,a=8*o-n-1,c=(1<<a)-1,h=c>>1,l=-7,f=i?o-1:0,u=i?-1:1,d=t[e+f];for(f+=u,s=d&(1<<-l)-1,d>>=-l,l+=a;l>0;s=256*s+t[e+f],f+=u,l-=8);for(r=s&(1<<-l)-1,s>>=-l,l+=n;l>0;r=256*r+t[e+f],f+=u,l-=8);if(0===s)s=1-h;else{if(s===c)return r?NaN:1/0*(d?-1:1);r+=Math.pow(2,n),s-=h}return(d?-1:1)*r*Math.pow(2,s-n)}function c(t,e,i,n,o,s){var r,a,c,h=8*s-o-1,l=(1<<h)-1,f=l>>1,u=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,r=l):(r=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-r))<1&&(r--,c*=2),(e+=r+f>=1?u/c:u*Math.pow(2,1-f))*c>=2&&(r++,c/=2),r+f>=l?(a=0,r=l):r+f>=1?(a=(e*c-1)*Math.pow(2,o),r+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,o),r=0));o>=8;t[i+d]=255&a,d+=p,a/=256,o-=8);for(r=r<<o|a,h+=o;h>0;t[i+d]=255&r,d+=p,r/=256,h-=8);t[i+d-p]|=128*g}e.accessor=function(){return Uint8Array},e.allocate=function(t,i,n){return new e(t,i,n)},e.concat=function(t,i,n,o){"boolean"!=typeof i&&"string"==typeof i||(o=n,n=i,i=void 0);for(var s,r=0,a=0,c=t.length;a<c;++a)e.isByteBuffer(t[a])||(t[a]=e.wrap(t[a],i)),(s=t[a].limit-t[a].offset)>0&&(r+=s);if(0===r)return new e(0,n,o);var h,l=new e(r,n,o);for(a=0;a<c;)(s=(h=t[a++]).limit-h.offset)<=0||(l.view.set(h.view.subarray(h.offset,h.limit),l.offset),l.offset+=s);return l.limit=l.offset,l.offset=0,l},e.isByteBuffer=function(t){return!0===(t&&t.__isByteBuffer__)},e.type=function(){return ArrayBuffer},e.wrap=function(t,n,o,s){if("string"!=typeof n&&(s=o,o=n,n=void 0),"string"==typeof t)switch(void 0===n&&(n="utf8"),n){case"base64":return e.fromBase64(t,o);case"hex":return e.fromHex(t,o);case"binary":return e.fromBinary(t,o);case"utf8":return e.fromUTF8(t,o);case"debug":return e.fromDebug(t,o);default:throw Error("Unsupported encoding: "+n)}if(null===t||"object"!=typeof t)throw TypeError("Illegal buffer");var r;if(e.isByteBuffer(t))return(r=i.clone.call(t)).markedOffset=-1,r;if(t instanceof Uint8Array)r=new e(0,o,s),t.length>0&&(r.buffer=t.buffer,r.offset=t.byteOffset,r.limit=t.byteOffset+t.byteLength,r.view=new Uint8Array(t.buffer));else if(t instanceof ArrayBuffer)r=new e(0,o,s),t.byteLength>0&&(r.buffer=t,r.offset=0,r.limit=t.byteLength,r.view=t.byteLength>0?new Uint8Array(t):null);else{if("[object Array]"!==Object.prototype.toString.call(t))throw TypeError("Illegal buffer");(r=new e(t.length,o,s)).limit=t.length;for(var a=0;a<t.length;++a)r.view[a]=t[a]}return r},i.writeBitSet=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if(!(t instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var n,o=e,s=t.length,r=s>>3,a=0;for(e+=this.writeVarint32(s,e);r--;)n=1&!!t[a++]|(1&!!t[a++])<<1|(1&!!t[a++])<<2|(1&!!t[a++])<<3|(1&!!t[a++])<<4|(1&!!t[a++])<<5|(1&!!t[a++])<<6|(1&!!t[a++])<<7,this.writeByte(n,e++);if(a<s){var c=0;for(n=0;a<s;)n|=(1&!!t[a++])<<c++;this.writeByte(n,e++)}return i?(this.offset=e,this):e-o},i.readBitSet=function(t){var e=void 0===t;e&&(t=this.offset);var i,n=this.readVarint32(t),o=n.value,s=o>>3,r=0,a=[];for(t+=n.length;s--;)i=this.readByte(t++),a[r++]=!!(1&i),a[r++]=!!(2&i),a[r++]=!!(4&i),a[r++]=!!(8&i),a[r++]=!!(16&i),a[r++]=!!(32&i),a[r++]=!!(64&i),a[r++]=!!(128&i);if(r<o){var c=0;for(i=this.readByte(t++);r<o;)a[r++]=!!(i>>c++&1)}return e&&(this.offset=t),a},i.readBytes=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+t+") <= "+this.buffer.byteLength)}var n=this.slice(e,e+t);return i&&(this.offset+=t),n},i.writeBytes=i.append,i.writeInt8=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view[e]=t,i&&(this.offset+=1),this},i.writeByte=i.writeInt8,i.readInt8=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view[t];return 128==(128&i)&&(i=-(255-i+1)),e&&(this.offset+=1),i},i.readByte=i.readInt8,i.writeUint8=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=1,this.view[e]=t,i&&(this.offset+=1),this},i.writeUInt8=i.writeUint8,i.readUint8=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=this.view[t];return e&&(this.offset+=1),i},i.readUInt8=i.readUint8,i.writeInt16=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.littleEndian?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),i&&(this.offset+=2),this},i.writeShort=i.writeInt16,i.readInt16=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[t],i|=this.view[t+1]<<8):(i=this.view[t]<<8,i|=this.view[t+1]),32768==(32768&i)&&(i=-(65535-i+1)),e&&(this.offset+=2),i},i.readShort=i.readInt16,i.writeUint16=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=2,this.littleEndian?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),i&&(this.offset+=2),this},i.writeUInt16=i.writeUint16,i.readUint16=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[t],i|=this.view[t+1]<<8):(i=this.view[t]<<8,i|=this.view[t+1]),e&&(this.offset+=2),i},i.readUInt16=i.readUint16,i.writeInt32=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.littleEndian?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),i&&(this.offset+=4),this},i.writeInt=i.writeInt32,i.readInt32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0),i|=0,e&&(this.offset+=4),i},i.readInt=i.readInt32,i.writeUint32=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,this.littleEndian?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),i&&(this.offset+=4),this},i.writeUInt32=i.writeUint32,i.readUint32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0),e&&(this.offset+=4),i},i.readUInt32=i.readUint32,t&&(i.writeInt64=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if("string"==typeof e)e=t.fromString(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e)),i+=8;var o=this.buffer.byteLength;i>o&&this.resize((o*=2)>i?o:i),i-=8;var s=e.low,r=e.high;return this.littleEndian?(this.view[i+3]=s>>>24&255,this.view[i+2]=s>>>16&255,this.view[i+1]=s>>>8&255,this.view[i]=255&s,i+=4,this.view[i+3]=r>>>24&255,this.view[i+2]=r>>>16&255,this.view[i+1]=r>>>8&255,this.view[i]=255&r):(this.view[i]=r>>>24&255,this.view[i+1]=r>>>16&255,this.view[i+2]=r>>>8&255,this.view[i+3]=255&r,i+=4,this.view[i]=s>>>24&255,this.view[i+1]=s>>>16&255,this.view[i+2]=s>>>8&255,this.view[i+3]=255&s),n&&(this.offset+=8),this},i.writeLong=i.writeInt64,i.readInt64=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=0,o=0;this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0,e+=4,o=this.view[e+2]<<16,o|=this.view[e+1]<<8,o|=this.view[e],o+=this.view[e+3]<<24>>>0):(o=this.view[e+1]<<16,o|=this.view[e+2]<<8,o|=this.view[e+3],o+=this.view[e]<<24>>>0,e+=4,n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0);var s=new t(n,o,!1);return i&&(this.offset+=8),s},i.readLong=i.readInt64,i.writeUint64=function(e,i){var n=void 0===i;if(n&&(i=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if("string"==typeof e)e=t.fromString(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e)),i+=8;var o=this.buffer.byteLength;i>o&&this.resize((o*=2)>i?o:i),i-=8;var s=e.low,r=e.high;return this.littleEndian?(this.view[i+3]=s>>>24&255,this.view[i+2]=s>>>16&255,this.view[i+1]=s>>>8&255,this.view[i]=255&s,i+=4,this.view[i+3]=r>>>24&255,this.view[i+2]=r>>>16&255,this.view[i+1]=r>>>8&255,this.view[i]=255&r):(this.view[i]=r>>>24&255,this.view[i+1]=r>>>16&255,this.view[i+2]=r>>>8&255,this.view[i+3]=255&r,i+=4,this.view[i]=s>>>24&255,this.view[i+1]=s>>>16&255,this.view[i+2]=s>>>8&255,this.view[i+3]=255&s),n&&(this.offset+=8),this},i.writeUInt64=i.writeUint64,i.readUint64=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=0,o=0;this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0,e+=4,o=this.view[e+2]<<16,o|=this.view[e+1]<<8,o|=this.view[e],o+=this.view[e+3]<<24>>>0):(o=this.view[e+1]<<16,o|=this.view[e+2]<<8,o|=this.view[e+3],o+=this.view[e]<<24>>>0,e+=4,n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0);var s=new t(n,o,!0);return i&&(this.offset+=8),s},i.readUInt64=i.readUint64),i.writeFloat32=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=4,c(this.view,t,e,this.littleEndian,23,4),i&&(this.offset+=4),this},i.writeFloat=i.writeFloat32,i.readFloat32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i=a(this.view,t,this.littleEndian,23,4);return e&&(this.offset+=4),i},i.readFloat=i.readFloat32,i.writeFloat64=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=8;var n=this.buffer.byteLength;return e>n&&this.resize((n*=2)>e?n:e),e-=8,c(this.view,t,e,this.littleEndian,52,8),i&&(this.offset+=8),this},i.writeDouble=i.writeFloat64,i.readFloat64=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=a(this.view,t,this.littleEndian,52,8);return e&&(this.offset+=8),i},i.readDouble=i.readFloat64,e.MAX_VARINT32_BYTES=5,e.calculateVarint32=function(t){return(t>>>=0)<128?1:t<16384?2:t<1<<21?3:t<1<<28?4:5},e.zigZagEncode32=function(t){return((t|=0)<<1^t>>31)>>>0},e.zigZagDecode32=function(t){return t>>>1^-(1&t)|0},i.writeVarint32=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var o,s=e.calculateVarint32(t);i+=s;var r=this.buffer.byteLength;for(i>r&&this.resize((r*=2)>i?r:i),i-=s,t>>>=0;t>=128;)o=127&t|128,this.view[i++]=o,t>>>=7;return this.view[i++]=t,n?(this.offset=i,this):s},i.writeVarint32ZigZag=function(t,i){return this.writeVarint32(e.zigZagEncode32(t),i)},i.readVarint32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,n=0,o=0;do{if(!this.noAssert&&t>this.limit){var s=Error("Truncated");throw s.truncated=!0,s}i=this.view[t++],n<5&&(o|=(127&i)<<7*n),++n}while(0!=(128&i));return o|=0,e?(this.offset=t,o):{value:o,length:n}},i.readVarint32ZigZag=function(t){var i=this.readVarint32(t);return"object"==typeof i?i.value=e.zigZagDecode32(i.value):i=e.zigZagDecode32(i),i},t&&(e.MAX_VARINT64_BYTES=10,e.calculateVarint64=function(e){"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e));var i=e.toInt()>>>0,n=e.shiftRightUnsigned(28).toInt()>>>0,o=e.shiftRightUnsigned(56).toInt()>>>0;return 0==o?0==n?i<16384?i<128?1:2:i<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:o<128?9:10},e.zigZagEncode64=function(e){return"number"==typeof e?e=t.fromNumber(e,!1):"string"==typeof e?e=t.fromString(e,!1):!1!==e.unsigned&&(e=e.toSigned()),e.shiftLeft(1).xor(e.shiftRight(63)).toUnsigned()},e.zigZagDecode64=function(e){return"number"==typeof e?e=t.fromNumber(e,!1):"string"==typeof e?e=t.fromString(e,!1):!1!==e.unsigned&&(e=e.toSigned()),e.shiftRightUnsigned(1).xor(e.and(t.ONE).toSigned().negate()).toSigned()},i.writeVarint64=function(i,n){var o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("number"==typeof i)i=t.fromNumber(i);else if("string"==typeof i)i=t.fromString(i);else if(!(i&&i instanceof t))throw TypeError("Illegal value: "+i+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof i?i=t.fromNumber(i,!1):"string"==typeof i?i=t.fromString(i,!1):!1!==i.unsigned&&(i=i.toSigned());var s=e.calculateVarint64(i),r=i.toInt()>>>0,a=i.shiftRightUnsigned(28).toInt()>>>0,c=i.shiftRightUnsigned(56).toInt()>>>0;n+=s;var h=this.buffer.byteLength;switch(n>h&&this.resize((h*=2)>n?h:n),n-=s,s){case 10:this.view[n+9]=c>>>7&1;case 9:this.view[n+8]=9!==s?128|c:127&c;case 8:this.view[n+7]=8!==s?a>>>21|128:a>>>21&127;case 7:this.view[n+6]=7!==s?a>>>14|128:a>>>14&127;case 6:this.view[n+5]=6!==s?a>>>7|128:a>>>7&127;case 5:this.view[n+4]=5!==s?128|a:127&a;case 4:this.view[n+3]=4!==s?r>>>21|128:r>>>21&127;case 3:this.view[n+2]=3!==s?r>>>14|128:r>>>14&127;case 2:this.view[n+1]=2!==s?r>>>7|128:r>>>7&127;case 1:this.view[n]=1!==s?128|r:127&r}return o?(this.offset+=s,this):s},i.writeVarint64ZigZag=function(t,i){return this.writeVarint64(e.zigZagEncode64(t),i)},i.readVarint64=function(e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=e,o=0,s=0,r=0,a=0;if(o=127&(a=this.view[e++]),128&a&&(o|=(127&(a=this.view[e++]))<<7,(128&a||this.noAssert&&void 0===a)&&(o|=(127&(a=this.view[e++]))<<14,(128&a||this.noAssert&&void 0===a)&&(o|=(127&(a=this.view[e++]))<<21,(128&a||this.noAssert&&void 0===a)&&(s=127&(a=this.view[e++]),(128&a||this.noAssert&&void 0===a)&&(s|=(127&(a=this.view[e++]))<<7,(128&a||this.noAssert&&void 0===a)&&(s|=(127&(a=this.view[e++]))<<14,(128&a||this.noAssert&&void 0===a)&&(s|=(127&(a=this.view[e++]))<<21,(128&a||this.noAssert&&void 0===a)&&(r=127&(a=this.view[e++]),(128&a||this.noAssert&&void 0===a)&&(r|=(127&(a=this.view[e++]))<<7,128&a||this.noAssert&&void 0===a))))))))))throw Error("Buffer overrun");var c=t.fromBits(o|s<<28,s>>>4|r<<24,!1);return i?(this.offset=e,c):{value:c,length:e-n}},i.readVarint64ZigZag=function(i){var n=this.readVarint64(i);return n&&n.value instanceof t?n.value=e.zigZagDecode64(n.value):n=e.zigZagDecode64(n),n}),i.writeCString=function(t,e){var i=void 0===e;i&&(e=this.offset);var n,o=t.length;if(!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");for(n=0;n<o;++n)if(0===t.charCodeAt(n))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}o=l.calculateUTF16asUTF8(s(t))[1],e+=o+1;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=o+1,l.encodeUTF16toUTF8(s(t),function(t){this.view[e++]=t}.bind(this)),this.view[e++]=0,i?(this.offset=e,this):o},i.readCString=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,n=t,o=-1;return l.decodeUTF8toUTF16(function(){if(0===o)return null;if(t>=this.limit)throw RangeError("Illegal range: Truncated data, "+t+" < "+this.limit);return 0===(o=this.view[t++])?null:o}.bind(this),i=r(),!0),e?(this.offset=t,i()):{string:i(),length:t-n}},i.writeIString=function(t,e){var i=void 0===e;if(i&&(e=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var n,o=e;n=l.calculateUTF16asUTF8(s(t),this.noAssert)[1],e+=4+n;var r=this.buffer.byteLength;if(e>r&&this.resize((r*=2)>e?r:e),e-=4+n,this.littleEndian?(this.view[e+3]=n>>>24&255,this.view[e+2]=n>>>16&255,this.view[e+1]=n>>>8&255,this.view[e]=255&n):(this.view[e]=n>>>24&255,this.view[e+1]=n>>>16&255,this.view[e+2]=n>>>8&255,this.view[e+3]=255&n),e+=4,l.encodeUTF16toUTF8(s(t),function(t){this.view[e++]=t}.bind(this)),e!==o+4+n)throw RangeError("Illegal range: Truncated data, "+e+" == "+(e+4+n));return i?(this.offset=e,this):e-o},i.readIString=function(t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var n=t,o=this.readUint32(t),s=this.readUTF8String(o,e.METRICS_BYTES,t+=4);return t+=s.length,i?(this.offset=t,s.string):{string:s.string,length:t-n}},e.METRICS_CHARS="c",e.METRICS_BYTES="b",i.writeUTF8String=function(t,e){var i,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var o=e;i=l.calculateUTF16asUTF8(s(t))[1],e+=i;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=i,l.encodeUTF16toUTF8(s(t),function(t){this.view[e++]=t}.bind(this)),n?(this.offset=e,this):e-o},i.writeString=i.writeUTF8String,e.calculateUTF8Chars=function(t){return l.calculateUTF16asUTF8(s(t))[0]},e.calculateUTF8Bytes=function(t){return l.calculateUTF16asUTF8(s(t))[1]},e.calculateString=e.calculateUTF8Bytes,i.readUTF8String=function(t,i,n){"number"==typeof i&&(n=i,i=void 0);var o=void 0===n;if(o&&(n=this.offset),void 0===i&&(i=e.METRICS_CHARS),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");if(t|=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var s,a=0,c=n;if(i===e.METRICS_CHARS){if(s=r(),l.decodeUTF8(function(){return a<t&&n<this.limit?this.view[n++]:null}.bind(this),function(t){++a,l.UTF8toUTF16(t,s)}),a!==t)throw RangeError("Illegal range: Truncated data, "+a+" == "+t);return o?(this.offset=n,s()):{string:s(),length:n-c}}if(i===e.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+"+t+") <= "+this.buffer.byteLength)}var h=n+t;if(l.decodeUTF8toUTF16(function(){return n<h?this.view[n++]:null}.bind(this),s=r(),this.noAssert),n!==h)throw RangeError("Illegal range: Truncated data, "+n+" == "+h);return o?(this.offset=n,s()):{string:s(),length:n-c}}throw TypeError("Unsupported metrics: "+i)},i.readString=i.readUTF8String,i.writeVString=function(t,i){var n=void 0===i;if(n&&(i=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var o,r,a=i;o=l.calculateUTF16asUTF8(s(t),this.noAssert)[1],r=e.calculateVarint32(o),i+=r+o;var c=this.buffer.byteLength;if(i>c&&this.resize((c*=2)>i?c:i),i-=r+o,i+=this.writeVarint32(o,i),l.encodeUTF16toUTF8(s(t),function(t){this.view[i++]=t}.bind(this)),i!==a+o+r)throw RangeError("Illegal range: Truncated data, "+i+" == "+(i+o+r));return n?(this.offset=i,this):i-a},i.readVString=function(t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n=t,o=this.readVarint32(t),s=this.readUTF8String(o.value,e.METRICS_BYTES,t+=o.length);return t+=s.length,i?(this.offset=t,s.string):{string:s.string,length:t-n}},i.append=function(t,i,n){"number"!=typeof i&&"string"==typeof i||(n=i,i=void 0);var o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}t instanceof e||(t=e.wrap(t,i));var s=t.limit-t.offset;if(s<=0)return this;n+=s;var r=this.buffer.byteLength;return n>r&&this.resize((r*=2)>n?r:n),n-=s,this.view.set(t.view.subarray(t.offset,t.limit),n),t.offset+=s,o&&(this.offset+=s),this},i.appendTo=function(t,e){return t.append(this,e),this},i.assert=function(t){return this.noAssert=!t,this},i.capacity=function(){return this.buffer.byteLength},i.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},i.clone=function(t){var i=new e(0,this.littleEndian,this.noAssert);return t?(i.buffer=new ArrayBuffer(this.buffer.byteLength),i.view=new Uint8Array(i.buffer)):(i.buffer=this.buffer,i.view=this.view),i.offset=this.offset,i.markedOffset=this.markedOffset,i.limit=this.limit,i},i.compact=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(0===t&&e===this.buffer.byteLength)return this;var i=e-t;if(0===i)return this.buffer=n,this.view=null,this.markedOffset>=0&&(this.markedOffset-=t),this.offset=0,this.limit=0,this;var o=new ArrayBuffer(i),s=new Uint8Array(o);return s.set(this.view.subarray(t,e)),this.buffer=o,this.view=s,this.markedOffset>=0&&(this.markedOffset-=t),this.offset=0,this.limit=i,this},i.copy=function(t,i){if(void 0===t&&(t=this.offset),void 0===i&&(i=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal end: Not an integer");if(i>>>=0,t<0||t>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+i+" <= "+this.buffer.byteLength)}if(t===i)return new e(0,this.littleEndian,this.noAssert);var n=i-t,o=new e(n,this.littleEndian,this.noAssert);return o.offset=0,o.limit=n,o.markedOffset>=0&&(o.markedOffset-=t),this.copyTo(o,0,t,i),o},i.copyTo=function(t,i,n,o){var s,r;if(!this.noAssert&&!e.isByteBuffer(t))throw TypeError("Illegal target: Not a ByteBuffer");if(i=(r=void 0===i)?t.offset:0|i,n=(s=void 0===n)?this.offset:0|n,o=void 0===o?this.limit:0|o,i<0||i>t.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+i+" <= "+t.buffer.byteLength);if(n<0||o>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+n+" <= "+this.buffer.byteLength);var a=o-n;return 0===a?t:(t.ensureCapacity(i+a),t.view.set(this.view.subarray(n,o),i),s&&(this.offset+=a),r&&(t.offset+=a),this)},i.ensureCapacity=function(t){var e=this.buffer.byteLength;return e<t?this.resize((e*=2)>t?e:t):this},i.fill=function(t,e,i){var n=void 0===e;if(n&&(e=this.offset),"string"==typeof t&&t.length>0&&(t=t.charCodeAt(0)),void 0===e&&(e=this.offset),void 0===i&&(i=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal end: Not an integer");if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(e>=i)return this;for(;e<i;)this.view[e++]=t;return n&&(this.offset=e),this},i.flip=function(){return this.limit=this.offset,this.offset=0,this},i.mark=function(t){if(t=void 0===t?this.offset:t,!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=t,this},i.order=function(t){if(!this.noAssert&&"boolean"!=typeof t)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!t,this},i.LE=function(t){return this.littleEndian=void 0===t||!!t,this},i.BE=function(t){return this.littleEndian=void 0!==t&&!t,this},i.prepend=function(t,i,n){"number"!=typeof i&&"string"==typeof i||(n=i,i=void 0);var o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}t instanceof e||(t=e.wrap(t,i));var s=t.limit-t.offset;if(s<=0)return this;var r=s-n;if(r>0){var a=new ArrayBuffer(this.buffer.byteLength+r),c=new Uint8Array(a);c.set(this.view.subarray(n,this.buffer.byteLength),s),this.buffer=a,this.view=c,this.offset+=r,this.markedOffset>=0&&(this.markedOffset+=r),this.limit+=r,n+=r}else new Uint8Array(this.buffer);return this.view.set(t.view.subarray(t.offset,t.limit),n-s),t.offset=t.limit,o&&(this.offset-=s),this},i.prependTo=function(t,e){return t.prepend(this,e),this},i.printDebug=function(t){"function"!=typeof t&&(t=console.log.bind(console)),t(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},i.remaining=function(){return this.limit-this.offset},i.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},i.resize=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal capacity: "+t+" (not an integer)");if((t|=0)<0)throw RangeError("Illegal capacity: 0 <= "+t)}if(this.buffer.byteLength<t){var e=new ArrayBuffer(t),i=new Uint8Array(e);i.set(this.view),this.buffer=e,this.view=i}return this},i.reverse=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}return t===e?this:(Array.prototype.reverse.call(this.view.subarray(t,e)),this)},i.skip=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");t|=0}var e=this.offset+t;if(!this.noAssert&&(e<0||e>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+t+" <= "+this.buffer.byteLength);return this.offset=e,this},i.slice=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i=this.clone();return i.offset=t,i.limit=e,i},i.toBuffer=function(t){var e=this.offset,i=this.limit;if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: Not an integer");if(e>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal limit: Not an integer");if(i>>>=0,e<0||e>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+i+" <= "+this.buffer.byteLength)}if(!t&&0===e&&i===this.buffer.byteLength)return this.buffer;if(e===i)return n;var o=new ArrayBuffer(i-e);return new Uint8Array(o).set(new Uint8Array(this.buffer).subarray(e,i),0),o},i.toArrayBuffer=i.toBuffer,i.toString=function(t,e,i){if(void 0===t)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof t&&(i=e=t="utf8"),t){case"utf8":return this.toUTF8(e,i);case"base64":return this.toBase64(e,i);case"hex":return this.toHex(e,i);case"binary":return this.toBinary(e,i);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+t)}};var h=function(){for(var t={},e=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],i=[],n=0,o=e.length;n<o;++n)i[e[n]]=n;return t.encode=function(t,i){for(var n,o;null!==(n=t());)i(e[n>>2&63]),o=(3&n)<<4,null!==(n=t())?(i(e[63&((o|=n>>4&15)|n>>4&15)]),o=(15&n)<<2,null!==(n=t())?(i(e[63&(o|n>>6&3)]),i(e[63&n])):(i(e[63&o]),i(61))):(i(e[63&o]),i(61),i(61))},t.decode=function(t,e){var n,o,s;function r(t){throw Error("Illegal character code: "+t)}for(;null!==(n=t());)if(void 0===(o=i[n])&&r(n),null!==(n=t())&&(void 0===(s=i[n])&&r(n),e(o<<2>>>0|(48&s)>>4),null!==(n=t()))){if(void 0===(o=i[n])){if(61===n)break;r(n)}if(e((15&s)<<4>>>0|(60&o)>>2),null!==(n=t())){if(void 0===(s=i[n])){if(61===n)break;r(n)}e((3&o)<<6>>>0|s)}}},t.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)},t}();i.toBase64=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),e|=0,(t|=0)<0||e>this.capacity||t>e)throw RangeError("begin, end");var i;return h.encode(function(){return t<e?this.view[t++]:null}.bind(this),i=r()),i()},e.fromBase64=function(t,i){if("string"!=typeof t)throw TypeError("str");var n=new e(t.length/4*3,i),o=0;return h.decode(s(t),function(t){n.view[o++]=t}),n.limit=o,n},e.btoa=function(t){return e.fromBinary(t).toBase64()},e.atob=function(t){return e.fromBase64(t).toBinary()},i.toBinary=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),e|=0,(t|=0)<0||e>this.capacity()||t>e)throw RangeError("begin, end");if(t===e)return"";for(var i=[],n=[];t<e;)i.push(this.view[t++]),i.length>=1024&&(n.push(String.fromCharCode.apply(String,i)),i=[]);return n.join("")+String.fromCharCode.apply(String,i)},e.fromBinary=function(t,i){if("string"!=typeof t)throw TypeError("str");for(var n,o=0,s=t.length,r=new e(s,i);o<s;){if((n=t.charCodeAt(o))>255)throw RangeError("illegal char code: "+n);r.view[o++]=n}return r.limit=s,r},i.toDebug=function(t){for(var e,i=-1,n=this.buffer.byteLength,o="",s="",r="";i<n;){if(-1!==i&&(o+=(e=this.view[i])<16?"0"+e.toString(16).toUpperCase():e.toString(16).toUpperCase(),t&&(s+=e>32&&e<127?String.fromCharCode(e):".")),++i,t&&i>0&&i%16==0&&i!==n){for(;o.length<51;)o+=" ";r+=o+s+"\n",o=s=""}i===this.offset&&i===this.limit?o+=i===this.markedOffset?"!":"|":i===this.offset?o+=i===this.markedOffset?"[":"<":i===this.limit?o+=i===this.markedOffset?"]":">":o+=i===this.markedOffset?"'":t||0!==i&&i!==n?" ":""}if(t&&" "!==o){for(;o.length<51;)o+=" ";r+=o+s+"\n"}return t?r:o},e.fromDebug=function(t,i,n){for(var o,s,r=t.length,a=new e((r+1)/3|0,i,n),c=0,h=0,l=!1,f=!1,u=!1,d=!1,p=!1;c<r;){switch(o=t.charAt(c++)){case"!":if(!n){if(f||u||d){p=!0;break}f=u=d=!0}a.offset=a.markedOffset=a.limit=h,l=!1;break;case"|":if(!n){if(f||d){p=!0;break}f=d=!0}a.offset=a.limit=h,l=!1;break;case"[":if(!n){if(f||u){p=!0;break}f=u=!0}a.offset=a.markedOffset=h,l=!1;break;case"<":if(!n){if(f){p=!0;break}f=!0}a.offset=h,l=!1;break;case"]":if(!n){if(d||u){p=!0;break}d=u=!0}a.limit=a.markedOffset=h,l=!1;break;case">":if(!n){if(d){p=!0;break}d=!0}a.limit=h,l=!1;break;case"'":if(!n){if(u){p=!0;break}u=!0}a.markedOffset=h,l=!1;break;case" ":l=!1;break;default:if(!n&&l){p=!0;break}if(s=parseInt(o+t.charAt(c++),16),!n&&(isNaN(s)||s<0||s>255))throw TypeError("Illegal str: Not a debug encoded string");a.view[h++]=s,l=!0}if(p)throw TypeError("Illegal str: Invalid symbol at "+c)}if(!n){if(!f||!d)throw TypeError("Illegal str: Missing offset or limit");if(h<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+h+" < "+r)}return a},i.toHex=function(t,e){if(t=void 0===t?this.offset:t,e=void 0===e?this.limit:e,!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}for(var i,n=new Array(e-t);t<e;)(i=this.view[t++])<16?n.push("0",i.toString(16)):n.push(i.toString(16));return n.join("")},e.fromHex=function(t,i,n){if(!n){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var o,s=t.length,r=new e(s/2|0,i),a=0,c=0;a<s;a+=2){if(o=parseInt(t.substring(a,a+2),16),!n&&(!isFinite(o)||o<0||o>255))throw TypeError("Illegal str: Contains non-hex characters");r.view[c++]=o}return r.limit=c,r};var l=function(){var t={MAX_CODEPOINT:1114111,encodeUTF8:function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<128?e(127&i):i<2048?(e(i>>6&31|192),e(63&i|128)):i<65536?(e(i>>12&15|224),e(i>>6&63|128),e(63&i|128)):(e(i>>18&7|240),e(i>>12&63|128),e(i>>6&63|128),e(63&i|128)),i=null},decodeUTF8:function(t,e){for(var i,n,o,s,r=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.bytes=t,e};null!==(i=t());)if(0==(128&i))e(i);else if(192==(224&i))null===(n=t())&&r([i,n]),e((31&i)<<6|63&n);else if(224==(240&i))(null===(n=t())||null===(o=t()))&&r([i,n,o]),e((15&i)<<12|(63&n)<<6|63&o);else{if(240!=(248&i))throw RangeError("Illegal starting byte: "+i);(null===(n=t())||null===(o=t())||null===(s=t()))&&r([i,n,o,s]),e((7&i)<<18|(63&n)<<12|(63&o)<<6|63&s)}},UTF16toUTF8:function(t,e){for(var i,n=null;null!==(i=null!==n?n:t());)i>=55296&&i<=57343&&null!==(n=t())&&n>=56320&&n<=57343?(e(1024*(i-55296)+n-56320+65536),n=null):e(i);null!==n&&e(n)},UTF8toUTF16:function(t,e){var i=null;for("number"==typeof t&&(i=t,t=function(){return null});null!==i||null!==(i=t());)i<=65535?e(i):(e(55296+((i-=65536)>>10)),e(i%1024+56320)),i=null},encodeUTF16toUTF8:function(e,i){t.UTF16toUTF8(e,function(e){t.encodeUTF8(e,i)})},decodeUTF8toUTF16:function(e,i){t.decodeUTF8(e,function(e){t.UTF8toUTF16(e,i)})},calculateCodePoint:function(t){return t<128?1:t<2048?2:t<65536?3:4},calculateUTF8:function(t){for(var e,i=0;null!==(e=t());)i+=e<128?1:e<2048?2:e<65536?3:4;return i},calculateUTF16asUTF8:function(e){var i=0,n=0;return t.UTF16toUTF8(e,function(t){++i,n+=t<128?1:t<2048?2:t<65536?3:4}),[i,n]}};return t}();return i.toUTF8=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i;try{l.decodeUTF8toUTF16(function(){return t<e?this.view[t++]:null}.bind(this),i=r())}catch(i){if(t!==e)throw RangeError("Illegal range: Truncated data, "+t+" != "+e)}return i()},e.fromUTF8=function(t,i,n){if(!n&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");var o=new e(l.calculateUTF16asUTF8(s(t),!0)[1],i,n),r=0;return l.encodeUTF16toUTF8(s(t),function(t){o.view[r++]=t}),o.limit=r,o},e})},{long:5}],2:[function(t,e,i){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));return e},bytesToString:function(t){for(var e=[],i=0;i<t.length;i++)e.push(String.fromCharCode(t[i]));return e.join("")}}};e.exports=n},{}],3:[function(t,e,i){(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&i.rotl(t,8)|4278255360&i.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=i.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],i=0,n=0;i<t.length;i++,n+=8)e[n>>>5]|=t[i]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],i=0;i<32*t.length;i+=8)e.push(t[i>>>5]>>>24-i%32&255);return e},bytesToHex:function(t){for(var e=[],i=0;i<t.length;i++)e.push((t[i]>>>4).toString(16)),e.push((15&t[i]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],i=0;i<t.length;i+=2)e.push(parseInt(t.substr(i,2),16));return e},bytesToBase64:function(e){for(var i=[],n=0;n<e.length;n+=3)for(var o=e[n]<<16|e[n+1]<<8|e[n+2],s=0;s<4;s++)8*n+6*s<=8*e.length?i.push(t.charAt(o>>>6*(3-s)&63)):i.push("=");return i.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var i=[],n=0,o=0;n<e.length;o=++n%4)0!=o&&i.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(n))>>>6-2*o);return i}};e.exports=i})()},{}],4:[function(t,e,i){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],5:[function(t,e,i){(function(i,n){"function"==typeof define&&define.amd?define([],n):"function"==typeof t&&"object"==typeof e&&e&&e.exports?e.exports=n():(i.dcodeIO=i.dcodeIO||{}).Long=n()})(this,function(){"use strict";function t(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function e(t){return!0===(t&&t.__isLong__)}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),t.isLong=e;var i={},n={};function o(t,e){var o,s,a;return e?(a=0<=(t>>>=0)&&t<256)&&(s=n[t])?s:(o=r(t,(0|t)<0?-1:0,!0),a&&(n[t]=o),o):(a=-128<=(t|=0)&&t<128)&&(s=i[t])?s:(o=r(t,t<0?-1:0,!1),a&&(i[t]=o),o)}function s(t,e){if(isNaN(t)||!isFinite(t))return e?g:p;if(e){if(t<0)return g;if(t>=f)return A}else{if(t<=-u)return F;if(t+1>=u)return w}return t<0?s(-t,e).neg():r(t%l|0,t/l|0,e)}function r(e,i,n){return new t(e,i,n)}t.fromInt=o,t.fromNumber=s,t.fromBits=r;var a=Math.pow;function c(t,e,i){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return p;if("number"==typeof e?(i=e,e=!1):e=!!e,(i=i||10)<2||36<i)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return c(t.substring(1),e,i).neg();for(var o=s(a(i,8)),r=p,h=0;h<t.length;h+=8){var l=Math.min(8,t.length-h),f=parseInt(t.substring(h,h+l),i);if(l<8){var u=s(a(i,l));r=r.mul(u).add(s(f))}else r=(r=r.mul(o)).add(s(f))}return r.unsigned=e,r}function h(e){return e instanceof t?e:"number"==typeof e?s(e):"string"==typeof e?c(e):r(e.low,e.high,e.unsigned)}t.fromString=c,t.fromValue=h;var l=4294967296,f=l*l,u=f/2,d=o(1<<24),p=o(0);t.ZERO=p;var g=o(0,!0);t.UZERO=g;var m=o(1);t.ONE=m;var v=o(1,!0);t.UONE=v;var y=o(-1);t.NEG_ONE=y;var w=r(-1,2147483647,!1);t.MAX_VALUE=w;var A=r(-1,-1,!0);t.MAX_UNSIGNED_VALUE=A;var F=r(0,-2147483648,!1);t.MIN_VALUE=F;var S=t.prototype;return S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*l+(this.low>>>0):this.high*l+(this.low>>>0)},S.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(F)){var e=s(t),i=this.div(e),n=i.mul(e).sub(this);return i.toString(t)+n.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var o=s(a(t,6),this.unsigned),r=this,c="";;){var h=r.div(o),l=(r.sub(h.mul(o)).toInt()>>>0).toString(t);if((r=h).isZero())return l+c;for(;l.length<6;)l="0"+l;c=""+l+c}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(F)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},S.isZero=function(){return 0===this.high&&0===this.low},S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(t){return e(t)||(t=h(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},S.eq=S.equals,S.notEquals=function(t){return!this.eq(t)},S.neq=S.notEquals,S.lessThan=function(t){return this.comp(t)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(t){return this.comp(t)<=0},S.lte=S.lessThanOrEqual,S.greaterThan=function(t){return this.comp(t)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(t){return this.comp(t)>=0},S.gte=S.greaterThanOrEqual,S.compare=function(t){if(e(t)||(t=h(t)),this.eq(t))return 0;var i=this.isNegative(),n=t.isNegative();return i&&!n?-1:!i&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(F)?F:this.not().add(m)},S.neg=S.negate,S.add=function(t){e(t)||(t=h(t));var i=this.high>>>16,n=65535&this.high,o=this.low>>>16,s=65535&this.low,a=t.high>>>16,c=65535&t.high,l=t.low>>>16,f=0,u=0,d=0,p=0;return d+=(p+=s+(65535&t.low))>>>16,u+=(d+=o+l)>>>16,f+=(u+=n+c)>>>16,f+=i+a,r((d&=65535)<<16|(p&=65535),(f&=65535)<<16|(u&=65535),this.unsigned)},S.subtract=function(t){return e(t)||(t=h(t)),this.add(t.neg())},S.sub=S.subtract,S.multiply=function(t){if(this.isZero())return p;if(e(t)||(t=h(t)),t.isZero())return p;if(this.eq(F))return t.isOdd()?F:p;if(t.eq(F))return this.isOdd()?F:p;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(d)&&t.lt(d))return s(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,n=65535&this.high,o=this.low>>>16,a=65535&this.low,c=t.high>>>16,l=65535&t.high,f=t.low>>>16,u=65535&t.low,g=0,m=0,v=0,y=0;return v+=(y+=a*u)>>>16,m+=(v+=o*u)>>>16,v&=65535,m+=(v+=a*f)>>>16,g+=(m+=n*u)>>>16,m&=65535,g+=(m+=o*f)>>>16,m&=65535,g+=(m+=a*l)>>>16,g+=i*u+n*f+o*l+a*c,r((v&=65535)<<16|(y&=65535),(g&=65535)<<16|(m&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(t){if(e(t)||(t=h(t)),t.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?g:p;var i,n,o;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return g;if(t.gt(this.shru(1)))return v;o=g}else{if(this.eq(F))return t.eq(m)||t.eq(y)?F:t.eq(F)?m:(i=this.shr(1).div(t).shl(1)).eq(p)?t.isNegative()?m:y:(n=this.sub(t.mul(i)),o=i.add(n.div(t)));else if(t.eq(F))return this.unsigned?g:p;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=p}for(n=this;n.gte(t);){i=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var r=Math.ceil(Math.log(i)/Math.LN2),c=r<=48?1:a(2,r-48),l=s(i),f=l.mul(t);f.isNegative()||f.gt(n);)f=(l=s(i-=c,this.unsigned)).mul(t);l.isZero()&&(l=m),o=o.add(l),n=n.sub(f)}return o},S.div=S.divide,S.modulo=function(t){return e(t)||(t=h(t)),this.sub(this.div(t).mul(t))},S.mod=S.modulo,S.not=function(){return r(~this.low,~this.high,this.unsigned)},S.and=function(t){return e(t)||(t=h(t)),r(this.low&t.low,this.high&t.high,this.unsigned)},S.or=function(t){return e(t)||(t=h(t)),r(this.low|t.low,this.high|t.high,this.unsigned)},S.xor=function(t){return e(t)||(t=h(t)),r(this.low^t.low,this.high^t.high,this.unsigned)},S.shiftLeft=function(t){return e(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?r(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):r(0,this.low<<t-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(t){return e(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?r(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):r(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(t){if(e(t)&&(t=t.toInt()),0===(t&=63))return this;var i=this.high;return t<32?r(this.low>>>t|i<<32-t,i>>>t,this.unsigned):r(32===t?i:i>>>t-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?r(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:r(this.low,this.high,!0)},S.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24&255,255&t,t>>>8&255,t>>>16&255,t>>>24&255]},S.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e]},t})},{}],6:[function(t,e,i){(function(){var i=t("crypt"),n=t("charenc").utf8,o=t("is-buffer"),s=t("charenc").bin,r=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?s.stringToBytes(t):n.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var a=i.bytesToWords(t),c=8*t.length,h=1732584193,l=-271733879,f=-1732584194,u=271733878,d=0;d<a.length;d++)a[d]=16711935&(a[d]<<8|a[d]>>>24)|4278255360&(a[d]<<24|a[d]>>>8);a[c>>>5]|=128<<c%32,a[14+(c+64>>>9<<4)]=c;var p=r._ff,g=r._gg,m=r._hh,v=r._ii;for(d=0;d<a.length;d+=16){var y=h,w=l,A=f,F=u;l=v(l=v(l=v(l=v(l=m(l=m(l=m(l=m(l=g(l=g(l=g(l=g(l=p(l=p(l=p(l=p(l,f=p(f,u=p(u,h=p(h,l,f,u,a[d+0],7,-680876936),l,f,a[d+1],12,-389564586),h,l,a[d+2],17,606105819),u,h,a[d+3],22,-1044525330),f=p(f,u=p(u,h=p(h,l,f,u,a[d+4],7,-176418897),l,f,a[d+5],12,1200080426),h,l,a[d+6],17,-1473231341),u,h,a[d+7],22,-45705983),f=p(f,u=p(u,h=p(h,l,f,u,a[d+8],7,1770035416),l,f,a[d+9],12,-1958414417),h,l,a[d+10],17,-42063),u,h,a[d+11],22,-1990404162),f=p(f,u=p(u,h=p(h,l,f,u,a[d+12],7,1804603682),l,f,a[d+13],12,-40341101),h,l,a[d+14],17,-1502002290),u,h,a[d+15],22,1236535329),f=g(f,u=g(u,h=g(h,l,f,u,a[d+1],5,-165796510),l,f,a[d+6],9,-1069501632),h,l,a[d+11],14,643717713),u,h,a[d+0],20,-373897302),f=g(f,u=g(u,h=g(h,l,f,u,a[d+5],5,-701558691),l,f,a[d+10],9,38016083),h,l,a[d+15],14,-660478335),u,h,a[d+4],20,-405537848),f=g(f,u=g(u,h=g(h,l,f,u,a[d+9],5,568446438),l,f,a[d+14],9,-1019803690),h,l,a[d+3],14,-187363961),u,h,a[d+8],20,1163531501),f=g(f,u=g(u,h=g(h,l,f,u,a[d+13],5,-1444681467),l,f,a[d+2],9,-51403784),h,l,a[d+7],14,1735328473),u,h,a[d+12],20,-1926607734),f=m(f,u=m(u,h=m(h,l,f,u,a[d+5],4,-378558),l,f,a[d+8],11,-2022574463),h,l,a[d+11],16,1839030562),u,h,a[d+14],23,-35309556),f=m(f,u=m(u,h=m(h,l,f,u,a[d+1],4,-1530992060),l,f,a[d+4],11,1272893353),h,l,a[d+7],16,-155497632),u,h,a[d+10],23,-1094730640),f=m(f,u=m(u,h=m(h,l,f,u,a[d+13],4,681279174),l,f,a[d+0],11,-358537222),h,l,a[d+3],16,-722521979),u,h,a[d+6],23,76029189),f=m(f,u=m(u,h=m(h,l,f,u,a[d+9],4,-640364487),l,f,a[d+12],11,-421815835),h,l,a[d+15],16,530742520),u,h,a[d+2],23,-995338651),f=v(f,u=v(u,h=v(h,l,f,u,a[d+0],6,-198630844),l,f,a[d+7],10,1126891415),h,l,a[d+14],15,-1416354905),u,h,a[d+5],21,-57434055),f=v(f,u=v(u,h=v(h,l,f,u,a[d+12],6,1700485571),l,f,a[d+3],10,-1894986606),h,l,a[d+10],15,-1051523),u,h,a[d+1],21,-2054922799),f=v(f,u=v(u,h=v(h,l,f,u,a[d+8],6,1873313359),l,f,a[d+15],10,-30611744),h,l,a[d+6],15,-1560198380),u,h,a[d+13],21,1309151649),f=v(f,u=v(u,h=v(h,l,f,u,a[d+4],6,-145523070),l,f,a[d+11],10,-1120210379),h,l,a[d+2],15,718787259),u,h,a[d+9],21,-343485551),h=h+y>>>0,l=l+w>>>0,f=f+A>>>0,u=u+F>>>0}return i.endian([h,l,f,u])};r._ff=function(t,e,i,n,o,s,r){var a=t+(e&i|~e&n)+(o>>>0)+r;return(a<<s|a>>>32-s)+e},r._gg=function(t,e,i,n,o,s,r){var a=t+(e&n|i&~n)+(o>>>0)+r;return(a<<s|a>>>32-s)+e},r._hh=function(t,e,i,n,o,s,r){var a=t+(e^i^n)+(o>>>0)+r;return(a<<s|a>>>32-s)+e},r._ii=function(t,e,i,n,o,s,r){var a=t+(i^(e|~n))+(o>>>0)+r;return(a<<s|a>>>32-s)+e},r._blocksize=16,r._digestsize=16,e.exports=function(t,e){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var n=i.wordsToBytes(r(t,e));return e&&e.asBytes?n:e&&e.asString?s.bytesToString(n):i.bytesToHex(n)}})()},{charenc:2,crypt:3,"is-buffer":4}],"AF-shader-utils":[function(t,e,i){"use strict";cc._RF.push(e,"f68d4RcXiBByaQo1Pe3IZao","AF-shader-utils");var n=cc.Enum({noraml:-1,gray:-1}),o={shaderPrograms:{},init:function(e){var i=this.shaderPrograms[e];if(!i){i=new cc.GLProgram;var n=t(cc.js.formatStr("%s.vert",e)),o=t(cc.js.formatStr("%s.frag",e));i.initWithString(n,o),cc.sys.isNative||(i.initWithVertexShaderByteArray(n,o),i.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION,cc.macro.VERTEX_ATTRIB_POSITION),i.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR,cc.macro.VERTEX_ATTRIB_COLOR),i.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD,cc.macro.VERTEX_ATTRIB_TEX_COORDS)),i.link(),i.updateUniforms(),this.shaderPrograms[e]=i}},setShader:function(t,e){this.init(e);var i=this.shaderPrograms[e];return t._sgNode.setShaderProgram(i),t._sgNode.setState(n[e]),i}},s=window.AF=window.AF||{};s.ShaderUtils=s.ShaderUtils||{},cc.js.mixin(s.ShaderUtils,o),e.exports=o,cc._RF.pop()},{}],AFAdJustScale:[function(t,e,i){"use strict";cc._RF.push(e,"2e3f21J38VO2Jyh8nCVWCax","AFAdJustScale");cc.Class({extends:cc.Component,editor:{menu:"ApplicationFramework/AFAdJustScale"},properties:{minHeight:1180,maxHeight:1380,myHeight:1280},onLoad:function(){var t=cc.director.getVisibleSize().height;if(!(t>=this.maxHeight&&t<=this.minHeight)){if(t<this.minHeight){var e=this.minHeight-t;this.node.scale=(this.myHeight-e)/this.myHeight}if(t>this.maxHeight){e=t-this.maxHeight;this.node.scale=(this.myHeight+e)/this.myHeight}}}});cc._RF.pop()},{}],AFAdjustAllScreen:[function(t,e,i){"use strict";cc._RF.push(e,"0b4362yYXFBPYHV+XmrblSQ","AFAdjustAllScreen");var n=cc.Enum({TOP:-1,BOTTOM:-1,LEFT:-1,RIGHT:-1});cc.Class({extends:cc.Component,editor:{menu:"ApplicationFramework/AFAdJustAllScreen"},properties:{adjustSide:{default:n.TOP,type:n}},onLoad:function(){},start:function(){if(AF.util.isAllScreen()){var t=this.getComponent("cc.Widget");if(t){switch(this.adjustSide){case n.TOP:t.isAbsoluteTop?t.top=t.top+44:t.top=t.top+44/2436;break;case n.BOTTOM:t.isAlignBottom?t.bottom=t.bottom+44:t.bottom=t.bottom+44/2436;break;case n.LEFT:t.isAlignLeft?t.left=t.left+44:t.left=t.left+44/2436;break;case n.RIGHT:t.isAlignRight?t.right=t.right+44:t.right=t.right+44/2436}t.updateAlignment()}}}}),cc._RF.pop()},{}],AFAudioClip:[function(t,e,i){"use strict";cc._RF.push(e,"160cepTGuBIhJBwm9jpi9+5","AFAudioClip"),(window.AF=window.AF||{}).AudioClip=cc.Class({name:"AFAudioClip",properties:{clip:{type:cc.AudioClip,default:null,displayName:"\u97f3\u9891"},_volume:void 0,volume:{get:function(){return this._volume?this._volume:1},set:function(t){return t=cc.clamp01(t),this._volume=t,t},displayName:"\u97f3\u91cf"},mute:{default:!1,displayName:"Mute",tooltip:"\u7981\u7528\u8be5\u97f3\u4e50"}},play:function(t,e){this.clip&&(this.mute||(!cc.js.isNumber(e)||e>0||e<=1)&&(e=this._volume))},clone:function(){return new AF.AudioClip}}),AF.AudioClip.DEFAULT=function(){return new AF.AudioClip},cc._RF.pop()},{}],AFBtnSpriteCheck:[function(t,e,i){"use strict";cc._RF.push(e,"def0exlav1I3bEiuNdCLaG6","AFBtnSpriteCheck");cc.Class({extends:cc.Component,editor:{menu:"ApplicationFramework/AFBtnSpriteCheck"},properties:{img:cc.Sprite,sfOn:cc.SpriteFrame,sfOff:cc.SpriteFrame},onLoad:function(){this.setCheck(!1)},setCheck:function(t){this.img.spriteFrame=t?this.sfOn:this.sfOff}});cc._RF.pop()},{}],AFBtnSpriteGray:[function(t,e,i){"use strict";cc._RF.push(e,"5b09fXkj8dD9K27uB3M2794","AFBtnSpriteGray");cc.Class({extends:cc.Component,editor:{menu:"ApplicationFramework/AFBtnSpriteGray"},properties:{btn:cc.Button,img:cc.Sprite,text:cc.Label,sfNormal:cc.SpriteFrame,sfGray:cc.SpriteFrame,fontNormal:cc.Font,fontGray:cc.Font},onLoad:function(){this.setEnabled(!0)},setEnabled:function(t){this.img.spriteFrame=t?this.sfNormal:this.sfGray,this.text.font=t?this.fontNormal:this.fontGray,this.btn.interactable=t},setText:function(t){this.text.string=t}});cc._RF.pop()},{}],AFClickWidgetAttach:[function(t,e,i){"use strict";cc._RF.push(e,"9cad6NZhEpGRaMikDja55KI","AFClickWidgetAttach");var n=cc.Enum({NORMAL:-1,START:-1,GOLD:-1,CRYSTAL:-1});cc.Class({extends:cc.Component,editor:{menu:"ApplicationFramework/AFClickWidgetAttach"},properties:{clickEffect:{type:cc.AudioClip,default:null,displayName:"\u70b9\u51fb\u97f3\u6548"},enableClickAudioEffect:{default:!0,displayName:"\u5f00\u542f\u70b9\u51fb\u97f3\u6548"},buttonType:{type:n,default:n.NORMAL,displayName:"\u6309\u94ae\u7c7b\u578b",tooltip:"\u6c14\u6ce1\u6216\u8005\u6b63\u5e38"}},onLoad:function(){this.node.on("touchend",this.onClicked,this)},onDestroy:function(){this.node.off("touchend",this.onClicked,this)},onClicked:function(){if(this.enableClickAudioEffect){var t=this.getComponent("cc.Button");t||(t=this.getComponent("cc.Toggle")),t.interactable&&t.enabledInHierarchy?t._pressed&&(this.buttonType===n.NORMAL?AF.audio.playButtonEffect("button"):this.buttonType===n.START?AF.audio.playButtonEffect("bubble"):this.buttonType===n.GOLD?AF.audio.playButtonEffect("gold"):this.buttonType===n.CRYSTAL&&AF.audio.playButtonEffect("crystal")):AF.audio.playButtonEffect("button_disable")}}}),cc._RF.pop()},{}],AFDialogBase:[function(t,e,i){"use strict";cc._RF.push(e,"c125043iHFJV5wM9jJsjAyo","AFDialogBase");var n=t("af-scene-mgr");(window.AF=window.AF||{}).DialogBase=cc.Class({extends:cc.Component,properties:{enableInOutAction:{default:!1,displayName:"\u542f\u7528\u5f39\u51fa/\u5173\u95ed\u6548\u679c"},inOutActionTag:{default:1298,visible:!1},enableTouchEmptyPlaceToClose:{default:!1,displayName:"\u70b9\u51fb\u7a7a\u767d\u5904\u5173\u95ed"},isSceneDialog:{default:!1,displayName:"\u573a\u666f\u5bf9\u8bdd\u6846",tooltip:"\u662f\u5426\u662f\u6302\u5728\u573a\u666f\u4e0a\u8fb9\u7684\u5bf9\u8bdd\u6846"},noHideOtherDialog:{default:!1,displayName:"\u4e0d\u9690\u85cf\u5176\u4ed6\u5bf9\u8bdd\u6846",tooltip:"\u6253\u5f00\u672c\u5bf9\u8bdd\u6846\u65f6\u4e0d\u9690\u85cf\u4e4b\u524d\u6253\u5f00\u7684\u5bf9\u8bdd\u6846"},noHideBelowDialog:{default:!1,displayName:"\u59cb\u7ec8\u663e\u793a",tooltip:"\u5728\u6253\u5f00\u5176\u5b83\u5bf9\u8bdd\u6846\u65f6\u4e0d\u9690\u85cf\u672c\u5bf9\u8bdd\u6846"},enableDialogPopOutAudioEffect:{default:!1,displayName:"\u5f00\u542f\u5f39\u51fa\u97f3\u6548"},dialogPopOutAudioEffect:{type:cc.AudioClip,default:null,displayName:"\u5f39\u51fa\u97f3\u6548"}},onLoad:function(){if(this.uiSceneTouchEnable=!1,this.listenEvents=[],this.isSceneDialog){var t=this.node.name;n.instance.registerDialog(t,this.node),this.node.active=!0}this._isClosing=!1,this.addMask(),AF.EventDispatcher.on(AF.Event.WILL_OPEN_DIALOG,this.willOpenDialog,this),AF.EventDispatcher.on(AF.Event.UI_SCENE_TOUCH_ENABLE,this.setUISceneTouchEnable,this)},onEnable:function(){this.runInAction(),this._mask.on("touchstart",this.onTouchEmptyPlace,this),this.enableDialogPopOutAudioEffect&&AF.audio.playDialogPopOutEffect()},onDisable:function(){this._mask.off("touchstart",this.onTouchEmptyPlace,this)},onDestroy:function(){if(AF.EventDispatcher.off(AF.Event.WILL_OPEN_DIALOG,this.willOpenDialog),AF.EventDispatcher.off(AF.Event.UI_SCENE_TOUCH_ENABLE,this.setUISceneTouchEnable),this.unregAllEvents(),this.isSceneDialog){var t=this.node.name;n.instance.unregisterDialog(t,this.node)}},regEvent:function(t,e){for(var i=0;i<this.listenEvents.length;i++){if(this.listenEvents[i].type===t)return}this.listenEvents.push({type:t,callback:e}),AF.EventDispatcher.on(t,e,this)},unregEvent:function(t){for(var e=0;e<this.listenEvents.length;e++){var i=this.listenEvents[e];if(i.type===t)return AF.EventDispatcher.off(i.type,i.callback,this),void this.listenEvents.splice(e,1)}},unregAllEvents:function(){for(var t=0;t<this.listenEvents.length;t++){var e=this.listenEvents[t];AF.EventDispatcher.off(e.type,e.callback,this)}this.listenEvents=[]},_getCanvasNode:function(){var t=cc.director.getScene(),e=t.getChildByName("Canvas");if(e)return e;for(var i=t.children,n=i.length,o=0;o<n;++o)if(cc.log("Node: "+i[o]),i[o].getComponent(cc.Canvas))return i[o]},addMask:function(){for(var t=this.node.children,e=t.length,i=0;i<e;++i)t[i].zIndex+=1;var n=cc.winSize,o=new cc.Node("DialogMask");o.zIndex=0,o.width=n.width,o.height=n.height,this._mask=o,this.node.addChild(o)},onTouchEmptyPlace:function(t){if(this.uiSceneTouchEnable&&this.enableTouchEmptyPlaceToClose){var e=this.node.getChildByName("panel");e||(e=this.node);var i=e.convertTouchToNodeSpace(t),n=e.getContentSize(),o=cc.rect(0,0,n.width,n.height);return cc.rectContainsPoint(o,i)||this.close(),!0}},willOpenDialog:function(){this.uiSceneTouchEnable=!1},setUISceneTouchEnable:function(){this.uiSceneTouchEnable=!0},_getRootNode:function(){if(this.isSceneDialog)return this.node;for(var t=cc.director.getScene(),e=this.node;;){if(e.parent==t)return e;e=e.parent}},close:function(){this._isClosing=!0,this.runOutAction(function(){this._isClosing=!1;var t=this._getRootNode();n.instance.onDialogClosed(t.name,t)}.bind(this))},closeImmediate:function(){var t=this._getRootNode();n.instance.onDialogClosed(t.name,t)},isClosing:function(){return this._isClosing=!0},runInAction:function(){if(this.enableInOutAction){var t=this.node;t.stopActionByTag(this.inOutActionTag);var e=cc.p(cc.winSize.width/2,cc.winSize.height/2);e=this.node.parent.convertToNodeSpace(e),t.setPosition(e),t.scale=.6,t.opacity=0;var i=cc.spawn(cc.scaleTo(.35,1).easing(cc.easeBackOut()),cc.fadeTo(.35,255)),n=cc.sequence(i,cc.callFunc(function(){AF.EventDispatcher.emit(AF.Event.UI_SCENE_TOUCH_ENABLE,!0)}));n.setTag(this.inOutActionTag),t.runAction(n)}else AF.EventDispatcher.emit(AF.Event.UI_SCENE_TOUCH_ENABLE,!0)},runOutAction:function(t){if(this.enableInOutAction){var e=this.node;e.stopActionByTag(this.inOutActionTag);var i=cc.sequence(cc.spawn(cc.scaleTo(.1,.6),cc.fadeTo(.1,.4),cc.moveBy(.1,cc.p(0,-50))),cc.callFunc(t));i.setTag(this.inOutActionTag),e.runAction(i)}else t&&t()}}),cc._RF.pop()},{"af-scene-mgr":"af-scene-mgr"}],AFDiceBoxItem:[function(t,e,i){"use strict";cc._RF.push(e,"78e4eDt9CpGpbDX/y/Mic9I","AFDiceBoxItem"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.listen=!1,this.listenFilename="",this.sprite=this.node.addComponent(cc.Sprite)},setItemId:function(t){var e="StoreUI/dicebox/"+t+".png";this.setFileName(e)},setMapId:function(t){var e="map/"+(Array(2).join(0)+t).slice(-2)+".jpg";this.setFileName(e)},init:function(){this.listen||(AF.EventDispatcher.on(AF.Event.FILE_DOWNLOAD,this.onFileDownloaded,this),AF.EventDispatcher.on(AF.Event.FILE_LOADNETSPRITE,this.onFrameLoaded,this),this.listen=!0)},setFileName:function(t){this.clearUI(),this.init(),this.isLoaded=!1,this.listenFilename=t,AF.util.isLocalFileExist(t)?AF.NetSpriteloader.startLoadNetSprite(t):AF.Downloader.startDownloadFile(t)},clearUI:function(){this.listenFilename="",this.node.active=!1},onDestroy:function(){this.listen&&(this.listen=!1,this.listenFilename="",AF.EventDispatcher.off(AF.Event.FILE_DOWNLOAD,this.onFileDownloaded,this),AF.EventDispatcher.off(AF.Event.FILE_LOADNETSPRITE,this.onFrameLoaded,this))},onFileDownloaded:function(t,e){this.listenFilename===t&&AF.NetSpriteloader.startLoadNetSprite(t)},onFrameLoaded:function(t,e,i){this.listenFilename===t&&i&&e&&this.creatSprite(e)},creatSprite:function(t){this.node.active=!0,this.sprite.spriteFrame=t,this.listenFilename="",this.isLoaded=!0},checkLoaded:function(){return this.isLoaded}}),cc._RF.pop()},{}],AFDownloadLayer:[function(t,e,i){"use strict";cc._RF.push(e,"6bfad6tfy9NNKxDlXyyfPIY","AFDownloadLayer");var n=t("AFDialogBase");cc.Class({extends:n,editor:{menu:"ApplicationFramework/AFDownloadLayer"},properties:{downloadProgress:{default:null,type:cc.ProgressBar,displayName:"downloadProgress\u4e0b\u8f7d\u8fdb\u5ea6\u6761"}},onLoad:function(){n.prototype.onLoad.call(this),this.downloadState=!1,this.regEvent(AF.Event.FILE_DOWNLOAD,this.onFileDownloaded)},onEnable:function(){n.prototype.onEnable.call(this),this.workState=0,this.currentState=1,this.currentIndex=-1,this.fileList=AF.DIALOG_PARAMS(),this.downloadProgress.progress=0,this.percent=0},onDestroy:function(){n.prototype.onDestroy.call(this),this.currentState=1,this.currentIndex=-1,this.downloadState=!1},show:function(t){this.node.getChildByName("panel").opacity=t?255:0},onFileDownloaded:function(t,e,i){this.currentIndex<0||this.currentIndex>=this.fileList.length||t===this.fileList[this.currentIndex]&&(this.currentState=i?3:4)},downloadFile:function(){AF.Downloader.startDownloadFile(this.fileList[this.currentIndex],!1)},update:function(t){3!==this.workState?0===this.workState&&(this.percent<99&&(this.percent++,this.downloadProgress.progress=this.percent/100),1===this.currentState?this.currentIndex+1>this.fileList.length-1?this.workState=3:(this.currentIndex++,this.currentState=2,this.downloadFile()):2===this.currentState||(3===this.currentState?this.currentState=1:4===this.currentState&&(this.workState=2,this.downloadState=!1,this.close()))):this.percent<99?(this.percent++,this.downloadProgress.progress=this.percent/100):(this.workState=1,this.downloadProgress.progress=1,this.downloadState=!0,this.close())},close:function(){n.prototype.close.call(this),AF.EventDispatcher.emit(AF.Event.DOWNLOADDIAGLOG_ON_CLOSE,this.downloadState)}}),cc._RF.pop()},{AFDialogBase:"AFDialogBase"}],AFFlipPosDir:[function(t,e,i){"use strict";cc._RF.push(e,"2c05dFdNo1Ke5YodDEqv90j","AFFlipPosDir"),cc.Class({extends:cc.Component,editor:{menu:"ApplicationFramework/AFFlipPosDir"},properties:{strNodeFlipPosX:[cc.String],strNodeFlipDirX:[cc.String]},onLoad:function(){for(var t=0;t<this.strNodeFlipPosX.length;t++){(e=cc.find(this.strNodeFlipPosX[t],this.node)).x=-e.x}for(t=0;t<this.strNodeFlipDirX.length;t++){var e;(e=cc.find(this.strNodeFlipDirX[t],this.node)).scaleX=-e.scaleX}}}),cc._RF.pop()},{}],AFList:[function(t,e,i){"use strict";cc._RF.push(e,"5075fBNrh9GRJHZxQ9l5XtI","AFList");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(i,o){"function"==typeof t&&"object"===(void 0===e?"undefined":n(e))&&e&&e.exports?e.exports=o(cc):(i.AF=i.AF||{}).List=o(cc)})(void 0,function(t){function e(t,e,i){this._value=t,this._previous=e,this._next=i}function i(){this._size=0,this._stack=[];var t=this._header=new e;t._next=t,t._previous=t}e.prototype.clear=function(){this._value=null,this._previous=null,this._next=null};var n=i.prototype;return n.beginIt=function(t){this._stack.push({forward:t,it:t?this._header._next:this._header._previous})},n.endIt=function(){this._stack.pop()},n.isItEnd=function(){var t=this._stack.length-1,e=this._stack[t];return!e||e.it==this._header},n.moveIt=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=this._stack.length-1);var n=this._stack[e],o=n?n.it._value:void 0;return!n||void 0!=i&&n.it!=i||(n.forward?n.it=t?n.it._next:n.it._previous:n.it=t?n.it._previous:n.it._next),o},n.getIt=function(t){void 0===t&&(t=this._stack.length-1);var e=this._stack[t];return e?e.it:void 0},n.getItValue=function(t){var e=this.getIt(t);return e?e._value:void 0},n.len=function(){return this._size},n.clear=function(){for(;this.popBack(););},n.empty=function(){return 0==this._size},n.concat=function(t){for(var e in t){var i=t[e];this.pushBack(i)}return this},n.extend=function(t){var e=this;return t.forEach(function(t){e.pushBack(t)}),this},n.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},n.forEach=function(e){var i=!1;for(this.beginIt(!0);!this.isItEnd();){try{if(i=e(this.getItValue()))break}catch(e){t.error(e)}this.moveIt()}return this.endIt(),i},n.forEachReverse=function(e){var i=!1;for(this.beginIt(!1);!this.isItEnd();){try{if(i=e(this.getItValue()))break}catch(e){t.error(e)}this.moveIt()}return this.endIt(),i},n.find=function(e){var i=void 0;for(this.beginIt(!0);!this.isItEnd();){try{var n=this.getItValue();if(e(n)){i=n;break}}catch(e){t.error(e)}this.moveIt()}return this.endIt(),i},n.remove=function(t){if(t==this._header)return!1;for(var e=0,i=this._stack.length;e<i;++e)this.moveIt(!1,e,t);return t._previous._next=t._next,t._next._previous=t._previous,t.clear(),this._size--,!0},n.removeIf=function(e){var i=!1;for(this.beginIt(!0);!this.isItEnd();){try{if(e(this.getItValue())){this.remove(this.getIt()),i=!0;break}}catch(e){t.error(e)}this.moveIt()}return this.endIt(),i},n.insert=function(t,i){var n=new e(i,t,t._next);n._previous._next=n,n._next._previous=n,this._size++},n.insertIf=function(e,i){this.beginIt(!0);for(var n=!1;!this.isItEnd();){try{if(i(this.getItValue())){this.insert(this.getIt(),e),n=!0;break}}catch(e){t.error(e)}this.moveIt()}n||this.insert(this._header._previous,e),this.endIt()},n.pushBack=function(t){this.insert(this._header._previous,t)},n.popBack=function(){var t=this._header._previous,e=t._value;return this.remove(t),e},n.getBack=function(){return this._header._previous._value},n.pushFront=function(t){this.insert(this._header,t)},n.popFront=function(){var t=this._header._next,e=t._value;return this.remove(t),e},n.getFront=function(){return this._header._next._value},i}),cc._RF.pop()},{}],AFLoadingAnim:[function(t,e,i){"use strict";cc._RF.push(e,"daa4b0LNVtKh5Shxvu6skbT","AFLoadingAnim"),cc.Class({extends:cc.Component,editor:{menu:"ApplicationFramework/AFLoadingAnim"},properties:{inAnimClip:{default:null,type:cc.AnimationClip,displayName:"\u52a8\u753b"}},onLoad:function(){this._anim=this.getComponent(cc.Animation)},onEnable:function(){this.node.x=cc.winSize.width/2,this.node.y=cc.winSize.height/2},playInAnim:function(t){this._anim&&this.inAnimClip&&(this.node.active=!0,this._anim.play(this.inAnimClip.name),t&&t())},playOutAnim:function(){this.node.active=!1}}),cc._RF.pop()},{}],AFLoadingLayer:[function(t,e,i){"use strict";cc._RF.push(e,"713a7tbfNFNPJlgM1xjtFsF","AFLoadingLayer");var n=t("AFDialogBase");cc.Class({extends:n,editor:{menu:"ApplicationFramework/AFLoadingLayer"},properties:{tips:{default:null,type:cc.Label,displayName:"tips\u6587\u672c\u6807\u7b7e"}},onLoad:function(){n.prototype.onLoad.call(this),this.regEvent(AF.Event.CLOSE_DIALOG_BY_NAME,this.dialogCloseEvent)},dialogCloseEvent:function(t){"LOADING_LAYER"===t&&(cc.log("CLOSE_DIALOG_BY_NAME AFLoadingLayer close"),this.closeImmediate())},onEnable:function(){n.prototype.onEnable.call(this);var t=this.getComponent(cc.Animation);if(t){var e=t.play();e.wrapMode=cc.WrapMode.Loop,e.repeatCount=1/0}this.show(!1),this.scheduleOnce(function(){this.show(!0)}.bind(this),1)},onDisable:function(){n.prototype.onDisable.call(this)},onDestroy:function(){n.prototype.onDestroy.call(this)},setTips:function(t){this.tips&&(this.tips.string=t)},show:function(t){this.node.getChildByName("panel").opacity=t?255:0}}),cc._RF.pop()},{AFDialogBase:"AFDialogBase"}],AFLong:[function(t,e,i){"use strict";cc._RF.push(e,"fffbeX3oatP94+pJ6DijTq9","AFLong");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(i,o){"function"==typeof define&&define.amd?define([],o):"function"==typeof t&&"object"===(void 0===e?"undefined":n(e))&&e&&e.exports?e.exports=o():(i.AF=i.AF||{}).Long=o()})(void 0,function(){function t(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function e(t){return!0===(t&&t.__isLong__)}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),t.isLong=e;var i={},n={};function o(t,e){var o,s,a;return e?(a=0<=(t>>>=0)&&t<256)&&(s=n[t])?s:(o=r(t,(0|t)<0?-1:0,!0),a&&(n[t]=o),o):(a=-128<=(t|=0)&&t<128)&&(s=i[t])?s:(o=r(t,t<0?-1:0,!1),a&&(i[t]=o),o)}function s(t,e){if(isNaN(t)||!isFinite(t))return e?g:p;if(e){if(t<0)return g;if(t>=f)return A}else{if(t<=-u)return F;if(t+1>=u)return w}return t<0?s(-t,e).neg():r(t%l|0,t/l|0,e)}function r(e,i,n){return new t(e,i,n)}t.fromInt=o,t.fromNumber=s,t.fromBits=r;var a=Math.pow;function c(t,e,i){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return p;if("number"==typeof e?(i=e,e=!1):e=!!e,(i=i||10)<2||36<i)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return c(t.substring(1),e,i).neg();for(var o=s(a(i,8)),r=p,h=0;h<t.length;h+=8){var l=Math.min(8,t.length-h),f=parseInt(t.substring(h,h+l),i);if(l<8){var u=s(a(i,l));r=r.mul(u).add(s(f))}else r=(r=r.mul(o)).add(s(f))}return r.unsigned=e,r}function h(e){return e instanceof t?e:"number"==typeof e?s(e):"string"==typeof e?c(e):r(e.low,e.high,e.unsigned)}t.fromString=c,t.fromValue=h;var l=4294967296,f=l*l,u=f/2,d=o(1<<24),p=o(0);t.ZERO=p;var g=o(0,!0);t.UZERO=g;var m=o(1);t.ONE=m;var v=o(1,!0);t.UONE=v;var y=o(-1);t.NEG_ONE=y;var w=r(-1,2147483647,!1);t.MAX_VALUE=w;var A=r(-1,-1,!0);t.MAX_UNSIGNED_VALUE=A;var F=r(0,-2147483648,!1);t.MIN_VALUE=F;var S=t.prototype;return S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*l+(this.low>>>0):this.high*l+(this.low>>>0)},S.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(F)){var e=s(t),i=this.div(e),n=i.mul(e).sub(this);return i.toString(t)+n.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var o=s(a(t,6),this.unsigned),r=this,c="";;){var h=r.div(o),l=(r.sub(h.mul(o)).toInt()>>>0).toString(t);if((r=h).isZero())return l+c;for(;l.length<6;)l="0"+l;c=""+l+c}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(F)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},S.isZero=function(){return 0===this.high&&0===this.low},S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(t){return e(t)||(t=h(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},S.eq=S.equals,S.notEquals=function(t){return!this.eq(t)},S.neq=S.notEquals,S.lessThan=function(t){return this.comp(t)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(t){return this.comp(t)<=0},S.lte=S.lessThanOrEqual,S.greaterThan=function(t){return this.comp(t)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(t){return this.comp(t)>=0},S.gte=S.greaterThanOrEqual,S.compare=function(t){if(e(t)||(t=h(t)),this.eq(t))return 0;var i=this.isNegative(),n=t.isNegative();return i&&!n?-1:!i&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(F)?F:this.not().add(m)},S.neg=S.negate,S.add=function(t){e(t)||(t=h(t));var i=this.high>>>16,n=65535&this.high,o=this.low>>>16,s=65535&this.low,a=t.high>>>16,c=65535&t.high,l=t.low>>>16,f=0,u=0,d=0,p=0;return d+=(p+=s+(65535&t.low))>>>16,u+=(d+=o+l)>>>16,f+=(u+=n+c)>>>16,f+=i+a,r((d&=65535)<<16|(p&=65535),(f&=65535)<<16|(u&=65535),this.unsigned)},S.subtract=function(t){return e(t)||(t=h(t)),this.add(t.neg())},S.sub=S.subtract,S.multiply=function(t){if(this.isZero())return p;if(e(t)||(t=h(t)),t.isZero())return p;if(this.eq(F))return t.isOdd()?F:p;if(t.eq(F))return this.isOdd()?F:p;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(d)&&t.lt(d))return s(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,n=65535&this.high,o=this.low>>>16,a=65535&this.low,c=t.high>>>16,l=65535&t.high,f=t.low>>>16,u=65535&t.low,g=0,m=0,v=0,y=0;return v+=(y+=a*u)>>>16,m+=(v+=o*u)>>>16,v&=65535,m+=(v+=a*f)>>>16,g+=(m+=n*u)>>>16,m&=65535,g+=(m+=o*f)>>>16,m&=65535,g+=(m+=a*l)>>>16,g+=i*u+n*f+o*l+a*c,r((v&=65535)<<16|(y&=65535),(g&=65535)<<16|(m&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(t){if(e(t)||(t=h(t)),t.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?g:p;var i,n,o;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return g;if(t.gt(this.shru(1)))return v;o=g}else{if(this.eq(F))return t.eq(m)||t.eq(y)?F:t.eq(F)?m:(i=this.shr(1).div(t).shl(1)).eq(p)?t.isNegative()?m:y:(n=this.sub(t.mul(i)),o=i.add(n.div(t)));else if(t.eq(F))return this.unsigned?g:p;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=p}for(n=this;n.gte(t);){i=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var r=Math.ceil(Math.log(i)/Math.LN2),c=r<=48?1:a(2,r-48),l=s(i),f=l.mul(t);f.isNegative()||f.gt(n);)f=(l=s(i-=c,this.unsigned)).mul(t);l.isZero()&&(l=m),o=o.add(l),n=n.sub(f)}return o},S.div=S.divide,S.modulo=function(t){return e(t)||(t=h(t)),this.sub(this.div(t).mul(t))},S.mod=S.modulo,S.not=function(){return r(~this.low,~this.high,this.unsigned)},S.and=function(t){return e(t)||(t=h(t)),r(this.low&t.low,this.high&t.high,this.unsigned)},S.or=function(t){return e(t)||(t=h(t)),r(this.low|t.low,this.high|t.high,this.unsigned)},S.xor=function(t){return e(t)||(t=h(t)),r(this.low^t.low,this.high^t.high,this.unsigned)},S.shiftLeft=function(t){return e(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?r(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):r(0,this.low<<t-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(t){return e(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?r(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):r(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(t){if(e(t)&&(t=t.toInt()),0===(t&=63))return this;var i=this.high;return t<32?r(this.low>>>t|i<<32-t,i>>>t,this.unsigned):r(32===t?i:i>>>t-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?r(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:r(this.low,this.high,!0)},S.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24&255,255&t,t>>>8&255,t>>>16&255,t>>>24&255]},S.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e]},t}),cc._RF.pop()},{}],AFMarqueeNotice:[function(t,e,i){"use strict";cc._RF.push(e,"cb58bcYF35DIqSZcpvZr/j8","AFMarqueeNotice");var n=t("af-const"),o=t("af-notice-mgr");cc.Class({extends:cc.Component,editor:{menu:"ApplicationFramework/AFMarqueeNotice"},properties:{msgPanel:{default:null,type:cc.Node,displayName:"\u6d88\u606f\u5e95\u6846"},msgLabel:{default:null,type:cc.RichText,displayName:"\u6d88\u606f\u6587\u672c\u6807\u7b7e"},moveSpeed:{default:150,displayName:"\u79fb\u52a8\u901f\u5ea6",range:[100,500]}},onLoad:function(){this._queue=[],this._showing=!1,this._setZIndex(),o.registerMarqueeWidget(this),this._setAllVisible(!1)},onDestroy:function(){o.unregisterMarqueeWidget()},show:function(t){this._queue.push(t),this._showText()},_setZIndex:function(){var t=cc.director.getScene(),e=this.node.parent;e.parent=t,e.zIndex=n.TOAST_MESSAGE_Z_ORDER-1},_showText:function(){if(this._queue.length<=0||this._showing)0==this._queue.length&&this._onAllNoticeShowed();else{this._setAllVisible(!0),this._showing=!0;var t=this._queue.shift();this.msgLabel.string=t||"",this.msgLabel.node.x=10*cc.winSize.width,this.scheduleOnce(this._runMarqueeAnimation.bind(this),0)}},_runMarqueeAnimation:function(){var t=this.msgPanel.getContentSize(),e=this.msgLabel.node.getContentSize(),i=this.msgLabel.node;i.x=.5*t.width+e.width/2;var n=(e.width+t.width)/this.moveSpeed,o=this,s=cc.sequence(cc.moveTo(n,cc.v2(-e.width/2-t.width/2,0)),cc.callFunc(function(){o._showing=!1,o._showText()}));i.runAction(s)},_setAllVisible:function(t){this.node.active=t},_onAllNoticeShowed:function(){this._setAllVisible(!1)}}),cc._RF.pop()},{"af-const":"af-const","af-notice-mgr":"af-notice-mgr"}],AFMessageBox:[function(t,e,i){"use strict";cc._RF.push(e,"2c2a2fQ9cVAs4awRy5a8bEq","AFMessageBox");var n=t("AFDialogBase"),o=cc.Enum({LEFT_YES_RIGHT_NO:-1,RIGHT_YES_LEFT_NO:-1});cc.Class({extends:n,editor:{menu:"ApplicationFramework/AFMessageBox"},properties:{txTitle:{type:cc.Label,default:null,displayName:"\u6807\u9898"},txContent:{type:cc.Label,default:null,displayName:"\u5185\u5bb9"},richTxContent:{type:cc.RichText,default:null,displayName:"\u5bcc\u6587\u672c"},btnClose:{type:cc.Button,default:null,displayName:"\u5173\u95ed\u6309\u94ae"},btnLeft:{type:cc.Button,default:null,displayName:"\u5de6\u8fb9\u6309\u94ae"},btnRight:{type:cc.Button,default:null,displayName:"\u53f3\u8fb9\u6309\u94ae"},btnMiddle:{type:cc.Button,default:null,displayName:"\u4e2d\u95f4\u6309\u94ae"},typeYesNo:{type:o,default:o.LEFT_YES_RIGHT_NO,displayName:"YesNo\u6309\u94ae\u6392\u5217\u65b9\u5f0f",tooltip:"\u5de6\u8fb9Yes\u53f3\u8fb9No\uff0c\u6216\u8005\u5de6\u8fb9No\u53f3\u8fb9Yes"}},onLoad:function(){n.prototype.onLoad.call(this)},onEnable:function(){n.prototype.onEnable.call(this);var t=AF.DIALOG_PARAMS();if(this._option=t,this.validate())if(this.btnClose.node.active=!!t.enableCloseButton,this.txTitle.string=t.title||"",this.txContent.string=t.content||"",this.richTxContent.string=t.richText||"",this.enableTouchEmptyPlaceToClose=t.enableTouchEmptyPlaceToClose,this.zOrder=t.zOrder,this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.zOrder&&(this.node.zIndex=this.zOrder,this.zOrder=void 0)},this))),t.type==AF.MessageBox.TYPE_YES_NO)this.btnLeft.node.active=this.btnRight.node.active=!0,this.btnMiddle.node.active=!1,(t.yesButtonText||t.noButtonText||this.typeYesNo!=o.LEFT_YES_RIGHT_NO)&&this._setYesNoBtnText(t);else if(t.type==AF.MessageBox.TYPE_OK&&(this.btnLeft.node.active=this.btnRight.node.active=!1,this.btnMiddle.node.active=!0,t.okButtonText)){var e=this.btnMiddle.getComponentInChildren(cc.Label);e&&(e.string=t.okButtonText)}},onDisable:function(){n.prototype.onDisable.call(this)},onDestroy:function(){n.prototype.onDestroy.call(this)},validate:function(){return!!this._option&&(!!(this.txContent&&this.richTxContent&&this.txTitle&&this.btnClose&&this.btnLeft&&this.btnRight&&this.btnMiddle)||(cc.error("invalid proterties, some component no set."),!1))},_setYesNoBtnText:function(t){var e=this.btnLeft.getComponentInChildren(cc.Label),i=this.btnRight.getComponentInChildren(cc.Label);if(e&&i){var n=this.typeYesNo==o.LEFT_YES_RIGHT_NO;n||(e.string="\u53d6\u6d88",i.string="\u786e\u5b9a"),t.yesButtonText&&(n?e.string=t.yesButtonText:i.string=t.yesButtonText),t.noButtonText&&(n?i.string=t.noButtonText:e.string=t.noButtonText)}},close:function(t){n.prototype.close.call(this),this.doCallback(t||AF.MessageBox.RET_CLOSE),this._option=void 0},doCallback:function(t){this._option&&this._option.callback&&this._option.callback(t)},onBtnCloseClicked:function(){this.close()},onBtnMiddle:function(){this.close(AF.MessageBox.RET_OK)},onBtnLeft:function(){var t=this.typeYesNo==o.LEFT_YES_RIGHT_NO?AF.MessageBox.RET_YES:AF.MessageBox.RET_NO;this.close(t)},onBtnRight:function(){var t=this.typeYesNo==o.LEFT_YES_RIGHT_NO?AF.MessageBox.RET_NO:AF.MessageBox.RET_YES;this.close(t)}}),cc._RF.pop()},{AFDialogBase:"AFDialogBase"}],AFNetSpriteBase:[function(t,e,i){"use strict";cc._RF.push(e,"55298f9qadEeb/NJugIMn/0","AFNetSpriteBase"),(window.AF=window.AF||{}).AFNetSpriteBase=cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.listenDownload=!1,this.listenNetSprite=!1,this.listenDownloadFilename="",this.listenNetSpriteFilename="",this.isLoaded=!1},setFileName:function(t){this.node.opacity=0,this.clearListen(),this.isLoaded=!1,AF.util.isLocalFileExist(t)?(this.listenNetSprite||(AF.EventDispatcher.on(AF.Event.FILE_LOADNETSPRITE,this.onFrameLoaded,this),this.listenNetSprite=!0),this.listenNetSpriteFilename=t,AF.NetSpriteloader.startLoadNetSprite(t)):(this.listenDownload||(AF.EventDispatcher.on(AF.Event.FILE_DOWNLOAD,this.onFileDownloaded,this),this.listenDownload=!0),this.listenDownloadFilename=t,AF.Downloader.startDownloadFile(t))},onFileDownloaded:function(t,e){this.listenDownloadFilename===t&&(this.clearListen(),this.listenNetSprite||(AF.EventDispatcher.on(AF.Event.FILE_LOADNETSPRITE,this.onFrameLoaded,this),this.listenNetSprite=!0),this.listenNetSpriteFilename=t,AF.NetSpriteloader.startLoadNetSprite(t))},onFrameLoaded:function(t,e,i){this.listenNetSpriteFilename===t&&i&&e&&this.creatSprite(e)},creatSprite:function(t){this.clearListen(),this.node.opacity=255,this.sprite||(this.sprite=this.node.getComponent(cc.Sprite)),this.sprite&&(this.sprite.spriteFrame=t),this.isLoaded=!0},clearListen:function(){this.listenDownload&&(AF.EventDispatcher.off(AF.Event.FILE_DOWNLOAD,this.onFileDownloaded,this),this.listenDownload=!1,this.listenDownloadFilename=""),this.listenNetSprite&&(AF.EventDispatcher.off(AF.Event.FILE_LOADNETSPRITE,this.onFrameLoaded,this),this.listenNetSprite=!1,this.listenNetSpriteFilename="")},onDestroy:function(){this.clearListen()},checkLoaded:function(){return this.isLoaded}}),cc._RF.pop()},{}],AFPlayEffect:[function(t,e,i){"use strict";cc._RF.push(e,"703adnUv3lCx6cSypGFcucb","AFPlayEffect");cc.Class({extends:cc.Component,editor:{menu:"ApplicationFramework/AFPlayEffect"},properties:{},onLoad:function(){this.anim=this.getComponent(cc.Animation),this.hide()},show:function(t,e){this.node.active=!0,this._hiding&&(this.unschedule(this._hide),this._hiding=!1);var i=t||this.anim.defaultClip.name;this.anim.play(i),e&&(this.anim.targetOff(this),this.anim.on("finished",function(){e&&e(),e=void 0},this))},_onAnimFinished:function(){},hide:function(t){if(this.node.active){var e=t||this.anim.defaultClip.name;this.anim.play(e),this.anim.setCurrentTime(0),this.anim.sample(),this.anim.stop(),this._hiding||(this._hiding=!0,this.scheduleOnce(this._hide,0))}},gotoTime:function(t,e){this.anim.play(e),this.anim.setCurrentTime(t,e),this.anim.sample(),this.anim.stop()},gotoLastFrame:function(t){var e;if(void 0===t)e=this.anim.currentClip||this.anim.defaultClip;else for(var i=this.anim.getClips(),n=0;n<i.length;++n)if(i[n].name==t){e=i[n];break}e&&(this.anim.play(e.name),this.anim.setCurrentTime(e.duration,e.name),this.anim.sample(),this.anim.stop())},_hide:function(){this.node.active=!1,this._hiding=!1}});cc._RF.pop()},{}],AFSwitchSceneAnim:[function(t,e,i){"use strict";cc._RF.push(e,"17460+s05VPPoR2Zzw3MN7M","AFSwitchSceneAnim"),cc.Class({extends:cc.Component,editor:{menu:"ApplicationFramework/AFSwitchSceneAnim"},properties:{inAnimClip:{default:null,type:cc.AnimationClip,displayName:"\u8fdb\u5165\u52a8\u753b"},loopAnimClip:{default:null,type:cc.AnimationClip,displayName:"\u5faa\u73af\u52a8\u753b"},outAnimClip:{default:null,type:cc.AnimationClip,displayName:"\u6de1\u51fa\u52a8\u753b"}},onLoad:function(){this._anim=this.getComponent(cc.Animation),this._anim&&this._anim.on("finished",this.onAnimCompleted,this),this._inAnimCallback=null},onDestroy:function(){this._anim&&this._anim.off("finished",this.onAnimCompleted,this)},onEnable:function(){this.node.x=cc.winSize.width/2,this.node.y=cc.winSize.height/2},playInAnim:function(t){this._inAnimCallback=t,this._anim&&this.inAnimClip?(this.node.active=!0,this._anim.play(this.inAnimClip.name)):(this._inAnimCallback=null,t&&t())},playOutAnim:function(){this._anim&&this.outAnimClip&&this._anim.play(this.outAnimClip.name)},onAnimCompleted:function(t,e){var i=e;this.inAnimClip&&i.name===this.inAnimClip.name?(this._inAnimCallback&&(this._inAnimCallback(),this._inAnimCallback=null),this.loopAnimClip&&this._anim.play(this.loopAnimClip.name)):this.outAnimClip&&i.name===this.outAnimClip.name&&(this.node.active=!1)}}),cc._RF.pop()},{}],AFToastMessage:[function(t,e,i){"use strict";cc._RF.push(e,"319a1luZzBP2LuyqvgsOdI6","AFToastMessage"),cc.Class({extends:cc.Component,editor:{menu:"ApplicationFramework/AFToastMessage"},properties:{msgPanel:{default:null,type:cc.Node,displayName:"\u6d88\u606f\u5e95\u6846"},msgLabel:{default:null,type:cc.RichText,displayName:"\u6d88\u606f\u6587\u672c\u6807\u7b7e"},defaultDuration:{default:3,displayName:"\u9ed8\u8ba4\u6301\u7eed\u65f6\u95f4",range:[1,10]}},onLoad:function(){this.node.opacity=255},showMessage:function(t,e,i){this.msgLabel?(this.msgLabel.string=t||"",this.msgLabel.node.opacity=0,this.scheduleOnce(this._resizeTextPanel.bind(this),0),this._showPopoutAnimation(e,i)):cc.error("not found toast message text label.")},_resizeTextPanel:function(){if(this.msgPanel){var t=this.msgLabel.node.getContentSize(),e=cc.winSize.width-160;if(t.width>e)return this.msgLabel.maxWidth=e,void this.scheduleOnce(this._resizeTextPanel.bind(this),0);this.msgLabel.node.opacity=255,this.msgPanel.setContentSize(t.width+40,t.height+30)}else cc.error("not found toast message text panel.")},_showPopoutAnimation:function(t,e){var i=this.node,n=this.node.height/2>100?this.node.height/2+20:100,o=cc.sequence(cc.fadeTo(.1,255),cc.delayTime(t||this.defaultDuration),cc.spawn(cc.moveBy(.5,cc.v2(0,n)),cc.fadeTo(.5,.1),cc.sequence(cc.delayTime(.45),cc.callFunc(function(){e&&e(),i.zIndex-=1}))),cc.callFunc(function(){i.destroy()}));i.runAction(o)}}),cc._RF.pop()},{}],BalancePassedView:[function(t,e,i){"use strict";cc._RF.push(e,"84d2cTpPWpKfqJ61MNZ7Q5f","BalancePassedView");cc.Class({extends:cc.Component,properties:{qqCon:cc.Node,heads:[cc.Node],label_time:[cc.Label],wxDisplay:cc.Sprite},onLoad:function(){AF.EventDispatcher.on("UpdateBalancePassed",this.updatePoint,this),this.qqCon.active=!1},onDestroy:function(){AF.EventDispatcher.off("UpdateBalancePassed",this.updatePoint,this)},updatePoint:function(t){var e=this,i=t.pointId,n=t.costTime;this.pointId=i,this.costTime=n,AF.platform.isWxApp()?AF.util.postMessage(4,{pointId:i,costTime:n}):AF.platform.isQQApp()&&(this.qqCon.active=!0,AF.util.getRankList(function(t){if(t){for(var i=0,n=0;n<t.length;n++)if(1===t[n].selfFlag){i=n;break}e.list=[],0===i?e.list=[t[i],t[i+1],t[i+2]]:i===t.length-1?e.list=[t[i-2],t[i-1],t[i]]:e.list=[t[i-1],t[i],t[i+1]],e.updateHeads()}}))},updateHeads:function(){for(var t=0;t<3;t++)this.heads[t].active=!0,this.heads[t].getComponent("PhotoPrefab").setPhoto(this.list[t].url),this.label_time[t].string=this.list[t].score+"\u5173"}}),cc._RF.pop()},{}],EffectPrefab:[function(t,e,i){"use strict";cc._RF.push(e,"0fdc9ObS0VIobmZMFvQzAys","EffectPrefab");var n=1,o=2,s=3;cc.Class({extends:cc.Component,properties:{aniNode:cc.Node},onLoad:function(){this.aniName="",this.listenFilename="",this.moveInfo=null,this.rate=10,this.delayTime=0,this.sp=this.aniNode.getComponent(cc.Sprite),this.ani=this.aniNode.getComponent(cc.Animation),this.ani.on("finished",this.onFinished,this),this.isLoaded=!1,this.working=!1,this.effectKey="",AF.EventDispatcher.on(AF.Event.FILE_LOADFRAME,this.onLoadFrameEnded,this),this.isStart=!1},doStart:function(t,e,i,n,o,s){if(this.stopState=!1,t)if(this.node)if(this.node.parent)if(this.isLoaded=!1,this.node.active=!0,this.aniNode.active=!1,this.working=!0,this.node.name=t,this.type=e,this.params=i,this.rate=n||10,this.moveInfo=o,this.delayTime=s||0,this.delayTime){var r=cc.sequence(cc.delayTime(s),cc.callFunc(function(){this.isStart=!0,this.isLoaded=this.tryPlayEffect(t),this.isLoaded||(this.listenFilename=t,AF.Frameloader.startLoadFile(this.listenFilename,1))},this));this.node.runAction(r)}else this.isStart=!0,this.isLoaded=this.tryPlayEffect(t),this.isLoaded||(this.listenFilename=t,AF.Frameloader.startLoadFile(this.listenFilename,1));else console.warn("\u8be5\u8282\u70b9\u7684\u7236\u8282\u70b9\u5df2\u7ecf\u88ab\u9500\u6bc1");else console.warn("\u8be5\u8282\u70b9\u5df2\u7ecf\u88ab\u9500\u6bc1");else cc.error("\u7279\u6548\u9884\u5236\u4ef6doStart\u53c2\u6570name\u9519\u8bef",t)},setNodeName:function(t){this.node&&(this.node.name=t)},tryPlayEffect:function(t){return!!this.checkAnimationExist(t)&&(this.moveInfo?this.doMoveAction():this.node.rotation=0,this.aniName=t,this.playAniByName(this.aniName))},setMapEffect:function(t){if(this.aniName!==t){this.aniName="";for(var e=this.ani.getClips(),i=0;i<e.length;i++){if(t===e[i].name){this.aniName=t;break}}this.aniName?this.ani.play(this.aniName):(this.rate=10,this.type=s,this.listenFilename=t,AF.Frameloader.startLoadFile(this.listenFilename,1))}},checkAnimationExist:function(t){if(!this.ani)return!1;for(var e=this.ani.getClips(),i=0;i<e.length;i++){if(t===e[i].name)return!0}return!1},addAnimation:function(t,e,i,n){this.playAniByName(t)||(this.rate=n||10,this.type=e,this.params=i,this.listenFilename=t,AF.Frameloader.startLoadFile(this.listenFilename,1))},playAniByName:function(t){return!!this.checkAnimationExist(t)&&(this.aniNode.active=!0,this.node.active=!0,this.ani.play(t),!0)},stopAniByName:function(t){return this.stopState=!0,this.aniNode.active=!1,this.node.active=!1,!!this.checkAnimationExist(t)&&(this.ani.stop(t),!0)},setFlipX:function(t){this.aniNode.scaleX=t?-1*Math.abs(this.aniNode.scaleX):Math.abs(this.aniNode.scaleX)},setEffectKey:function(t){this.effectKey=t},checkLoaded:function(){return this.isLoaded},checkWorking:function(){return this.working},onFinished:function(t){if(n===this.type)return this.params>0&&this.params!=1/0&&this.params--,void((this.params>0||this.params==1/0)&&this.ani.play(this.aniName));if(o!==this.type)if(s!==this.type);else{var e=this;if(!e.aniName)return;var i=1+Math.floor(5*Math.random());e.node.runAction(cc.sequence(cc.delayTime(i),cc.callFunc(function(){e.ani.play(e.aniName)})))}else this.ani.play(this.aniName)},onLoadFrameEnded:function(t,e,i){if(""!==this.listenFilename&&this.listenFilename===t)if(i)if(this.listenFilename="",e[0].length<=0)console.warn("\u7279\u6548\u9884\u5e27\u52a8\u753b"+t+"\u52a0\u8f7d\u5931\u8d25");else{if(this.createAni(t,e),this.isLoaded=!0,this.stopState)return this.aniNode.active=!1,void(this.node.active=!1);this.moveInfo?this.doMoveAction():this.node.rotation=0,this.playAniByName(this.aniName)}else console.warn("\u7279\u6548\u9884\u5e27\u52a8\u753b"+t+"\u52a0\u8f7d\u5931\u8d25")},createAni:function(t,e){this.aniName=t,this.sp.spriteFrame=e[0][0],this.node.width=this.aniNode.width,this.node.height=this.aniNode.height;var i=cc.AnimationClip.createWithSpriteFrames(e[0],this.rate);i.name=t,i.wrapMode=cc.WrapMode.Normal,i.sample=10,i.speed=1,this.ani.addClip(i,t)},doMoveAction:function(){var t;if(this.node.active=!0,this.aniNode.active=!0,this.moveInfo.rotation){var e=cc.pSub(this.node.position,this.moveInfo.dest),i=Math.atan2(e.x,e.y),n=Math.abs(this.aniNode.scaleX)/this.aniNode.scaleX;this.node.rotation=-1===n?(180*i/Math.PI+270)%360:(180*i/Math.PI+90)%360}t=1===this.moveInfo.speedType?cc.moveTo(this.params,this.moveInfo.dest).easing(cc.easeSineIn()):2===this.moveInfo.speedType?cc.moveTo(this.params,this.moveInfo.dest).easing(cc.easeSineOut()):cc.moveTo(this.params,this.moveInfo.dest),this.node.runAction(t)},onDestroy:function(){this.ani.off("finished",this.onFinished,this),AF.EventDispatcher.off(AF.Event.FILE_LOADFRAME,this.onLoadFrameEnded,this)},update:function(t){if(this.isStart){if(n!==this.type)return o===this.type?(this.params-=t,void(this.params<=0&&(this.aniNode.active=!1,this.node.active=!1,this.working=!1))):void 0;if(this.params==1/0)return;this.params<=0&&(this.aniNode.active=!1,this.node.active=!1,this.working=!1)}}}),cc._RF.pop()},{}],FriendPassedView:[function(t,e,i){"use strict";cc._RF.push(e,"7819ffsC61D3qIWkDZsVmkL","FriendPassedView");cc.Class({extends:cc.Component,properties:{qqCon:cc.Node,heads:[cc.Node],wxDisplay:cc.Node},onLoad:function(){this.qqCon.active=!1},onEnable:function(){AF.EventDispatcher.on("UpdateFriendPassed",this.updatePoint,this)},onDisable:function(){AF.EventDispatcher.off("UpdateFriendPassed",this.updatePoint,this)},updatePoint:function(t){var e=this;AF.platform.isWxApp()?AF.util.postMessage(3,{pointId:t,isAllScreen:AF.util.isAllScreen(),height:cc.winSize.height}):AF.platform.isQQApp()&&(this.qqCon.active=!0,AF.util.getRankList(function(i){i&&(e.list=i,e.updateHeads(t))}))},updateHeads:function(t){if(this.node&&this.node.active)for(var e=0;e<3&&e<this.list.length&&this.list[e].score>=t;e++)this.heads[e].active=!0,this.heads[e].getComponent("PhotoPrefab").setPhoto(this.list[e].url)}}),cc._RF.pop()},{}],GameItem:[function(t,e,i){"use strict";cc._RF.push(e,"fd307aFzJlPVKVCS0goRoK9","GameItem"),e.exports=cc.Class({extends:cc.Component,properties:{bg:cc.Sprite,label:cc.Label},_active:!1,_zero:!1,_selected:!1,setLabel:function(t){this.label.string=t},setZero:function(t){this._zero=!!t},setActive:function(t){this._active=!!t,this.bg.node.active=!!t},getActive:function(){return this._active},animateScale:function(){var t=cc.scaleTo(.15,1.2,1.2),e=cc.scaleTo(.15,1,1);this.node.runAction(cc.sequence(t,e))},setSelected:function(t){if(this._selected!==!!t){var e=this.bg.getComponent(cc.Animation);t?(e.play(),this.animateScale()):(e.play(),e.setCurrentTime(0),e.stop()),this._selected=!!t}},getSelected:function(){return this._selected}}),cc._RF.pop()},{}],HallBalanceDialog:[function(t,e,i){"use strict";cc._RF.push(e,"73fdaHGyAxFIKt6pZDC0OdI","HallBalanceDialog");var n=t("AFDialogBase");cc.Class({extends:n,properties:{node_light:cc.Node,node_starCon:cc.Node,node_next:cc.Node},onLoad:function(){n.prototype.onLoad.call(this)},onEnable:function(){var t=this;n.prototype.onEnable.call(this),this.params=AF.DIALOG_PARAMS();AF.GameData.getMyPlayerData().pointId;this.params.pointId%25==0&&this.params.over?this.scheduleOnce(function(){return AF.openDialog("HallGiftDialog",{costTime:t.params.costTime,pointId:t.params.pointId})},.1):this.scheduleOnce(function(){return AF.EventDispatcher.emit("ShowBalancePassed",{pointId:t.params.pointId,costTime:t.params.costTime})},.5),this.startAnimation()},startAnimation:function(){var t=this.node.getComponent(cc.Animation);t.setCurrentTime(0),t.play("balance",0),this.node_light.rotation=0,this.node_light.runAction(cc.repeatForever(cc.sequence(cc.rotateTo(1,90),cc.rotateTo(1,180),cc.rotateTo(1,270),cc.rotateTo(1,0)))),this.node_starCon.children.forEach(function(t){t.scale=1,t.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.6,1.2,1.2),cc.scaleTo(.6,1,1))))}),this.node_next.scale=1,this.node_next.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.6,.9,.9),cc.scaleTo(.6,1,1))))},onDisable:function(){n.prototype.onDisable.call(this),AF.EventDispatcher.emit("HideBalancePassed"),this.node_light.stopAllActions(),this.node_next.stopAllActions(),this.node_starCon.children.forEach(function(t){t.stopAllActions()})},next:function(){this.close(),this.params.next()},goToHome:function(){this.close(),this.params.close()},challenge:function(){AF.util.shareAppMessage(null,function(){console.log("suc")},function(){console.log("fail")},{score:this.params.pointId},"challenge")}}),cc._RF.pop()},{AFDialogBase:"AFDialogBase"}],HallBootScene:[function(t,e,i){"use strict";cc._RF.push(e,"22e7cBWK3lPWqn03TlZ0L10","HallBootScene");var n=t("af-config-mgr");cc.Class({extends:cc.Component,properties:{},onLoad:function(){console.log("HallBootScene onLoad")},onEnable:function(){console.log("HallBootScene onEnable")},start:function(){var e=function(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function n(o,s){try{var r=e[o](s),a=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)});t(a)}("next")})}}(regeneratorRuntime.mark(function e(){var i,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("HallBootScene start"),e.prev=1,e.next=4,this.loadSubPackage();case 4:return e.next=6,n.loadDialogList();case 6:if(i=t("af-scene-mgr"),!(o=cc.director.getScene()).getChildByName("SceneManager")){e.next=10;break}return e.abrupt("return");case 10:(s=new cc.Node("SceneManager")).addComponent(i),o.addChild(s),AF.gotoScene("HallLoginScene"),e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(1),console.error("\u3010\u6e38\u620f\u51fa\u73b0\u9519\u8bef\u3011"),e.abrupt("return");case 20:case"end":return e.stop()}},e,this,[[1,16]])}));return function(){return e.apply(this,arguments)}}(),loadSubPackage:function(){return new Promise(function(t,e){cc.loader.downloader.loadSubpackage("sub",function(i){i&&e(i),t()})})},update:function(){}}),cc._RF.pop()},{"af-config-mgr":"af-config-mgr","af-scene-mgr":"af-scene-mgr"}],HallGameDialog:[function(t,e,i){"use strict";cc._RF.push(e,"c02ecbWkOxBwbBv7FyaPZPw","HallGameDialog");var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,s=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=r(t("./GameItem")),s=r(t("./LinkItem"));function r(t){return t&&t.__esModule?t:{default:t}}var a=t("AFDialogBase");cc.Class({extends:a,properties:{title:cc.Label,itemWrap:cc.Node,linkWrap:cc.Node,prefabItem:cc.Prefab,prefabLink:cc.Prefab,label_gold:cc.Label,top:cc.Node,bottom:cc.Node},onLoad:function(){a.prototype.onLoad.call(this),AF.EventDispatcher.on("GoldRefresh",this.refreshGold,this),this.info=null,this.items=[],this.selectedItems=[],this.tipCount=1},onEnable:function(){a.prototype.onEnable.call(this),this.playerData=AF.GameData.getMyPlayerData();var t=AF.DIALOG_PARAMS();this.pointId=t.pointId||1,this.initUI(),this.info=AF.GameConfig.getPointInfo(this.pointId),this.initItemNodes(),this.itemWrap.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.itemWrap.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),AF.EventDispatcher.emit("ShowFriendPassed",this.pointId)},onDisable:function(){a.prototype.onDisable.call(this),AF.EventDispatcher.emit("HideFriendPassed"),this.itemWrap.off(cc.Node.EventType.TOUCH_START,this.onTouchStart),this.itemWrap.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},onDestroy:function(){a.prototype.onDestroy.call(this),AF.EventDispatcher.off("GoldRefresh",this.refreshGold,this)},refreshGold:function(){this.playerData=AF.GameData.getMyPlayerData(),this.label_gold.string=this.playerData.gold.toString()},initUI:function(){this.title.string=this.pointId.toString()},onBackButtonClick:function(t,e){AF.gotoScene("HallMainScene")},update:function(t){if(this.willShowTips&&!(this.willShowTips.length<=0)){var e=Date.now();if(!this.lastUpdate||e-this.lastUpdate>=100){var i=this.willShowTips.shift();i[0]&&i[0].updateTipLink(i[1],i[2]),this.willShowTips.length<=0&&(this.willShowTips=null),this.lastUpdate=e}}},initItemNodes:function(){var t=this;this.itemWrap.destroyAllChildren(),this.linkWrap.destroyAllChildren(),this.items=[],this.selectedItems=[],this.tipCount=1,this.startTime=Date.now(),this.passed=!1,this.willShowTips=null,this.bottom.active=!0,this.label_gold.string=this.playerData.gold.toString();for(var e=0;e<this.info.w;e++){this.items[e]=[];for(var i=0;i<this.info.h;i++){var r=cc.instantiate(this.prefabItem);r.x=90*e+45,r.y=90*(this.info.h-1-i)+45,r.name="item_"+e+"_"+i,r.parent=this.itemWrap;var a=cc.instantiate(this.prefabLink);a.x=90*e,a.y=90*(this.info.h-1-i),a.parent=this.linkWrap,this.items[e][i]={node:r,gameitem:r.getComponent(o.default),position:[e,i],linkNode:a,linkitem:a.getComponent(s.default)}}}this.itemWrap.width=90*this.info.w,this.itemWrap.height=90*this.info.h,this.linkWrap.width=90*this.info.w,this.linkWrap.height=90*this.info.h,this.info.path.forEach(function(e,i){var o=n(e,2),s=o[0],r=o[1];0===i&&(t.items[s][r].gameitem.setZero(!0),t.items[s][r].gameitem.setSelected(!0),t.selectedItems=[t.items[s][r]]),t.items[s][r].gameitem.setActive(!0)}),this.itemWrap.getComponent(cc.Widget).updateAlignment(),this.linkWrap.getComponent(cc.Widget).updateAlignment()},onTouchStart:function(t){var e=this.calcPos(t);if(e){for(var i=-1,n=0;n<this.selectedItems.length;n++)this.selectedItems[n]===e&&(i=n,e.gameitem.animateScale()),-1!==i&&n>i&&(this.selectedItems[n].gameitem.setSelected(!1),this.selectedItems[n].linkitem.updateSelectLink("",!1));-1!==i&&this.selectedItems.splice(i+1)}},onTouchMove:function(t){if(!this.passed){var e=this.calcPos(t);if(e&&e.gameitem.getActive()){var i=this.selectedItems[this.selectedItems.length-1];if(e!==i){var n=this.getRelativePos(i.position,e.position);/top|bottom|left|right/.test(n)&&(this.selectedItems.length>=2&&e===this.selectedItems[this.selectedItems.length-2]?(i.gameitem.setSelected(!1),i.linkitem.updateSelectLink("",!1),e.gameitem.animateScale(),this.selectedItems.pop()):e.gameitem.getSelected()||(e.gameitem.setSelected(!0),e.linkitem.updateSelectLink(n,!0),this.selectedItems.push(e),this.checkPass()))}}}},calcPos:function(t){var e=this.itemWrap.convertToWorldSpaceAR(cc.v2(0,0)),i=[t.getLocationX()-e.x,t.getLocationY()-e.y],n=Math.floor(i[0]/90),o=this.info.h-Math.ceil(i[1]/90);return n<0||n>=this.info.w||o<0||o>=this.info.h?null:this.items[n][o]},getRelativePos:function(t,e){if(!t||!e)return"";var i=n(t,2),o=i[0],s=i[1],r=n(e,2),a=r[0],c=r[1];if(o===a){if(s-c==1)return"bottom";if(s-c==-1)return"top"}else if(s===c){if(o-a==1)return"right";if(o-a==-1)return"left"}return""},checkPass:function(){var t=this;if(this.selectedItems.length<this.info.path.length)return!1;var e=Date.now()-this.startTime;this.passed=!0;var i=!1;return this.playerData.pointId<this.pointId&&(AF.util.upScore({score:this.pointId,startTime:this.startTime,endTime:Date.now()}),this.playerData.pointId=this.pointId,i=!0,AF.GameData.setMyPlayerData(this.playerData),AF.GameData.savePlayerData(this.playerData)),this.scheduleOnce(function(){t.bottom.active=!1,AF.EventDispatcher.emit("HideFriendPassed"),AF.openDialog("HallBalanceDialog",{costTime:e,over:i,pointId:t.pointId,close:function(){return AF.gotoScene("HallMainScene")},next:t.next.bind(t)})},.5),!0},clearSelected:function(){this.selectedItems.forEach(function(t,e){0!==e&&(t.gameitem.setSelected(!1),t.linkitem.updateSelectLink("",!1))}),this.selectedItems.splice(1)},checkShowGameTip:function(t){var e=this;this.tipCount>=this.info.path.length||this.willShowTips||(this.playerData.gold>=200?(this.playerData.gold-=200,this.label_gold.string=this.playerData.gold.toString(),AF.GameData.setMyPlayerData(this.playerData),AF.GameData.savePlayerData(this.playerData),this.showGameTip()):AF.util.showVideoAd("battle",function(t){t&&e.showGameTip()}))},showGameTip:function(){this.clearSelected(),this.tipCount+=5;var t=this.info.path.slice(0,this.tipCount),e=this.tipCount-6;e=e<1?1:e,this.willShowTips=[];for(var i=e;i<t.length;i++){var n=t[i-1],o=t[i],s=t[i+1]||null,r=this.items[o[0]][o[1]];this.willShowTips.push([r.linkitem,this.getRelativePos(n,o),this.getRelativePos(s,o)])}},next:function(){this.pointId=this.pointId+1,this.initUI(),this.info=AF.GameConfig.getPointInfo(this.pointId),AF.EventDispatcher.emit("ShowFriendPassed",this.pointId),this.initItemNodes()}}),cc._RF.pop()},{"./GameItem":"GameItem","./LinkItem":"LinkItem",AFDialogBase:"AFDialogBase"}],HallGiftDialog:[function(t,e,i){"use strict";cc._RF.push(e,"9bb24u0YJBGwK5LUv/bbjU2","HallGiftDialog");var n=t("AFDialogBase");cc.Class({extends:n,properties:{toggle_share:cc.Toggle,label_gold:cc.Label,asset_select:[cc.SpriteFrame],btn_select:cc.Sprite},onLoad:function(){this.select=!1,n.prototype.onLoad.call(this)},onEnable:function(){n.prototype.onEnable.call(this),this.params=AF.DIALOG_PARAMS(),this.label_gold.string=AF.GameData.getMyPlayerData().gold.toString(),this.select=!1,this.btn_select.spriteFrame=this.asset_select[1]},onDisable:function(){AF.EventDispatcher.emit("ShowBalancePassed",{pointId:this.params.pointId,costTime:this.params.costTime})},onselect:function(){this.select=!this.select,this.btn_select.spriteFrame=this.select?this.asset_select[0]:this.asset_select[1]},onBtnClick:function(){var t=this,e=Date.now().toString(),i=AF.GameData.getMyPlayerData();this.select?AF.util.shareAppMessage(null,function(){i.giftTag=e,i.gold+=600,AF.GameData.savePlayerData(i),t.close()},function(){i.giftTag=e,i.gold+=600,AF.GameData.savePlayerData(i),t.close()},{giftTag:e},"gift",{summary:"\u7070\u592a\u72fc\u53bb\u54ea\u4e86\uff1f\u70b9\u51fb\u7ffb\u500d"}):(i.gold+=600,AF.GameData.setMyPlayerData(i),AF.GameData.savePlayerData(i),AF.EventDispatcher.emit("GoldRefresh"),this.close())}}),cc._RF.pop()},{AFDialogBase:"AFDialogBase"}],HallJumpScene:[function(t,e,i){"use strict";cc._RF.push(e,"b0ffdjl1Z9EdpyW/V0/WdyT","HallJumpScene");var n={width:200,baseDt:.9,minSpeed:300,maxSpeed:380},o={width:200,baseDt:.6,minSpeed:280,maxSpeed:400},s={width:200,baseDt:.6,minSpeed:280,maxSpeed:400},r=[2,5],a="CONTINUE",c="OVER",h="DROP",l="BALANCE",f="PAUSE",u="GROUND",d="SKY",p="DOUBLE";cc.Class({extends:cc.Component,properties:{uiNode:cc.Node,gameNode:cc.Node,cloudNode:cc.Node,bgNode:cc.Node,rocketBg:cc.Node,goldNode:cc.Node,perfectFont:cc.BitmapFont,normalFont:cc.BitmapFont,playerPre:cc.Prefab,effectPre:cc.Prefab,stonePre:cc.Prefab,titleSpriteFrames:{default:[],type:cc.SpriteFrame},scoreNode:cc.Node,sharerOpenId:cc.Label,sharerNickName:cc.Label,score:cc.Label,photo:cc.Node,reviveButton:cc.Node},onLoad:function(){this.playerData=AF.GameData.getMyPlayerData(),this.step=0;var t=cc.v2(0-cc.winSize.width/2,0-cc.winSize.height/2);this.uiNode.setPosition(t),this.uiNode.getChildByName("logoNode").setPosition(cc.v2(cc.winSize.width/2,cc.winSize.height/2));var e=this.node.getChildByName("touchNode");e.width=cc.winSize.width,e.height=cc.winSize.height,e.setPosition(t),e.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this);var i=cc.v2(0-cc.winSize.width/2,0-cc.winSize.height/2-1.5*cc.winSize.height);this.gameNode.setPosition(i),this.cloudNode.setPosition(i),this.bgNode.setPosition(i),this.initUINode(this.uiNode),this.initGameNode(this.gameNode),this.initCloudNode(this.cloudNode),this.initBGNode(this.bgNode),this.initGameStart(),this.showDustEffect(0,0-cc.winSize.height),this.showLineEffect(0-cc.winSize.height),this.gameStatus=c,this.playerStatus=d,this.goldPool=[],AF.EventDispatcher.on(AF.Event.JUMP_REVIVE,this.onBalanceDialogEvent,this),this.photoScript=this.photo.getComponent("PhotoPrefab"),this.schedule(this.onGameBGM,.1,this)},onDestroy:function(){AF.EventDispatcher.off(AF.Event.JUMP_REVIVE,this.onBalanceDialogEvent,this),AF.util.hideBannerAd("main")},onBalanceDialogEvent:function(t){0===t?(this.reviveButton.active=!0,this.scoreNode.active=!0):1===t?(this.scoreNode.active=!1,this.gameStart=!1,this.showBalance()):2===t&&(this.scoreNode.active=!1,this.gameStatus=l)},initUINode:function(t){var e=(t=this.uiNode).getChildByName("playerButton"),i=cc.instantiate(this.playerPre);i.setPosition(5,-28),i.setScale(1.3),e.getChildByName("button").addChild(i),this.buttonHeroScript=i.getComponent("PlayerPrefab"),e.setPosition(100,.15*cc.winSize.height),t.getChildByName("rankButton").setPosition(540,.15*cc.winSize.height),t.getChildByName("startButton").setPosition(320,.15*cc.winSize.height),this.uiNode.getChildByName("gameCount").setPosition(0,.93*cc.winSize.height);var n=this.uiNode.getChildByName("overNode");n.setPosition(cc.winSize.width/2,.93*cc.winSize.height-150);for(var o=["overBestScore","overAveScore","overPreScore","overNormal"],s=(t=null,0);s<o.length;s++){n.getChildByName(o[s]).scale=0}var r=this.uiNode.getChildByName("startNode");r.setPosition(cc.winSize.width/2,.6*cc.winSize.height);o=["ready","cutdown0","cutdown1","go"],t=null;for(var a=0;a<o.length;a++){r.getChildByName(o[a]).scale=0}this.uiNode.getChildByName("tips").setPosition(cc.winSize.width/2,.93*cc.winSize.height-250)},createNewStone:function(){var t=cc.instantiate(this.stonePre);t.setPosition(-1e3,0),this.gameNode.addChild(t,-1);var e=t.getComponent("StonePrefab");return e.setStoneType("stone"),e.setNewColor(n.width),e.setStoneRect(n.width,80),e},initGameNode:function(){this.totalHeight=425;this.playerNode=this.gameNode.getChildByName("playerNode"),this.playerNode.zIndex=9,this.playerNode.width=54,this.playerNode.height=117,this.playerNode.setPosition(cc.winSize.width/2,425);var t=cc.instantiate(this.playerPre);t.setScale(1.5),t.setPosition(0,0),this.playerNode.addChild(t,1,"jumpHero"),this.heroScript=t.getComponent("PlayerPrefab");var e=cc.instantiate(this.playerPre);e.setScale(1.5),e.setPosition(0,0),this.playerNode.addChild(e,1,"backupHero"),this.backupHeroInfo={script:e.getComponent("PlayerPrefab"),playerId:AF.GameConfig.getRandomPlayerId()},this.backupHeroInfo.script.setPlayerID(this.backupHeroInfo.playerId),e.active=!1,this.stonePool=[];for(var i=Math.ceil(cc.winSize.height/80),n=0;n<i;n++){var o={script:this.createNewStone(),status:!1};this.stonePool.push(o)}this.groundStone=null,this.lineMgr={};for(var s=["aveLine","lastLine","bestLine","normalLine"],r=0;r<s.length;r++){var a=s[r],c=this.gameNode.getChildByName(a);this.lineMgr[a]=c}},initCloudNode:function(t){t=this.cloudNode;this.cloudMgr=[];for(var e=Math.ceil(1.5*cc.winSize.height/100),i=0;i<e;i++){var n="cloudNode"+(1+i),o=new cc.Node(n),s=o.addComponent(cc.Sprite);s.trim=!1,s.sizeMode=2,t.addChild(o,9,n);var r={sprite:s,cloudId:i};this.refreshCloudUI(r),this.cloudMgr[i]=r}},refreshCloudUI:function(t){if(t&&t.sprite){var e=t.sprite,i=t.sprite.node,n=1500+100*t.cloudId,o="yun"+(1+Math.ceil(100*Math.random())%4),s=Math.ceil(10*Math.random())%2*2*cc.winSize.width/3+Math.random()*cc.winSize.width/3,r=n+100*Math.random();i.opacity=204+Math.ceil(Math.random()*(249.9-204)),cc.loader.loadRes("hall/textures/cloud/"+o,cc.SpriteFrame,function(t,i){t?console.warn("url: hall/textures/cloud/"+o+" load fail"):e?(e.spriteFrame=i,e.node.zIndex=-1*Math.ceil(r/100)):console.warn("Cloud sprite frame setting error!")});cc.winSize.width;i.setPosition(s,r),this.addCloudMoveEffect(i),i.active}},initBGNode:function(t){this.bgMgr=[],this.bgMgr.push(t.getChildByName("sky1")),this.bgMgr.push(t.getChildByName("sky2")),this.bgMgr.push(t.getChildByName("sky3"))},initGameStart:function(){this.gameStartTime=Date.now();var t=cc.v2(0-cc.winSize.width/2,0-cc.winSize.height/2);this.uiNode.setPosition(t),this.uiNode.getChildByName("logoNode").setPosition(cc.v2(cc.winSize.width/2,cc.winSize.height/2));var e=cc.v2(0-cc.winSize.width/2,0-cc.winSize.height/2-1.5*cc.winSize.height);this.gameNode.setPosition(e),this.cloudNode.setPosition(e),this.bgNode.setPosition(e);var i=this.uiNode.getChildByName("tips"),n=i.getChildByName("title").getComponent(cc.Sprite),o=i.getChildByName("addIcon").getComponent(cc.Sprite),s=i.getChildByName("scoreNum").getComponent(cc.Label);n.node.active=!1,n.node.scale=0,o.node.active=!1,s.node.active=!1,this.scoreNode.active=!0;for(var r=0;r<this.stonePool.length;r++){var a=this.stonePool[r];a.status=!1,a.script.node.setPosition(-1e3,0),a.script.node.opacity=255}for(var c=0;c<this.cloudMgr.length;c++){var h=this.cloudMgr[c];h.cloudId=c,this.refreshCloudUI(h)}for(var l=0;l<this.bgMgr.length;l++){var f=this.bgMgr[l];f.y=f.height*l}this.heroVerticalVelocity=0,this.heroHorizontalVelocity=0,this.heroRotationVelocity=0;var u=this.heroScript,d=AF.GameConfig.getRandomPlayerId();u.setPlayerID(d),u.node.active=!1,this.playerId=this.backupHeroInfo.playerId,this.heroScript=this.backupHeroInfo.script,this.heroScript.node.active=!0,this.backupHeroInfo={script:u,playerId:d},this.heroScript.playAction("wait"),this.heroScript.setHeroShadow(!1),this.playerNode.zIndex=9,this.playerNode.width=36,this.playerNode.height=78,this.playerNode.setAnchorPoint(.5,0),this.playerNode.rotation=0,this.playerNode.setPosition(cc.winSize.width/2,425),this.buttonHeroScript.setPlayerID(this.playerId),this.buttonHeroScript.playDefaultPoise(),this.buttonHeroScript.setHeroShadow(!1),this.groundStone=null,this.perfectCount=0,this.step=0,this.totalScore=0;var p=this.uiNode.getChildByName("gameCount");p.getChildByName("scoreNum").getComponentInChildren(cc.Label).font=this.normalFont,this.refreshCountLabel(),p.active=!1,this.stoneList=[],this.perfectStoneList=[];var g=this.playerData.bestScore,m=this.lineMgr.bestLine;m.setPosition(cc.winSize.width/2,425+80*g),m.active=!!g;var v=Math.ceil(this.playerData.totalScore/this.playerData.playCount),y=this.lineMgr.aveLine;y.setPosition(cc.winSize.width/2,425+80*v),y.active=!(!v||v===g);var w=this.playerData.preScore,A=this.lineMgr.lastLine;A.setPosition(cc.winSize.width/2,425+80*w),A.active=!(!w||w===g||w===v),this.currLimt=1,500*this.currLimt===w&&(this.currLimt+=1),500*this.currLimt===v&&(this.currLimt+=1),500*this.currLimt===g&&(this.currLimt+=1);var F=this.lineMgr.normalLine;F.setPosition(cc.winSize.width/2,425+80*this.currLimt*500),F.active=!0},onDisable:function(){},start:function(){AF.EventDispatcher.emit(AF.Event.SCENE_LOADED),this.heroVerticalVelocity=0,this.heroHorizontalVelocity=0,this.heroRotationVelocity=0,this.gameStart=!1},updateHeroPosition:function(t,e){if(e=e||!1,this.playerNode.y+=this.heroVerticalVelocity*t,this.playerNode.x+=this.heroHorizontalVelocity*t,this.playerNode.rotation+=this.heroRotationVelocity*t,this.heroVerticalVelocity-=2e3*t,this.heroHorizontalVelocity>0?this.heroHorizontalVelocity=Math.max(0,this.heroHorizontalVelocity-1e3*t):this.heroHorizontalVelocity<0&&(this.heroHorizontalVelocity=Math.min(0,this.heroHorizontalVelocity+1e3*t)),this.playerNode.y<=425&&(this.heroVerticalVelocity=0,this.playerNode.y=425),0===this.heroHorizontalVelocit&&0===this.heroVerticalVelocity&&(this.heroRotationVelocity=0),Math.abs(this.playerNode.rotation)>75&&(this.heroRotationVelocity=0),this.stoneList&&this.stoneList[0]){var i=this.stoneList[0];!e&&i.velocity>0?this.heroScript.setFlipX(!0):i.velocity<0&&this.heroScript.setFlipX(!1)}},updateStonePosition:function(t){for(var e=this.stoneList,i=0;i<e.length;i++){var n=e[i];if(n.delayTime>0)n.delayTime-=t;else{var o=n.script.node;o.x+=n.velocity*t,n.velocity+=t*n.acceleration,(n.velocity<0&&o.x<cc.winSize.width/2||n.velocity>0&&o.x>cc.winSize.width/2)&&(n.velocity=0,n.acceleration=0,o.x=cc.winSize.width/2)}}},rectIntersectsRect:function(t,e){if(!t||!e)return null;var i=cc.rectGetMinX(t),n=cc.rectGetMaxX(t),o=cc.rectGetMinY(t),s=cc.rectGetMaxY(t),r=cc.rectGetMinX(e),a=cc.rectGetMaxX(e),c=cc.rectGetMinY(e),h=cc.rectGetMaxY(e),l=Math.max(i,r),f=Math.min(n,a),u=Math.max(o,c),d={x:l,y:u,width:f-l,height:Math.min(s,h)-u};return(d.width<=0||d.height<=0)&&(d=null),d},checkIntersects:function(t,e){var i=this.rectIntersectsRect(t,e);if(!i)return null;var n=i.width,o=i.height,s=null;return(s=n>=e.width?{gameStatus:a}:o>=18?{gameStatus:c}:n<=16?null:{gameStatus:a})&&a===s.gameStatus&&this.heroVerticalVelocity>0&&(s=null),s},updateIntersects:function(t){var e=0,i=425,n=null;if(this.stoneList&&this.stoneList[0]){var o=this.stoneList[0],s=o.script.getStoneRect();s.height+=1,n=this.checkIntersects(s,t),e=o.velocity,i=o.script.node.y+o.script.node.height}if(n)return Object.assign({},n,{velocity:e,playerTrueY:i,type:"stone"});e=0;var r={x:0,y:345};r.width=cc.winSize.width,r.height=81,i=425,this.groundStone&&(r.y=this.groundStone.node.y,i=this.groundStone.node.y+this.groundStone.node.height);var c=this.checkIntersects(r,t);return c?(c.gameStatus=a,Object.assign({},c,{velocity:e,playerTrueY:i,type:"ground"})):{gameStatus:h}},updateGameNextDt:function(t){if(h!==t.gameStatus){if(c===t.gameStatus)return AF.audio.play("lose"),p===this.playerStatus&&this.doJump(),this.heroHorizontalVelocity=3*t.velocity/2,this.heroRotationVelocity=t.velocity,this.gameStatus=c,void this.heroScript.stopAction();if(this.refreshHeroStatus(t),"ground"!==t.type){this.step+=1;var e=1,i="normal",n=0;if(this.groundStone){var o=Math.abs(this.stoneList[0].script.node.x-this.groundStone.node.x),s=this.groundStone.node.width-o;o<=0?(this.perfectCount+=1,this.perfectStoneList.length<=0&&this.perfectStoneList.push(this.groundStone),this.perfectStoneList.push(this.stoneList[0].script),e=this.perfectCount>5?Math.pow(2,5):Math.pow(2,this.perfectCount),i="perfect",n=this.perfectCount,"perfect"+(1+this.perfectCount%5)):s>=8?(this.perfectCount=0,this.perfectStoneList=[],e=1,i="normal",n=0,"dong"):s<8&&(this.perfectCount=0,this.perfectStoneList=[],e=1,i="danger",n=0,"dong")}var a=this.stoneList.shift(),l=this.groundStone,f=a.script;if(this.showTips(i,n,e),l&&l.showScoreFadeAction(),f.showScore(e,i),this.stoneList.length<=5){var u=this.stoneList[this.stoneList.length-1],d=this.getNexStoneList(u,r[0],r[1]);this.stoneList=this.stoneList.concat(d)}this.refreshCountLabel(),this.groundStone=f}}},refreshHeroStatus:function(t){switch(this.heroHorizontalVelocity=0,this.playerNode.y=t.playerTrueY,this.playerStatus){case u:this.heroVerticalVelocity=0;break;case d:this.showDustEffect(this.heroScript.getFlipX(),t.playerTrueY),this.heroScript.playAction("wait"),this.playerStatus=u,this.heroVerticalVelocity=0,t.type;break;case p:this.heroVerticalVelocity=0,this.showDustEffect(this.heroScript.getFlipX(),t.playerTrueY),this.doJump()}},updateGameNodePosition:function(t,e){this.gameNode.y+=t*e,this.cloudNode.y+=t*e,this.bgNode.y+=t*e,this.refreshCloudMgr(),this.refreshStonePool(),this.refreshBGNode()},updateLine:function(t){var e="",i=425,n=Math.ceil(this.totalScore/1),o=0,s=this.step+500*this.currLimt-n,r=this.lineMgr.normalLine;r.y>425+80*s&&(r.y-=800*t),n>=500*this.currLimt&&(e="overNormal",i=r.y,this.currLimt=Math.floor(this.totalScore/500)+1,o=500*(this.currLimt-1)*1,500*this.currLimt===this.playerData.preScore&&(this.currLimt+=1),500*this.currLimt===Math.ceil(this.playerData.totalScore/this.playerData.playCount)&&(this.currLimt+=1),500*this.currLimt===this.playerData.bestScore&&(this.currLimt+=1),s=this.step+500*this.currLimt-n,r.setPosition(cc.winSize.width/2,425+80*s));var a=this.step+this.playerData.preScore-n,c=this.lineMgr.lastLine;c.y>425+80*a&&(c.y-=800*t),c.active&&a<=this.step&&(e="overPreScore",i=c.y,c.active=!1);var h=this.step+Math.ceil(this.playerData.totalScore/this.playerData.playCount)-n,l=this.lineMgr.aveLine;l.y>425+80*h&&(l.y-=800*t),l.active&&h<=this.step&&(e="overAveScore",i=l.y,l.active=!1);var f=this.step+this.playerData.bestScore-n,u=this.lineMgr.bestLine;u.y>425+80*f&&(u.y-=800*t),u.active&&f<=this.step&&(e="overBestScore",i=u.y,u.active=!1),e&&(this.showOverMessage(e,o),this.showLineEffect(i))},showOverMessage:function(t,e){var i=this.uiNode.getChildByName("overNode"),n=this.uiNode.getChildByName("gameCount").getChildByName("scoreNum").getComponentInChildren(cc.Label),o=n.node.convertToWorldSpaceAR(cc.v2(0,0)),s=this.uiNode.convertToNodeSpaceAR(cc.v2(o.x,o.y-n.node.height/2-50));i.setPosition(s);for(var r=["overBestScore","overAveScore","overPreScore","overNormal"],a=null,c=0;c<r.length;c++){var h=i.getChildByName(r[c]);h.stopAllActions(),h.scale=0,t===r[c]&&(a=h)}if(a){if("overNormal"===t){var l=a.getChildByName("scoreNum");l.getComponent(cc.Label).string=e,a.getChildByName("title").x=0-l.width/2,a.getChildByName("scoreIcon").x=l.width/2}a.runAction(cc.sequence(cc.scaleTo(.3,1.2).easing(cc.easeBackOut()),cc.scaleTo(.3,1).easing(cc.easeBackIn()),cc.delayTime(.4),cc.scaleTo(.1,0).easing(cc.easeBackOut())))}},refreshCloudMgr:function(){for(;;){var t=this.cloudMgr[0];if(!t)break;var e=t.sprite.node;if(e.convertToWorldSpaceAR(cc.v2(0,0)).y>=-320-.5*e.height)break;var i=this.cloudMgr[this.cloudMgr.length-1];t.cloudId=i.cloudId+1,this.refreshCloudUI(t);var n=this.cloudMgr.shift();this.cloudMgr.push(n)}},refreshStonePool:function(){for(var t=0;t<this.stonePool.length;t++){var e=this.stonePool[t];if(e.status){var i=e.script.node;i.convertToWorldSpaceAR(cc.v2(0,0)).y<-320&&(e.status=!1,i.setPosition(-1e3,0),i.opacity=255,i.zIndex=-1)}}for(;this.perfectStoneList[0];){if(!(this.perfectStoneList[0].node.convertToWorldSpaceAR(cc.v2(0,0)).y<-320))break;this.perfectStoneList.shift()}},refreshBGNode:function(){var t=this.bgMgr[this.bgMgr.length-1].height+this.bgMgr[this.bgMgr.length-1].y,e=this.bgMgr[0];if(e.convertToWorldSpaceAR(cc.v2(0,0)).y<-320-1*e.height)return this.bgMgr.shift(),this.bgMgr.push(e),void(e.y=t)},update:function(t){this.gameStart&&("ROCKET"===this.gameModle?this.updateRocket(t):"NORMAL"===this.gameModle&&this.updateNormal(t))},updateNormal:function(t){if(f!==this.gameStatus){this.updateHeroPosition(t);var e=Math.abs(this.gameNode.y);switch(e-cc.winSize.height/2<=80*this.step?this.updateGameNodePosition(t,-160):e-cc.winSize.height/2>=80*(this.step+1)&&this.updateGameNodePosition(t,160),this.updateLine(t),this.gameStatus){case l:case f:break;case c:this.gameStatus=l;var i={modle:"balance",data:{score:this.totalScore,startTime:this.gameStartTime}};if(AF.util.isVideoAdLoaded()){if(this.reviveEnable){this.gameStatus=f;i={modle:"revive",data:{score:this.totalScore,startTime:this.gameStartTime}}}}else this.reviveEnable=!1;this.scoreNode.active=!1,AF.openDialog("HallBalanceDialog",i);break;case a:var n=this.playerNode.getBoundingBox();this.updateStonePosition(t);var o=this.updateIntersects(n);this.updateGameNextDt(o)}}},updateRocket:function(t){if(this.updateRocketBg(t),this.updateHeroPosition(t,!0),Math.abs(this.gameNode.y)-cc.winSize.height/2<=80*(this.step+4)){this.updateGameNodePosition(t,-1600)}this.updateRocketStonePosition(t),this.catchHeroPosition(),this.checkStone()},onTouchStart:function(t){switch(this.playerStatus){case u:console.warn("\u73a9\u5bb6\u5728\u5730\u9762."),this.doJump();break;case d:console.warn("\u73a9\u5bb6\u5728\u7a7a\u4e2d."),this.playerStatus=p;break;case p:console.warn("\u73a9\u5bb6\u8fde\u8df3.")}},doJump:function(){AF.audio.play("jump"),this.heroScript.playAction("attack",!0),this.heroVerticalVelocity=750,this.playerStatus=d},onPlayerButtonClick:function(t,e){},onRankButtonClick:function(t,e){AF.gotoScene("HallRankScene")},onReviveButtonClick:function(t,e){for(var i=0;i<this.stoneList.length;i++){this.stoneList[i].script.node.setPosition(-1e3,0)}AF.audio.resumeBGM(),this.stoneList=[];var n=null;this.groundStone&&(n={script:this.groundStone,type:"stone",velocity:0,acceleration:0,delayTime:2});var o=this.getNexStoneList(n,r[0],r[1]);this.stoneList=this.stoneList.concat(o);o=this.getNexStoneList(this.stoneList[this.stoneList.length-1],r[0],r[1]);this.stoneList=this.stoneList.concat(o),this.heroVerticalVelocity=0,this.heroHorizontalVelocity=0,this.heroRotationVelocity=0,this.heroScript.playAction("wait"),this.playerNode.zIndex=9,this.playerNode.rotation=0,this.playerNode.setPosition(cc.winSize.width/2,425+80*(this.step+1)),this.reviveEnable=!1,this.gameStatus=a,this.playerStatus=d,this.reviveButton.active=!1},onGameStart:function(t){if(t){var e=this,i=[];e.playerNode.y=545,e.playerNode.active=!1,e.hideStartButton(),i.push(cc.callFunc(function(){var t=cc.v2(0-cc.winSize.width/2,0-cc.winSize.height/2);e.gameNode.runAction(cc.moveTo(.8,t)).easing(cc.easeSineIn(3)),e.cloudNode.runAction(cc.moveTo(.8,t)).easing(cc.easeSineIn(3)),e.bgNode.runAction(cc.moveTo(.8,t)).easing(cc.easeSineIn(3));var i=Math.abs(e.cloudNode.y+cc.winSize.height/2)/.8;e.uiNode.getChildByName("logoNode").runAction(cc.moveBy(1e3/i,0,1e3))})),i.push(cc.delayTime(.8)),i.push(cc.callFunc(function(){AF.audio.playDefaultBGM(),AF.audio.play("ready"),e.uiNode.getChildByName("startNode").getChildByName("ready").runAction(cc.sequence(cc.scaleTo(.15,1.2),cc.scaleTo(.15,1),cc.delayTime(.2),cc.scaleTo(.1,0)))})),i.push(cc.delayTime(.2)),i.push(cc.callFunc(function(){e.playerNode.active=!0;var t=e.playerNode.scale;e.playerNode.scale=0,e.playerNode.runAction(cc.sequence(cc.scaleTo(.3,1*t,.8*t),cc.scaleTo(.3,.8*t,1*t),cc.scaleTo(.1,t))),e.gameModle="NORMAL",e.gameStart=!0,e.gameStatus=a,e.playerStatus=d})),i.push(cc.delayTime(.3));for(var n=function(t){i.push(cc.callFunc(function(){AF.audio.play("ready");var i="cutdown"+t%2,n=e.uiNode.getChildByName("startNode").getChildByName(i);n.getComponent(cc.Label).string=t,n.runAction(cc.sequence(cc.scaleTo(.15,1.2),cc.scaleTo(.15,1),cc.delayTime(.2),cc.scaleTo(.1,0)))})),i.push(cc.delayTime(.5))},o=2;o>0;o--)n(o);i.push(cc.callFunc(function(){AF.audio.play("ready"),e.uiNode.getChildByName("startNode").getChildByName("go").runAction(cc.sequence(cc.scaleTo(.15,1.2),cc.scaleTo(.15,1),cc.delayTime(.2),cc.scaleTo(.1,0)))})),i.push(cc.delayTime(.5)),i.push(cc.callFunc(function(){e.doStartGame(t)})),this.node.runAction(cc.sequence(i))}},doStartGame:function(t){if(t){if("ROCKET"===t)this.doRocketRush();else if("NORMAL"===t){this.gameModle="NORMAL";var e=this.getNexStoneList(null,r[0],r[1]);this.stoneList=this.stoneList.concat(e);e=this.getNexStoneList(this.stoneList[this.stoneList.length-1],r[0],r[1]);this.stoneList=this.stoneList.concat(e)}this.gameStart=!0,this.uiNode.getChildByName("gameCount").active=!0,this.gameStatus=a,this.playerStatus=d,this.reviveEnable=!0}},onStartButtonClick:function(t,e){if(this.heroScript.isLoaded()){var i=this,n=Math.floor(i.playerData.preScore/1e3);n>0&&AF.util.isVideoAdLoaded()?function(t){return new Promise(function(e,i){AF.openDialog("HallRocketDialog",{score:t,callBack:e})})}(1e3*n).then(function(t){i.onGameStart(t)}):i.onGameStart("NORMAL")}else AF.ToastMessage.show("\u4eba\u7269\u52a0\u8f7d\u4e2d")},getNexStoneList:function(t,e,i){e=e||3,i=i||5;var r=0;t&&(t.velocity<0?r=1:t.velocity>0&&(r=-1)),r||(r=Math.ceil(1e3*Math.random())%2?1:-1);var a=3*cc.winSize.width/2,c=425,h=0;t&&(c=t.script.node.y+80,t.delayTime>0&&(h=t.delayTime,t.acceleration));var l=0,f=160,u=260;c<1600?(l=n.width,n.baseDt,f=n.minSpeed,u=n.maxSpeed):c<4e3?(l=o.width,o.baseDt,f=o.minSpeed,u=o.maxSpeed):(l=s.width,s.baseDt,f=s.minSpeed,u=s.maxSpeed),a=cc.winSize.width+l/2,r>0&&(a=0-l/2);for(var d=r*(f+Math.random()*(u-f)),p=[],g=e+Math.ceil(Math.random()*(i-e)),m=0;m<g;m++){var v=this.getStone();v.init(),v.setStoneType("stone"),v.setStoneRect(l,80),v.setNewColor(l),v.node.setPosition(a,c+80*m),v.node.zIndex=5;var y=r*f;m>0&&(y=d+10*r+.8*r*Math.random()*Math.abs(u-Math.abs(d)),Math.abs(y)>u&&(y=r*u));var w=h+1.5*(m+1);t||m||(w=1);var A={script:v,type:"stone",velocity:y,acceleration:0,delayTime:w};p.push(A),d=y,0}return p},getStone:function(){for(var t=null,e=0;e<this.stonePool.length;e++){var i=this.stonePool[e];if(!i.status){i.status=!0,t=i.script;break}}return t||(t=this.createNewStone(),this.stonePool.push({script:t,status:!0})),t},hideStartButton:function(){this.uiNode.getChildByName("playerButton").active=!1,this.uiNode.getChildByName("rankButton").active=!1,this.uiNode.getChildByName("startButton").active=!1},showBalance:function(){var t=this.playerData,e=this.totalScore/1;t.playCount+=1,t.totalScore+=e,t.preScore=e,e>t.bestScore&&(t.bestScore=e),AF.GameData.setMyPlayerData(t),AF.GameData.savePlayerData(t),this.initGameStart(),this.uiNode.getChildByName("playerButton").active=!0,this.uiNode.getChildByName("rankButton").active=!0,this.uiNode.getChildByName("startButton").active=!0},showRevive:function(){this.heroVerticalVelocity=0,this.heroHorizontalVelocity=0,this.heroRotationVelocity=0,this.heroScript.playAction("wait"),this.playerNode.zIndex=9,this.playerNode.rotation=0,this.playerNode.setPosition(cc.winSize.width/2,425+80*(this.step+2)),this.reviveEnable=!1,this.gameStatus=a,this.playerStatus=d},refreshCountLabel:function(){this.uiNode.getChildByName("gameCount").getChildByName("scoreNum").getComponentInChildren(cc.Label).string=this.totalScore},showTips:function(t,e,i){var n=this.uiNode.getChildByName("gameCount").getChildByName("scoreNum"),o=n.getComponentInChildren(cc.Label);switch(t){case"perfect":o.font=this.perfectFont,1,this.addGoodFlyEffect(i,e);break;case"normal":o.font=this.normalFont,-1,this.totalScore+=i;break;case"danger":o.font=this.normalFont,0,i=1,this.addShakerEffect(n,.1),this.totalScore+=i}if("perfect"===t)for(var s=0;s<this.perfectStoneList.length;s++){this.perfectStoneList[s].showLight()}},showGoodJobMessage:function(t){this.uiNode.getChildByName("tips");var e="tip1",i=["cool","good","great","prefect","wonderful","unbelievable"],n="cool";t>=6?(e="tip6",n=i[5]):(n=i[t-1],e="tip"+t),AF.audio.play(e),this.showTipsEffect(n)},getGoldObj:function(){for(var t=null,e=0;e<this.goldPool.length;e++)if(!(t=this.goldPool[e]).workStatus)return t;var i=cc.instantiate(this.goldNode);return i.setPosition(320,-100),this.gameNode.addChild(i,1),t={node:i,workStatus:!1},this.goldPool.push(t),t},showDustEffect:function(t,e){if(!this.dustEffect){var i=cc.instantiate(this.effectPre);this.gameNode.addChild(i,2,"dustEffectNode"),this.dustEffect=i.getComponent("EffectPrefab")}var n=64;t||(n=-64),this.dustEffect.node.setPosition(cc.winSize.width/2+n,e+64),this.dustEffect.doStart("dust",1,1,25),this.dustEffect.setFlipX(t)},showLineEffect:function(t){if(!this.lineEffect){var e=cc.instantiate(this.effectPre);this.gameNode.addChild(e,2,"lineEffect"),this.lineEffect=e.getComponent("EffectPrefab")}this.lineEffect.node.setPosition(cc.winSize.width/2,t+64),this.lineEffect.doStart("xian",1,1,25)},showTipsEffect:function(t){if(!this.tipsEffect){var e=this.uiNode.getChildByName("tips"),i=cc.instantiate(this.effectPre);e.addChild(i,2,"tipsEffect"),this.tipsEffect=i.getComponent("EffectPrefab")}this.tipsEffect.node.setPosition(0,0),this.tipsEffect.doStart(t,1,1,12)},doRocketRush:function(){this.gameModle="ROCKET",this.intervalSwitchBg=0,this.rocketBg.active=!0;var t=cc.v2(cc.winSize.width/2,cc.winSize.height/2);this.rocketBg.setPosition(cc.v2(0-cc.winSize.width/2,0-cc.winSize.height/2));var e=this.rocketBg.getChildByName("rocketBg1");e.scaleY=cc.winSize.height/e.height,e.setPosition(t);var i=this.rocketBg.getChildByName("rocketBg2");i.scaleY=cc.winSize.height/i.height,i.setPosition(t);for(var n=0;n<this.stonePool.length;n++){var o=this.stonePool[n];o.status=!1,o.script.node.setPosition(-1e3,0),o.script.node.opacity=255}this.stoneList=[];for(var s=0;s<10;s++){var r=null;this.stoneList.length&&(r=this.stoneList[this.stoneList.length-1]);var a=this.getRocketStone(r);this.stoneList.push(a)}this.heroVerticalVelocity=1125},updateRocketBg:function(t){if(this.intervalSwitchBg+=t,!(this.intervalSwitchBg<=.2)){this.intervalSwitchBg=0,this.rocketBg.setPosition(cc.v2(0-cc.winSize.width/2,0-cc.winSize.height/2));var e=this.rocketBg.getChildByName("rocketBg1"),i=this.rocketBg.getChildByName("rocketBg2");e.active?(e.active=!1,i.active=!0):(e.active=!0,i.active=!1)}},getRocketStone:function(t){var e=425,i=-1,o=0;i=0;t&&(e=t.script.node.y+80,o=AF.util.getMoveTime(Math.abs(t.script.node.x-cc.winSize.width/2),t.velocity,t.acceleration),o+=t.delayTime,t.velocity<0?i=1:t.velocity>0&&(i=-1)),i||(i=Math.ceil(1e3*Math.random())%2?1:-1);var s=1200*i*2,r=cc.winSize.width/2-.2*s,a=this.getStone();a.init(),a.setStoneType("stone"),a.setNewColor(n.width),a.setStoneRect(n.width,80),a.node.setPosition(r,e);var c=o-.2+.05;return c<0&&(c=0),{script:a,type:"stone",velocity:s,acceleration:0,delayTime:c}},updateRocketStonePosition:function(t){t=t||1/60;for(var e=this.stoneList,i=0;i<e.length;i++){var n=e[i];if(n.delayTime>0)n.delayTime-=t;else n.script.node.x+=n.velocity*t,n.velocity+=t*n.acceleration}for(;;){var o=e[0];if(!o)break;var s=o.script.node;if(!(o.velocity<0&&s.x<cc.winSize.width/2||o.velocity>0&&s.x>cc.winSize.width/2))break;o.velocity=0,o.acceleration=0,s.x=cc.winSize.width/2,e.shift(),this.groundStone=o.script,this.perfectStoneList.push(this.groundStone),this.step+=1}if(!(this.stoneList.length>=10||this.step>=40))for(var r=0;r<10;r++){var a=null;this.stoneList.length&&(a=this.stoneList[this.stoneList.length-1]);var c=this.getRocketStone(a);this.stoneList.push(c)}},catchHeroPosition:function(){if(this.playerNode.convertToWorldSpaceAR(cc.v2(0,0)).y<=425){var t=this.gameNode.convertToNodeSpaceAR(cc.v2(320,425));this.playerNode.setPosition(t)}},checkStone:function(){if(!(this.stoneList.length>0)){this.gameModle="NORMAL",this.rocketBg.active=!1;var t=this.getNexStoneList({script:this.groundStone,type:"stone",velocity:0,acceleration:0,delayTime:.5},r[0],r[1]);this.stoneList=this.stoneList.concat(t);t=this.getNexStoneList(this.stoneList[this.stoneList.length-1],r[0],r[1]);this.stoneList=this.stoneList.concat(t),this.gameStatus=a,this.playerStatus=d,this.reviveEnable=!0,this.heroVerticalVelocity=375;var e=this.heroVerticalVelocity,i=this.groundStone.node.y-this.playerNode.y,n=Math.max((-e+Math.sqrt(e*e+-4e3*i))/-2e3,(-e-Math.sqrt(e*e+-4e3*i))/-2e3);if(n>0){var o=this;this.node.runAction(cc.sequence(cc.delayTime(n),cc.callFunc(function(){var t=1e3*Math.floor(o.playerData.preScore/1e3);o.groundStone.showScore(t,"perfect"),o.totalScore+=t,o.refreshCountLabel()})))}}},doMoveXXXX:function(t,e,i,n,o){var s=0,r=0;t.x-n.x<0?s=-1:t.x-n.x>0&&(s=1),t.y-n.y<0?r=-1:t.y-n.y>0&&(r=1);var a=3;i<=.05*a+.05*a*e.length&&(a=1);var c=cc.callFunc(function(){for(var i=0;i<e.length;i++){var n=e[i],o=t.getChildByName(n);o.setPosition(0,0);var c=i+1,h=cc.p(15*s*c,15*r*c);a<=1?o.runAction(cc.moveTo(1/60*a*c,h)):o.runAction(cc.sequence(cc.delayTime(1/60*a),cc.moveTo(1/60*a*c,h)))}}),h=cc.moveTo(i,n);o&&(h=cc.moveTo(i,n).easing(o));var l=cc.callFunc(function(){for(var i=0;i<e.length;i++){var n=e[i],o=i+1;t.getChildByName(n).runAction(cc.moveTo(1/60*2*o,cc.p(0,0)))}});t.runAction(cc.sequence(c,h,l))},addGoodFlyEffect:function(t,e){var i=this,n=this.getGoldObj();n.workStatus=!0;var o=n.node;o.active=!0,o.opacity=255,o.setPosition(320,i.playerNode.y+10);var s=i.uiNode.getChildByName("gameCount").getChildByName("scoreNum").getComponentInChildren(cc.Label),r=.93*cc.winSize.height-80,a={};a.target=o,a.speed=1e3,a.interval=0,a.init_x=o.getPositionX(),a.init_y=o.getPositionY(),a.goldObj=n,a.step=0,a.totalTime=0,a.time=0;a.target.flyGod=function(n){if("delay"===a.currModle)return a.time+=n,void(a.time>=a.totalTime&&(a.totalTime=0,a.time=0,a.step+=1,a.currModle=""));switch(a.step){case 0:var o=300/a.speed;i.doMoveXXXX(a.target,[],o,cc.p(320,a.target.y+300)),a.totalTime=o,a.time=0,a.step+=1,a.currModle="delay";break;case 2:var c=a.target.convertToWorldSpaceAR(cc.p(0,0));a.target.parent=i.uiNode,a.target.zIndex=-1;var h=i.uiNode.convertToNodeSpace(c);a.target.setPosition(h),a.totalTime=0,a.time=0,a.step+=1;break;case 3:var l=(r-a.target.y)/a.speed;i.doMoveXXXX(a.target,["gold2","gold3","gold4"],l,cc.p(320,r)),a.totalTime=l+.15,a.time=0,a.step+=1,a.currModle="delay";break;case 5:a.target.runAction(cc.fadeOut(.1)),a.totalTime=.1,a.time=0,a.step+=1,a.currModle="delay";break;case 7:a.target.parent=i.gameNode,a.target.zIndex=-1,a.target.setPosition(a.init_x,a.init_y),a.target.opacity=255,a.target.active=!1,a.goldObj.workStatus=!1;e%5||i.showGoodJobMessage(Math.floor(e/5)),i.addShakerEffect(s.node,.1,null),i.totalScore+=t,s.string=i.totalScore,i.unschedule(a.target.flyGod),a.target.flyGod=null,a.totalTime=0,a.time=0,a.step+=1}},this.schedule(a.target.flyGod,a.interval)},addCloudMoveEffect:function(t){if(null!==t){var e="CloudMoveEffect";t[e]&&(this.unschedule(t[e]),t[e]=null);var i={speed_min:10,speed_max:30};i.currSpeed=i.speed_min+Math.random()*(i.speed_max-i.speed_min),i.init_y=0,i.target=t,i.init_y=t.getPositionY(),i.target[e]=function(e){if(i.target.x+=i.currSpeed*e,i.target.convertToWorldSpaceAR(cc.p(0,0)).x-i.target.width/2*i.target.scale>=cc.winSize.width){var n=0-100*Math.random()-t.width/2,o=i.init_y;i.target.setPosition(n,o),i.currSpeed=i.speed_min+Math.random()*(i.speed_max-i.speed_min)}},this.schedule(i.target[e],0)}},addShakerEffect:function(t,e,i){if(null!==e||null!==t){var n=this,o="ShakerActionName",s={init_x:0,init_y:0,diff_x:0,diff_y:0,diff_max:10,interval:.01,totalTime:0,time:0};s.target=t,s.init_x=t.getPositionX(),s.init_y=t.getPositionY(),s.totalTime=e,s.target[o]=function(t){if(s.time>=s.totalTime)return n.unschedule(s.target[o]),s.target[o]=null,s.target.setPosition(s.init_x,s.init_y),i&&i(),void(i=null);s.time=s.time+s.interval,s.diff_x=Math.random()*(s.diff_max+s.diff_max+1)-s.diff_max,s.diff_y=Math.random()*(s.diff_max+s.diff_max+1)-s.diff_max,s.target.setPosition(s.init_x+s.diff_x,s.init_y+s.diff_y)},this.schedule(s.target[o],s.interval)}},showSharerInfo:function(){},onGameBGM:function(t){AF.EventDispatcher.emit(AF.Event.GAME_ON_BGM)}}),cc._RF.pop()},{}],HallLoginScene:[function(t,e,i){"use strict";cc._RF.push(e,"ce460zL6ThEDIMWLSWy/URR","HallLoginScene");var n=-1,o=0,s=1,r=2,a=3,c=4,h=5,l=6,f=7,u=8,d=9,p=10,g=11,m=12,v=14;cc.Class({extends:cc.Component,properties:{stratButton:cc.Node,version:cc.Label},onLoad:function(){this.localVersion=0,this.step=o,this.tryTimes=0,this.fileList=[],AF.EventDispatcher.on(AF.Event.FILE_DOWNLOAD,this._loadAndCheckVersion,this),AF.EventDispatcher.on(AF.Event.DOWNLOADDIAGLOG_ON_CLOSE,this._downloadFilelist,this),this.stratButton.active=!1,this.schedule(this.onGameBGM,.1,this)},onEnable:function(){AF.setEnableSwitchSceneAnim(!0);var t=AF.platform.getDisplayVersion();this.version.string=t,AF.platform.isHairScreen()&&(this.version.node.getComponent(cc.Widget).right=20),this.localVersion=0,this.step=o,this.tryTimes=0,this.fileList=[],AF.EventDispatcher.emit(AF.Event.SCENE_LOADED);var e=AF.util.isVideoAdOpen();AF.platform.start(e),AF.platform.setKeepScreenOn();var i=AF.SCENE_PARAMS();this.change=i&&i.change||!1,this.change?this.step=m:(AF.GameData.init(),AF.GameConfig.init()),this.firstLoad=i&&i.firstLoad||!1},onGameBGM:function(t){AF.EventDispatcher.emit(AF.Event.GAME_ON_BGM)},onDisable:function(){},onDestroy:function(){AF.EventDispatcher.off(AF.Event.FILE_DOWNLOAD,this._loadAndCheckVersion,this),AF.EventDispatcher.off(AF.Event.DOWNLOADDIAGLOG_ON_CLOSE,this._downloadFilelist,this)},_loadLocalVersionFile:function(){if(this.step===s){if(!AF.util.isLocalFileExist("version.json"))return this.localVersion=0,void(this.step=r);var t=this;try{cc.loader.load(AF.util.getLocalFilePath("version.json"),function(e,i){if(e)throw e;t.localVersion=i.version,t.step=r,console.log("\u3010\u672c\u5730\u7248\u672c\u6587\u4ef6\u5185\u5bb9\u3011",i),console.log("HallLoginScene.js _loadLocalVersionFile localVersion:",t.localVersion)})}catch(e){console.log("\u3010\u9519\u8bef:\u8bfb\u53d6\u672c\u5730\u7248\u672c\u6587\u4ef6\u51fa\u9519\u3011"),console.log("\u3010\u8bfb\u53d6\u8def\u5f84\uff1a"+AF.util.getLocalFilePath("version.json")+"\u3011"),console.log("\u3010\u9519\u8bef\u4fe1\u606f\u3011",e),t.localVersion=0,t.step=r}}},_startLoadRemoteVersionFile:function(){this.step===a&&AF.Downloader.startDownloadFile("version.json",!0)},_loadAndCheckVersion:function(t,e,i){if(this.step===a&&"version.json"===t){if(!i)return console.log("err HallLoginScene.js _loadAndCheckVersion ",t,e,i),void(this.step=o);AF.util.makesureLocalPath2("temp/");var n=AF.util.getLocalFilePath2("temp/version.json");AF.util.saveLocalFile(e,n);var s=this;try{cc.loader.load(n,function(t,e){if(t)throw t;console.log("\u3010\u8fdc\u7a0b\u7248\u672c\u6587\u4ef6\u5185\u5bb9\u3011",e),console.log("\u3010\u8fdc\u7a0b\u7248\u672c\u6587\u4ef6\u7248\u672c\u3011",e.version),console.log("\u3010\u8fdc\u7a0b\u7248\u672c\u6587\u4ef6\u5217\u8868\u3011",e.files),console.log("\u3010\u672c\u5730\u7248\u672c\u3011",e.version),s.localVersion!==e.version?(s.fileList=e.files,s.tempFilePath=n,console.log("\u3010\u8fdc\u7a0b\u7248\u672c\u6587\u4ef6\u7248\u672c\u4e0e\u672c\u5730\u4e0d\u540c\u3011"),console.log("\u3010\u8fdc\u7a0b\u7248\u672c\u6587\u4ef6\u7248\u672c\u4e0e\u672c\u5730\u4e0d\u540c\u3011")):(s.tempFilePath=null,console.log("\u3010\u8fdc\u7a0b\u7248\u672c\u6587\u4ef6\u7248\u672c\u4e0e\u672c\u5730\u76f8\u540c\u3011")),s.step=c})}catch(t){console.warn("\u3010\u9519\u8bef:\u8bfb\u53d6\u8fdc\u7a0b\u6587\u4ef6\u4e34\u65f6\u6587\u4ef6\u51fa\u9519\u3011"),console.warn("\u3010\u8bfb\u53d6\u8def\u5f84\uff1a"+n+"\u3011"),console.warn("\u3010\u9519\u8bef\u4fe1\u606f\u3011",t),s.localVersion=0,s.step=o}}},_downloadFilelist:function(t){this.step===h&&(t?(this._saveRemoteVersionFile(),this.step=l,AF.EventDispatcher.emit(AF.Event.SHOW_LOGIN_PROGRESS_DIALOG,3,40)):(console.log("err HallLoginScene.js _downloadFilelist ",t),this.step=o))},_saveRemoteVersionFile:function(){this.step===h&&((AF.platform.isWxApp()||AF.platform.isQQApp())&&this.tempFilePath?(AF.util.copyLocalFile(this.tempFilePath,AF.util.getLocalFilePath("version.json")),this.step=l):this.step=l)},_loadConfigFileList:function(){this.step===f&&(this.configList=["model","player","point"],this.index=0,this._startLoadConfig())},_startLoadConfig:function(){if(this.step===f){if(this.index>=this.configList.length)return this.step=u,void AF.EventDispatcher.emit(AF.Event.SHOW_LOGIN_PROGRESS_DIALOG,3,60);var t,e="config/"+this.configList[this.index]+"_config.json";console.log("\u5f00\u59cb\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6"+e+"..."),t=AF.platform.isWxApp()||AF.platform.isQQApp()?AF.util.getLocalFilePath(e):AF.util.getRemoteUrl(e);var i=this;cc.loader.load(t,function(t,e){if(t)return console.log("err HallLoginScene.js _startLoadConfig ",t),void(i.step=o);AF.GameConfig.setGameConfig(i.configList[i.index],e),i.index++,i._startLoadConfig()})}},update:function(t){var e=this;if(e.openLoginProgressDialog||(AF.EventDispatcher.emit(AF.Event.SCENE_LOADED),AF.openDialog("LoginProgressDialog"),e.openLoginProgressDialog=!0),AF.util.queryObject("LoginProgressDialog"))if(o===e.step){if(console.log("\u5f00\u59cb\u542f\u52a8\u6e38\u620f"),AF.GameData.setMyObject("LoginProgressDialogFinish",!1),e.stratButton.active=!1,AF.EventDispatcher.emit(AF.Event.SHOW_LOGIN_PROGRESS_DIALOG,1,10),e.tryTimes>3)return e.step=n,console.log("\u542f\u52a8\u5931\u8d25"),console.log("HallLoginScene.js update  err: try too many times"),void AF.MessageBox.OK("\u542f\u52a8\u5931\u8d25","\u70b9\u51fb\u786e\u5b9a\u91cd\u8bd5\uff01",function(t){t===AF.MessageBox.RET_OK&&(e.tryTimes=0,e.step=o)},"",!1);if(3==e.tryTimes)return console.log("\u91cd\u8bd5\u6b21\u6570\u8d85\u8fc73\u6b21"),void e.tryTimes++;e.tryTimes++,AF.platform.isWxApp()||AF.platform.isQQApp()?(console.log("\u5f00\u59cb\u8bfb\u53d6\u672c\u5730\u914d\u7f6e\u6587\u4ef6"),e.step=s,e._loadLocalVersionFile()):(console.log("\u6d4f\u89c8\u5668\u5e73\u53f0"),e.step=c)}else{if(r===e.step)return console.log("\u8bfb\u53d6\u8fdc\u7a0b\u914d\u7f6e\u6587\u4ef6\u5e76\u6bd4\u8f83\u7248\u672c\u5dee\u5f02\uff0c\u5e76\u4fdd\u5b58\u6700\u65b0\u7684\u7248\u672c\u6587\u4ef6"),e.step=a,void e._startLoadRemoteVersionFile();if(c===e.step)return console.log("\u5f00\u59cb\u4e0b\u8f7d\u8d44\u6e90\u6587\u4ef6\u5217\u8868\uff0c\u4fdd\u5b58version.json"),e.step=h,void AF.EventDispatcher.emit(AF.Event.SHOW_LOGIN_PROGRESS_DIALOG,2,30,e.fileList);if(l===e.step)return console.log("\u5f00\u59cb\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6..."),e.step=f,void e._loadConfigFileList();if(u===e.step){console.log("\u5f00\u59cb\u8fde\u63a5\u670d\u52a1\u5668..."),AF.EventDispatcher.emit(AF.Event.SHOW_LOGIN_PROGRESS_DIALOG,3,100),e.step=d;var i=AF.util.getStorage("openId");if(i)return void(e.step=p);AF.util.login(function(t){i=t,console.error("openid",i),e.step=p},function(t){console.error(t),e.step=o})}else p===e.step?(console.log("\u83b7\u53d6\u7528\u6237\u4fe1\u606f"),e.step=g,e.step=m):m===e.step&&AF.GameData.getMyObject("LoginProgressDialogFinish")&&(e.step=v,console.log("\u7b49\u5f85 \u8fdb\u5165\u4e3b\u754c\u9762\u6216\u65b0\u624b\u5f15\u5bfc\u754c\u9762"),AF.gotoScene("HallMainScene"))}}}),cc._RF.pop()},{}],HallMainScene:[function(t,e,i){"use strict";cc._RF.push(e,"0e293CIAjxBxbosGuVdy4tG","HallMainScene"),cc.Class({extends:cc.Component,properties:{userInfoPre:{default:null,type:cc.Prefab},effectPre:{default:null,type:cc.Prefab}},onLoad:function(){this.winSize=cc.winSize,AF.util.checkShareGift(),AF.EventDispatcher.on(AF.Event.HIDE_BANNER_AD,this.onHideBannerAd,this),AF.audio.playDefaultBGM(),this.schedule(this.onGameBGM,.1,this)},onDestroy:function(){AF.EventDispatcher.off(AF.Event.HIDE_BANNER_AD,this.onHideBannerAd,this)},onEnable:function(){AF.EventDispatcher.emit(AF.Event.SCENE_LOADED)},update:function(t){},onGameBGM:function(t){AF.EventDispatcher.emit(AF.Event.GAME_ON_BGM)},onHideBannerAd:function(){this.showOrHideBannerAD()},rankClick:function(){AF.gotoScene("HallRankScene2")},showOrHideBannerAD:function(){AF.util.getMainBannerAdHeight()},checkLoading:function(){},onBtnNounClick:function(){AF.ToastMessage.show("\u529f\u80fd\u5f00\u53d1\u4e2d")},onBtnStartClick:function(){AF.gotoScene("HallPointScene")}}),cc._RF.pop()},{}],HallPointScene:[function(t,e,i){"use strict";cc._RF.push(e,"e549b0mkCJPdLkBiLhQMRgB","HallPointScene"),cc.Class({extends:cc.Component,properties:{content:cc.Node,scrolldoctView:cc.Node,prefab_page:cc.Node,prefab_item:cc.Node,prefab_doct:cc.Node,asset_lock:cc.SpriteFrame,asset_gift:cc.SpriteFrame,asset_curr:cc.SpriteFrame,asset_unlock:cc.SpriteFrame,asset_docts:[cc.SpriteFrame]},onLoad:function(){var t=AF.GameData.getMyPlayerData();null==t.pointId&&(t.pointId=0,t.gold=0,AF.GameData.savePlayerData(t)),this.pointId=t.pointId,this.totalPage=9,console.log("AF.util.getUserInfo() = ",AF.util.getUserInfo()),this.initPages()},onEnable:function(){AF.EventDispatcher.emit(AF.Event.SCENE_LOADED)},initPages:function(){var t=void 0,e=void 0;this.currentPage=Math.ceil((this.pointId+1)/50)-1,this.currentPage=this.currentPage>this.totalPage?this.totalPage:this.currentPage,this.node_pages=[];for(var i=0;i<3;i++){(t=cc.instantiate(this.prefab_page)).parent=this.content;for(var n=0;n<50;n++)(e=cc.instantiate(this.prefab_item)).parent=t,e.active=!0;this.updatePage(t,this.currentPage-1+i),this.node_pages.push(t)}this.content.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this,!0),this.content.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this,!0),this.content.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this,!0),this.initDoct(),this.content.x=500*-this.currentPage},updatePage:function(t,e){var i=this,n=Math.ceil((this.pointId+1)/50)-1;e<0||e>this.currentPage+1||e>this.totalPage||e>n+1?t.active=!1:(t.children.forEach(function(t,n){var o=50*e+n+1,s=t.getComponent(cc.Sprite);t.children[0].getComponent(cc.Label).string=o.toString(),o<=i.pointId?s.spriteFrame!==i.asset_unlock&&(s.spriteFrame=i.asset_unlock):o===i.pointId+1?s.spriteFrame!==i.asset_curr&&(s.spriteFrame=i.asset_curr):o>i.pointId+1&&(o%25==0?s.spriteFrame!==i.asset_gift&&(t.children[0].getComponent(cc.Label).string="",s.spriteFrame=i.asset_gift):s.spriteFrame!==i.asset_lock&&(s.spriteFrame=i.asset_lock)),t.name=o.toString()}),t.x=500*e,t.active=!0)},startCB:function(t){this.refreshingFlag||(this.scorllFlag=!0)},onTouchMove:function(t){if(!this.moving){if(!this.touchMoved){var e=t.touch.getLocation(),i=t.touch.getStartLocation();t.touch;(Math.abs(i.x-e.x)>5||Math.abs(i.y-e.y)>5)&&(this.touchMoved=!0,t.stopPropagation())}var n=t.touch.getDelta().x+this.content.x;n=(n=n>0?0:n)<475-this.content.width?475-this.content.width:n,this.content.x=n}},onTouchEnd:function(t){var e=this;if(!this.moving){this.touchMoved&&t.stopPropagation();var i=void 0,n=-this.content.x-500*this.currentPage;if(n<-50){if(this.currentPage<=0)return;this.currentPage-=1,i=this.node_pages.pop(),this.node_pages.unshift(i),this.moving=!0,this.content.runAction(cc.sequence(cc.moveTo(.3,cc.v2(500*-this.currentPage,0)),cc.delayTime(.1),cc.callFunc(function(){e.moving=!1,e.touchMoved=!1,e.updatePage(i,e.currentPage-1)},this.node)))}else if(n>50){var o=Math.ceil((this.pointId+1)/50)-1;if(this.currentPage>=this.totalPage||this.currentPage>=o+1)return;this.currentPage+=1,i=this.node_pages.shift(),this.node_pages.push(i),this.moving=!0,this.content.runAction(cc.sequence(cc.moveTo(.3,cc.v2(500*-this.currentPage,0)),cc.delayTime(.1),cc.callFunc(function(){e.moving=!1,e.touchMoved=!1,e.updatePage(i,e.currentPage+1)},this.node)))}else{if(0==n)return void(this.touchMoved=!1);this.touchMoved=!1,this.content.runAction(cc.moveTo(.1,cc.v2(500*-this.currentPage,0)))}this.initDoct()}},initDoct:function(){for(var t=Math.min(Math.ceil((this.pointId+1)/50),this.totalPage),e=0;e<=t;e++){var i=null;this.scrolldoctView.children[e]?i=this.scrolldoctView.children[e]:((i=cc.instantiate(this.prefab_doct)).parent=this.scrolldoctView,i.active=!0),e!==this.currentPage?i.getComponent(cc.Sprite).spriteFrame=this.asset_docts[0]:i.getComponent(cc.Sprite).spriteFrame=this.asset_docts[1]}},onBackButtonClick:function(t,e){AF.gotoScene("HallMainScene")},onItemClick:function(t){var e=parseInt(t.target.name);e<=this.pointId+1&&AF.openDialog("HallGameDialog",{pointId:e})}}),cc._RF.pop()},{}],HallRankScene:[function(t,e,i){"use strict";cc._RF.push(e,"2f839y8XRFLVrRAhDwMOmDA","HallRankScene");cc.Class({extends:cc.Component,properties:{bg:cc.Node,scrollView:cc.ScrollView,RankItemPre:cc.Prefab,scrView:cc.Node,display:cc.Node},onLoad:function(){var t=this;AF.platform.isWxApp()?t.scrollView.node.active=!1:AF.platform.isQQApp()?(AF.util.getRankList(function(e){e&&e.length>0&&t.setPlayerData(e)}),t.scrollView.node.active=!0,AF.EventDispatcher.emit(AF.Event.SCENE_LOADED),t.scrollView.node.on("scrolling",this.onTouchMove,this,!0)):AF.util.getRankList(function(e){e&&e.length>0&&t.setPlayerData(e)})},onEnable:function(){AF.EventDispatcher.emit(AF.Event.SCENE_LOADED)},start:function(){if(AF.platform.isWxApp()){if(AF.util.isAllScreen()){var t=this.display.getComponent(cc.Widget);console.log("disWid = ",t),t.top=190,t.updateAlignment()}AF.util.postMessage(2,{isAllScreen:AF.util.isAllScreen(),height:cc.winSize.height})}},onTouchMove:function(t){var e=this.scrollView.getComponent(cc.ScrollView).getScrollOffset().y;this.selfItem.active=!(e>=this.startY-this.scrView.height&&e<=this.startY+108)},setPlayerData:function(t){var e=t,i=108*e.length+14*(e.length-1);i<this.scrollView.node.height&&(i=this.scrollView.node.height);for(var n=null,o=void 0,s=0;s<e.length;s++){var r=cc.instantiate(this.RankItemPre);this.scrollView.content.addChild(r),r.getComponent("RankItemPrefab").setPlayerInfo(s+1,e[s].url,e[s].nick,e[s].score,!1),r.x=this.scrollView.content.width/2,e[s].selfFlag&&(this.startY=122*s,n=e[s],o=s+1)}n&&(this.selfItem=cc.instantiate(this.RankItemPre),this.bg.addChild(this.selfItem),this.selfItem.getComponent("RankItemPrefab").setPlayerInfo(o,n.url,n.nick,n.score,!0),this.selfItem.x=0,this.selfItem.y=-this.scrollView.node.height/2,this.selfItem.active=this.scrView.height<this.startY)},onBackButtonClick:function(t,e){console.log("\u8fd4\u56de\u4e86\u4e0a\u4e00\u9875"),AF.gotoScene("HallMainScene")}}),cc._RF.pop()},{}],HallRocketDialog:[function(t,e,i){"use strict";cc._RF.push(e,"ca64alku7JHOprJfcnqwKfP","HallRocketDialog");var n=t("AFDialogBase");cc.Class({extends:n,properties:{content:cc.Label},onLoad:function(){n.prototype.onLoad.call(this);var t=this.node.getChildByName("shadow");t.width=cc.winSize.width,t.height=cc.winSize.height,t.setPosition(0,0);var e=this.node.getChildByName("messageBoxBg");e.setPosition(0,cc.winSize.height/2-393-e.height/2),this.node.getChildByName("closeButton").setPosition(e.x+.47*e.width,e.y+.47*e.height),this.node.getChildByName("adButton").setPosition(e.x,e.y-.47*e.height)},onEnable:function(){n.prototype.onEnable.call(this);var t=AF.DIALOG_PARAMS();t||console.warn("HallRocketDialog no params!"),this.content.string=cc.js.formatStr("\u4ece%s\u5206\u5f00\u59cb\uff1f",""+t.score),this.callBack=t.callBack},onAdButtonClick:function(t,e){var i=this;AF.util.isVideoAdLoaded()?AF.util.showVideoAd("power",function(t){t&&(i.callBack&&i.callBack("ROCKET"),i.close())}):AF.ToastMessage.show("\u5e7f\u544a\u6682\u672a\u5f00\u653e\uff01")},onCancelButtonClick:function(t,e){this.callBack&&this.callBack(),this.close()},onCloseButtonClick:function(t,e){this.callBack&&this.callBack("NORMAL"),this.close()}}),cc._RF.pop()},{AFDialogBase:"AFDialogBase"}],HallWaitingDialog:[function(t,e,i){"use strict";cc._RF.push(e,"28ab0nTqb9JrJjhGJIrqU9q","HallWaitingDialog");var n=t("AFDialogBase");cc.Class({extends:n,properties:{bg:cc.Node,effectPre:cc.Prefab},onLoad:function(){n.prototype.onLoad.call(this),AF.EventDispatcher.on(AF.Event.CLOSE_WAIT_DIALOG,this.doCloseAction,this)},onDestroy:function(){n.prototype.onDestroy.call(this),AF.EventDispatcher.off(AF.Event.CLOSE_WAIT_DIALOG,this.doCloseAction,this)},doCloseAction:function(){var t=this;this.bg.runAction(cc.sequence(cc.fadeOut(2),cc.callFunc(function(){t.close()})))}}),cc._RF.pop()},{AFDialogBase:"AFDialogBase"}],Hall:[function(t,e,i){"use strict";cc._RF.push(e,"5fc56KixrBGLJvjUoNO2qsI","Hall");var n=t("af-app-base"),o=(t("af-event-dispatcher"),t("af-event"),cc.js);function s(){}o.setClassName("Hall",s),o.mixin(s.prototype,n),o.mixin(s.prototype,{onInit:function(){cc.log("[HALL] hall init!"),this.setHallDefaultAsset()},setHallDefaultAsset:function(){AF.MessageBox.resetDefaultStyle("HallDefaultMessageBox"),AF.LoadingLayer.resetDefaultStyle("HallLoadingDialog")}});var r=new s;r.init(),e.exports=r,cc._RF.pop()},{"af-app-base":"af-app-base","af-event":"af-event","af-event-dispatcher":"af-event-dispatcher"}],InReviewXChange:[function(t,e,i){"use strict";cc._RF.push(e,"2c1faDgGrFKJKLclxDGy9hv","InReviewXChange"),cc.Class({extends:cc.Component,properties:{inReview:{default:!1,displayName:"\u662f\u5426\u5ba1\u6838\u72b6\u6001",tooltip:"app\u5ba1\u6838\u72b6\u6001\u548c\u6b64\u503c\u4e00\u81f4\u65f6\uff0c\u663e\u793a\u8be5\u7ec4\u4ef6\u754c\u9762"}},editor:{menu:"common/InReviewXChange"},onLoad:function(){this.node.active=this.inReview==AF.IN_REVIEW}}),cc._RF.pop()},{}],LinkItem:[function(t,e,i){"use strict";cc._RF.push(e,"b5402nJWKtIAJRHQt4E6w5e","LinkItem"),e.exports=cc.Class({extends:cc.Component,properties:{spSelect:cc.Node,spTip:cc.Node,straight:cc.Sprite,corner:cc.Sprite,end:cc.Sprite},updateSelectLink:function(t,e){if(e){var i=0;switch(t){case"left":i=0;break;case"top":i=90;break;case"right":i=180;break;case"bottom":i=-90;break;default:return}this.spSelect.active=!0,this.spSelect.rotation=i}else this.spSelect.active=!1},updateTipLink:function(t,e){if(/top|bottom/.test(t)&&/top|bottom/.test(e)||/left|right/.test(t)&&/left|right/.test(e)){this.spTip.active=!0,this.straight.node.active=!0,this.corner.node.active=!1,this.end.node.active=!1;var i=0;switch(t){case"left":i=0;break;case"top":i=90;break;case"right":i=180;break;case"bottom":i=-90}this.spTip.rotation=i}else if(t&&e){var n=0,o=1;this.spTip.active=!0,this.straight.node.active=!1,this.corner.node.active=!0,this.end.node.active=!1,"left"===t?"top"===e&&(o=-1):"top"===t?(n=90,"right"===e&&(o=-1)):"right"===t?(n=180,"bottom"===e&&(o=-1)):"bottom"===t&&(n=-90,"left"===e&&(o=-1)),this.spTip.scaleY=o,this.spTip.rotation=n}else if(!e){this.spTip.active=!0,this.straight.node.active=!1,this.corner.node.active=!1,this.end.node.active=!0;var s=0;switch(t){case"left":s=0;break;case"top":s=90;break;case"right":s=180;break;case"bottom":s=-90}this.spTip.rotation=s}}}),cc._RF.pop()},{}],LoadingLayer:[function(t,e,i){"use strict";cc._RF.push(e,"424485RggBNTKaBG7cybumw","LoadingLayer"),cc.Class({extends:cc.Component,properties:{panel:cc.Node,actionTag:{default:1298,visible:!1},tips:{default:null,type:cc.RichText},defaultHideTime:{default:10}},onLoad:function(){this.node.zIndex=AF.Const.LOADING_LAYER_Z_ORDER,this.panel.width=cc.winSize.width,this.panel.height=cc.winSize.height,AF.EventDispatcher.on(AF.Event.SHOW_LOADING_LAYER,this.show,this),AF.EventDispatcher.on(AF.Event.HIDE_LOADING_LAYER,this.hide,this)},onDestroy:function(){AF.EventDispatcher.off(AF.Event.SHOW_LOADING_LAYER,this.show,this),AF.EventDispatcher.off(AF.Event.HIDE_LOADING_LAYER,this.hide,this)},setTips:function(t){t&&this.tips&&(this.tips.string=t)},show:function(t){this.node.opacity=0,this.node.active=!0,this.node.zIndex=AF.Const.LOADING_LAYER_Z_ORDER;var e=1;t&&(e=t.hideTime||this.defaultHideTime,this.setTips(t.tips)),e=Math.max(1,e-.5);var i=this,n=this.node;n.stopActionByTag(this.actionTag);var o=cc.sequence(cc.delayTime(.2),cc.fadeIn(.3),cc.delayTime(e),cc.callFunc(function(){i.hide()}));o.setTag(i.actionTag),n.runAction(o)},hide:function(){this.node.stopActionByTag(this.actionTag),this.node.active=!1,this.node.opacity=0}}),cc._RF.pop()},{}],LoginProgressDialog:[function(t,e,i){"use strict";cc._RF.push(e,"8e67fAQmx1DSpMgJiBXP270","LoginProgressDialog");var n=t("AFDialogBase");cc.Class({extends:n,properties:{downloadProgress:{default:null,type:cc.ProgressBar,displayName:"downloadProgress\u4e0b\u8f7d\u8fdb\u5ea6\u6761"}},onLoad:function(){n.prototype.onLoad.call(this),this.node.getChildByName("leftAnchor").y=0-cc.winSize.height/2,this.regEvent(AF.Event.FILE_DOWNLOAD,this.onFileDownloaded),this.regEvent(AF.Event.SHOW_LOGIN_PROGRESS_DIALOG,this.onShowLoginProgressDialog),this.regEvent(AF.Event.QUERY_OBJECT,this.onQueryObject)},onEnable:function(){n.prototype.onEnable.call(this),this.downloadProgress.progress=0,this.percent=0,this.maxPercent=20,this.step=1,this.countUpdate=0,this.downloadState=!1,this.workState=0,this.currentState=1,this.currentIndex=-1,this.fileList=AF.DIALOG_PARAMS()},onQueryObject:function(t){"LoginProgressDialog"==t&&AF.GameData.setMyObject("LoginProgressDialog",!0)},onFileDownloaded:function(t,e,i){2===this.step&&(this.currentIndex<0||this.currentIndex>=this.fileList.length||t===this.fileList[this.currentIndex]&&(i?(console.log("file is downloaded succ ",t),this.currentState=3):(console.log("file is downloaded fail ",t),this.currentState=4)))},downloadFile:function(){AF.Downloader.startDownloadFile(this.fileList[this.currentIndex],!1)},onShowLoginProgressDialog:function(t,e,i){this.step=t,this.maxPercent=e,1==this.step?(this.downloadProgress.node.active=!0,this.percent=0):2==this.step&&(this.downloadState=!1,this.workState=0,this.currentState=1,this.currentIndex=-1,this.fileList=i)},updateStep:function(){if(4!=this.step){this.countUpdate+=1,this.countUpdate>4&&(this.countUpdate=0);var t=0;if(this.percent<this.maxPercent&&(t=this.maxPercent-this.percent),t>0)if(t<5){if(0!=this.countUpdate)return}else if(1==this.countUpdate||3==this.countUpdate)return;this.percent<this.maxPercent&&(this.percent+=2,this.downloadProgress.progress=this.percent/100),this.percent>=100&&(this.step=4,AF.GameData.setMyObject("LoginProgressDialogFinish",!0),this.downloadProgress.node.active=!1)}},updateStep2:function(){return 3===this.workState?(this.downloadState=!0,void(this.workState=1)):2===this.workState?(this.downloadState=!1,void(this.workState=1)):1===this.workState?(this.workState=-1,void AF.EventDispatcher.emit(AF.Event.DOWNLOADDIAGLOG_ON_CLOSE,this.downloadState)):void(0===this.workState&&(1===this.currentState?this.currentIndex+1>this.fileList.length-1?this.workState=3:(this.currentIndex++,this.currentState=2,this.downloadFile()):2===this.currentState||(3===this.currentState?this.currentState=1:4===this.currentState&&(this.workState=2))))},onMoreGamesClick:function(){},update:function(t){this.updateStep(),2==this.step&&this.updateStep2()}}),cc._RF.pop()},{AFDialogBase:"AFDialogBase"}],LogoAnimation:[function(t,e,i){"use strict";cc._RF.push(e,"24f1afQcQpIU79ln66UBfMN","LogoAnimation"),cc.Class({extends:cc.Component,properties:{cloudUp:cc.Node,cloudDown:cc.Node,logoNode:cc.Node,goldNode:cc.Node,playerNode:cc.Node,playerFrames:{default:[],type:cc.SpriteFrame}},onLoad:function(){},onEnable:function(){this.goldAction(),this.addMoveEffect(this.cloudDown),this.addMoveEffect(this.cloudUp),this.playKjrwAnimation()},playKjrwAnimation:function(){for(var t=this,e=[],i=function(i){e.push(cc.callFunc(function(){t.playerNode.getComponent(cc.Sprite).spriteFrame=t.playerFrames[i]})),e.push(cc.delayTime(1/60*7+1*i/60*7))},n=0;n<this.playerFrames.length;n++)i(n);this.playerNode.runAction(cc.repeatForever(cc.sequence(e)))},goldAction:function(){var t=[];t.push(cc.moveBy(.5,0,16)),t.push(cc.moveBy(1,0,-32)),t.push(cc.moveBy(.5,0,16)),this.goldNode.runAction(cc.repeatForever(cc.sequence(t)))},addCloudEffect:function(t){for(var e=[],i=1;i<=4;i++){var n=10*i+20*cc.random0To1(),o=1*i+1*cc.random0To1(),s=1*i+1*cc.random0To1();e.push({dx:n,dt:o}),e.push({dx:0-n,dt:s})}for(var r=[];e.length;){var a=Math.floor(Math.random()*e.length),c=e.splice(a,1);r.push(cc.moveBy(c[0].dt,c[0].dx,0))}var h=cc.repeatForever(cc.sequence(r));t.runAction(h)},addMoveEffect:function(t){if(null!==t){var e={speed_min:10,speed_max:30,currSpeed:0,init_x:0,diff_x:0};e.target=t,e.init_x=t.getPositionX(),e.target.MoveActionName=function(i){t.x+=e.currSpeed*i;var n=t.getPositionX()-e.init_x,o=Math.ceil(1e3*Math.random())%2?-1:1;if(e.currSpeed<=0&&n<=e.diff_x||e.currSpeed>=0&&n>=e.diff_x)return e.diff_x=o*cc.winSize.width*.5*Math.random(),void(e.currSpeed=o*(e.speed_min+Math.random()*(e.speed_max-e.speed_min)));var s=t.convertToWorldSpaceAR(cc.v2(0,0));return s.x+t.width/2*t.scale>=640?(o=-1,e.diff_x=o*cc.winSize.width*.5*Math.random(),void(e.currSpeed=o*(e.speed_min+Math.random()*(e.speed_max-e.speed_min)))):s.x-t.width/2*t.scale<=0?(o=1,e.diff_x=o*cc.winSize.width*.5*Math.random(),void(e.currSpeed=o*(e.speed_min+Math.random()*(e.speed_max-e.speed_min)))):void 0},this.schedule(e.target.MoveActionName,0)}}}),cc._RF.pop()},{}],PhotoPrefab:[function(t,e,i){"use strict";cc._RF.push(e,"aac95RGVLNLaYP/xE7cqGS+","PhotoPrefab"),cc.Class({extends:cc.Component,properties:{photo:{default:null,type:cc.Node,displayName:"\u5934\u50cf"}},onLoad:function(){},setPhoto:function(t){this.photo.active=!0,this.loadPhoto(this.photo,t)},clearPhoto:function(){(this.photo.getChildByName("photo")||this.photo.getChildByName("mask").getChildByName("photo")).getComponent(cc.Sprite).spriteFrame=null},loadPhoto:function(t,e){if(e){var i=(t.getChildByName("photo")||t.getChildByName("mask").getChildByName("photo")).getComponent(cc.Sprite);cc.loader.load({url:e,type:"jpg"},function(t,e){t?console.log("err: PhotoPrefab.js loadPhoto ",t):i&&void 0!==i.spriteFrame?i.spriteFrame=new cc.SpriteFrame(e):cc.error("\u5934\u50cf\u52a0\u8f7d\u5931\u8d25",t)})}}}),cc._RF.pop()},{}],PlayerPrefab:[function(t,e,i){"use strict";cc._RF.push(e,"c9d6fKp8SpEpbTerw80uroH","PlayerPrefab"),cc.Class({extends:cc.Component,properties:{heroShadow:{default:null,type:cc.Node,displayName:"\u82f1\u96c4\u5f71\u5b50"},userTips:{default:null,type:cc.Node,displayName:"\u5934\u4e0a\u6807\u7b7e"},loadEffectNode:{default:null,type:cc.Node,displayName:"\u52a0\u8f7d\u8282\u70b9"},playerNode:{default:null,type:cc.Node,displayName:"\u82f1\u96c4\u52a8\u753b\u8282\u70b9"},effectNode:{default:null,type:cc.Node,displayName:"\u7279\u6548\u6302\u8f7d\u70b9"},effectBgNode:{default:null,type:cc.Node,displayName:"\u7279\u6548\u6302\u8f7d\u70b9(\u80cc\u9762)"},hudunNode:{default:null,type:cc.Node,displayName:"hudun\u6302\u8f7d\u70b9"},faintNode:{default:null,type:cc.Node,displayName:"faint\u6302\u8f7d\u70b9"},nickNameNode:{default:null,type:cc.Node,displayName:"\u6635\u79f0"},effectPrefab:{default:null,type:cc.Prefab,displayName:"\u7279\u6548\u9884\u5236\u4ef6"},defaultDuration:{default:.8,displayName:"\u6301\u7eed\u65f6\u95f4",range:[.5,1.5]},loadEffect:{default:!1,displayName:"\u542f\u7528/\u5173\u95ed\u52a0\u8f7d\u6548\u679c",tooltip:"\u542f\u7528/\u5173\u95ed \u52a0\u8f7d\u6548\u679c"},rolename:cc.Label,floatNode:cc.Node,expProgressPre:cc.Prefab},onLoad:function(){this.listen=!1,this.listenFilename="",this._isMoving=!1,this.durationTime=0,this.zOrderDelegate=null,this.runAudioDuration=0,this.runAudioInterval=.8+3*Math.random()/10,this.tPos=cc.v2(0,0),this._isLoaded=!1,this.flipX=!1,this.playerScale=1,this.defaultAction={actionType:"wait",repeatCount:1/0,frameIndex:0,as:100},this.currentActionIndex=0,this.currentActionLoop=1,this.actionList=[],this.actionLoop=!1,this.floatLabel=[],this.labelInitX=0,this.labelXArr=[10,20],this.actions={},this.sprPlayer=this.playerNode.getComponent(cc.Sprite),this.aniAction=this.playerNode.getComponent(cc.Animation),this.anistate,this.dead=!1,this.aniAction.on("finished",this.onFinished,this),this._loadFontRes(),this.schedule(this._updatePos,0,this),this.schedule(this._updateFloatLabel,0,this),this.schedule(this._updateLarge,.03,this),this.loadEffectNode.active=this.loadEffect,this.last_float_ms=0,this.currentLarge=0,this.nextLarge=-1,this.hudunEffect=null,this.faintEffect=null,AF.EventDispatcher.on(AF.Event.FILE_LOADFRAME,this.onLoadFrameEnded,this)},_loadFontRes:function(){var t=this;cc.loader.loadRes("hall/font/FontRoomSmall",cc.BitmapFont,function(e,i){t.fontRoomSmall=i}),cc.loader.loadRes("hall/font/FontWin",cc.BitmapFont,function(e,i){t.fontWin=i})},doMove:function(t,e){this.durationTime+=t,this.tPos=e,this.anistate&&"run"===this.anistate.name||this.isMoving()||this.playAction("run",!0),this._isMoving=!0},createEffect:function(t){var e=AF.util.createPrefabNode(this.effectPrefab),i=null;return t?(this.effectBgNode.addChild(e),i=e.getComponent("EffectPrefab"),this.effectMgr[0].push(i)):(this.effectNode.addChild(e),i=e.getComponent("EffectPrefab"),this.effectMgr[1].push(i)),i},setFlipX:function(t){var e=this.playerScale;e*=this.getLargeScale(),this.playerNode.scaleX=t?-1*e:e,this.playerNode.scaleY=e,this.flipX=t},getFlipX:function(){return this.flipX},getPlayerScale:function(){return this.playerScale},getBodyPosition:function(t){var e=0,i=0,n=AF.GameConfig.getPlayerInfo(this.playerId);n&&(1==t?(e=n.chest.x,i=n.chest.y):2==t&&(e=n.head.x,i=n.head.y));var o=this.playerScale;return{x:e*=o*=this.getLargeScale(),y:i*=o}},setPlayerID:function(t){this.clearUI();var e=AF.GameConfig.getPlayerInfo(t);if(e){for(var i in this.playerScale=e.scale,this.playerNode.scale=this.playerScale,this.playerId=t,this.listenFilename=e.model,e.actions)e.actions.hasOwnProperty(i)&&(this.actions[i]=AF.util.deepCopy(e.actions[i],{}));this.head=e.head||{x:0,y:0},this.body=e.chest||{x:0,y:0},this.userTips.setPosition(this.head.x,this.head.y+15),this.setUserTips(!1),this.setHeroShadow(!0),this.nickNameNode.active=!1,this.defaultPoise={showAction:e.showAction,show:e.show},AF.Frameloader.startLoadFile(this.listenFilename,2)}},getPlayerSprite:function(){return this.sprPlayer},setNickName:function(t,e,i,n){if(""!==t){this.nickNameNode.active=!0;e=e||10,i=i||40,n=n||new cc.Color(0,0,0);this.nickNameNode.setPosition(cc.v2(this.head.x,e)),this.nickNameNode.color=n;var o=this.nickNameNode.getComponent(cc.Label);o.fontSize=i,o.lineHeight=i,o.string=AF.util.cutstr(t,8)}else this.nickNameNode.active=!1},disableNickName:function(){this.nickNameNode.active=!1},setRoleName:function(t){this.rolename.string=AF.util.cutstr(t,8)},setPlayerAnchor:function(t,e){this.playerNode.anchorX=t,this.playerNode.anchorY=e},setLoadEffect:function(t){this.loadEffect=t,this._isLoaded||(this.loadEffectNode.active=this.loadEffect)},stopAction:function(){this.aniAction&&this.aniAction.stop()},playDefaultPoise:function(){this.playAction(this.defaultPoise.showAction,!0,this.defaultPoise.show)},playSingleFrame:function(t,e){this.playAction(t,!0,e)},playAction:function(t,e,i){i=i||0,e=e||!1;var n={};n.actionType=t,n.frameIndex=i,n.repeatCount=1,e&&(n.repeatCount=1/0);var o=[];o.push(n),this.playActions(o,!1)},playActions:function(t,e){this.isMoving()&&(this.node.x=this.tPos.x,this.node.y=this.tPos.y,this._isMoving=!1),this.actionList=[];for(var i=0;i<t.length;i++){var n={};n.actionType=t[i].actionType,n.frameIndex=t[i].frameIndex||0,n.repeatCount=t[i].repeatCount||1,n.as=t[i].as||100,this.actionList.push(n)}this.actionLoop=e,this.currentActionIndex=0,this.currentActionLoop=1,this._playAni()},isLoaded:function(){return this._isLoaded},isMoving:function(){return this._isMoving},showFloatLabel:function(t,e,i){e=e||0,this.floatLabel.push({content:t,type:e,cs:i})},clearUI:function(){this.clearListen(),this.loadEffectNode.active=this.loadEffect,this._isMoving=!1,this.durationTime=0,this.runAudioDuration=0,this.tPos=cc.v2(0,0),this._isLoaded=!1,this.flipX=!1,this.floatLabel=[],this.labelInitX=0,this.labelXArr=[10,20],this.actions=[],this.setFlipX(!1);for(var t=this.aniAction.getClips(),e=0;e<t.length;e++)this.aniAction.removeClip(t[e],!0)},onDestroy:function(){this.clearListen(),this.aniAction.off("finished",this.onFinished,this),AF.EventDispatcher.off(AF.Event.FILE_LOADFRAME,this.onLoadFrameEnded,this)},createClip:function(){for(var t=this.aniAction.getClips(),e=0;e<t.length;e++)this.aniAction.removeClip(t[e],!0);var i=this.actionList[this.currentActionIndex],n=i.actionType,o=this.actions[n];o||(cc.error(this.playerId+"\u7684"+n+"\u4e0d\u5b58\u5728"),n="wait",o=this.actions[n]),this.setPlayerAnchor(o.x,o.y);var s=[];(!o.frames||o.frames.length<=0)&&(cc.error("palyerId:"+this.playerId+"\u7684"+n+"\u52a8\u4f5c\u7f3a\u5931!,\u64ad\u653ewait\u52a8\u4f5c\u66ff\u4ee3!"),n="wait",o=this.actions[n]),0<i.frameIndex&&i.frameIndex<=o.frames.length?s[0]=o.frames[i.frameIndex-1]:s=o.frames,-1==i.frameIndex&&o.frames.length>0&&(s=[]).push(o.frames[o.frames.length-1]),s.length<=0&&(s=this.actions.wait.frames),this.sprPlayer.spriteFrame=s[0];var r=cc.AnimationClip.createWithSpriteFrames(s,o.rate);return r.name=n,1/0===i.repeatCount?r.wrapMode=cc.WrapMode.Loop:r.wrapMode=cc.WrapMode.Normal,r.sample=10,r.speed=i.as/100,this.aniAction.addClip(r,n),this.aniAction.play(n)},onLoadFrameEnded:function(t,e,i){if(this.listenFilename===t)if(this.clearListen(),i){for(var n=1;n<=AF.Const.ActionName.length-1;n++){var o=AF.Const.ActionName[n];this.actions[o].frames=[],this.actions[o].frames=e[n]}this.loadEffectNode.active=!1,this._isLoaded=!0,this.actionList.length<=0&&(this.actionList.push(this.defaultAction),this.currentActionIndex=0,this.currentActionLoop=1),this._playAni()}else cc.error("onLoadFrameEnded fail")},onPlayNextAction:function(){var t=this.actionList[this.currentActionIndex];1/0!==t.repeatCount&&(this.currentActionLoop<t.repeatCount?this.currentActionLoop++:(this.currentActionIndex++,this.currentActionLoop=1,this.currentActionIndex>=this.actionList.length&&(this.actionLoop?(this.currentActionIndex=0,this.currentActionLoop=1):(this.actionList=[],this.actionList.push(this.defaultAction),this.currentActionIndex=0,this.currentActionLoop=1))))},onFinished:function(t){this.dead&&"dead"===this.anistate.name?this.playSingleFrame("dead",-1):(this.onPlayNextAction(),this._playAni())},_playAni:function(){this.isLoaded()&&(this.stopAction(),this.anistate=this.createClip())},_updateFloatLabel:function(t){if(!(this.floatLabel.length<=0)){var e=AF.util.getCurrTime();if(!(e<=this.last_float_ms+300)){var i=this.floatLabel[0];this.floatLabel.splice(0,1);var n=new cc.Node;n.scale=.1,n.opacity=0;var o=n.addComponent(cc.Label);o.isSystemFontUsed=!1,o.font=this.fontWin,o.overflow=cc.Label.Overflow.NONE;var s=cc.js.formatStr("%d",i.content);i.content>0&&(s="+"+s),i.content>0?(o.fontSize=36,n.color=cc.color(95,201,34),i.cs&&(o.fontSize*=1.2)):(o.fontSize=36,n.color=cc.color(255,255,0),i.cs&&(o.fontSize*=1.2,n.color=cc.color(255,25,7))),o.lineHeight=o.fontSize+6,o.string=s,this.labelInitX++,this.labelInitX%=this.labelXArr.length;var r=Math.abs(this.playerNode.scaleX)/this.playerNode.scaleX*-1,a=this.labelXArr[this.labelInitX]*r;n.setPosition(cc.v2(this.head.x+a,this.head.y+30)),this.floatNode.addChild(n,100),this.last_float_ms=e;var c=[];if(1==i.type){n.setPosition(cc.v2(this.head.x,this.head.y+30)),n.scale=1,n.opacity=255;var h=cc.spawn(cc.moveBy(1,cc.v2(0,100)),cc.fadeOut(1));c.push(h)}else{h=cc.spawn(cc.bezierTo(.5,[cc.v2(this.head.x+a+5*r,this.head.y+50),cc.v2(this.head.x+a+10*r,this.head.y+100),cc.v2(this.head.x+a+15*r,this.head.y+40)]),cc.scaleTo(.5,.8).easing(cc.easeBackOut()),cc.fadeIn(.3));c.push(h);var l=cc.delayTime(1/60);c.push(l);var f=cc.spawn(cc.callFunc(function(){}),cc.scaleTo(this.defaultDuration,.5).easing(cc.easeBackOut()),cc.fadeOut(this.defaultDuration));c.push(f)}var u=cc.callFunc(function(){n.destroy()});c.push(u);var d=cc.sequence(c);n.runAction(d)}}},setUserTips:function(t){this.userTips.active=t},setHeroShadow:function(t){this.heroShadow.active=t},setZOrderDelegate:function(t){this.zOrderDelegate=t},setZOrder:function(){this.zOrderDelegate&&(this.node.zIndex=this.zOrderDelegate.getPlayerZOrder(this.node.y))},getZOrder:function(){return this.node.zIndex},_updatePos:function(t){if(this.isMoving()){if(this.durationTime<=t)return this._isMoving=!1,this.node.x=this.tPos.x,this.node.y=this.tPos.y,this.durationTime=0,this.actionList=[],this.actionList.push(this.defaultAction),this.currentActionIndex=0,this.currentActionLoop=1,void this._playAni();var e=t/this.durationTime,i=(this.tPos.x-this.node.x)*e,n=(this.tPos.y-this.node.y)*e;this.node.x+=i,this.node.y+=n,this.setZOrder(),i<0?this.setFlipX(!0):i>0&&this.setFlipX(!1),this.durationTime-=t,this.runAudioDuration+=t,this.runAudioDuration>=this.runAudioInterval&&(this.runAudioDuration=0)}},setDead:function(t){this.dead=t,this.dead&&(this.clearFaint(),this.clearHudun())},clearListen:function(){this.listenFilename=null},_updateLarge:function(t){if(-1!=this.nextLarge){this.currentLarge>this.nextLarge?this.currentLarge--:this.currentLarge<this.nextLarge&&this.currentLarge++;this.getBodyPosition(2);this.followPlayerScale(this.hudunEffect),this.followPlayerScale(this.faintEffect),this.setFlipX(this.flipX),this.currentLarge==this.nextLarge&&(this.nextLarge=-1)}},getLargeScale:function(){return 1+.02*this.currentLarge},setLarge:function(t){this.nextLarge=5*t},getLevelupEffectInfo:function(t,e){for(var i=1,n=null;;){var o=t.getChildByName(e+i);if(!o)break;var s=o.getComponent("EffectPrefab");if(!s)break;if(!s.checkWorking()){n=s;break}i++}if(!n){var r=cc.instantiate(this.effectPrefab);r.setAnchorPoint(.5,0),r.y=45,t.addChild(r,1,e+i),n=r.getComponent("EffectPrefab")}return{comp:n,name:e+i}},playLevelupAni:function(){var t=this.getLevelupEffectInfo(this.effectNode,"playerlevelupfg"),e=t.name,i=t.comp;i.setFlipX(this.flipX);var n=this.getLevelupEffectInfo(this.effectBgNode,"playerlevelupbg"),o=n.name,s=n.comp;s.setFlipX(this.flipX),i.doStart("playerlevelupfg",1,1,20,null,0),s.doStart("playerlevelupbg",1,1,20,null,0),i.setNodeName(e),s.setNodeName(o)},setExpProgressY:function(t){var e=this.node.getChildByName("expProgressNode");e&&e.getComponent("ProgressBasePrefab").setExpProgressY(t)},showGain:function(t,e){var i=this.node.getChildByName("expProgressNode");i?(i.stopAllActions(),i.getComponent("ProgressBasePrefab").init(),i.active=!0):(i=cc.instantiate(this.expProgressPre),this.node.addChild(i,1,"expProgressNode"));var n=[];if(n.push(cc.callFunc(function(e,i){e.getComponent("ProgressBasePrefab").showGain(t)})),n.push(cc.delayTime(1)),t.list.length>0){var o=t.list;n.push(cc.callFunc(function(t,e){t.getComponent("ProgressBasePrefab").showExp(o)})),n.push(cc.delayTime(e+2))}n.push(cc.callFunc(function(t,e){t.active=!1})),i.runAction(cc.sequence(n))},showHudun:function(t){if(t){if(!this.hudunEffect){var e=AF.util.createPrefabNode(this.effectPrefab);this.hudunNode.addChild(e);var i=this.getBodyPosition(1);e.getChildByName("effectAni").setAnchorPoint(.5,95.5/265),e.setPosition(2-i.x,0),this.getFlipX()&&e.setPosition(i.x-2,0),e.getComponent("EffectPrefab").doStart("paopaodun",1,1/0,null,null,null),this.hudunEffect=e}this.hudunEffect.active=!0,this.followPlayerScale(this.hudunEffect)}else this.clearHudun()},showFaint:function(t){if(t){if(this.playSingleFrame("wait",1),!this.faintEffect){var e=AF.util.createPrefabNode(this.effectPrefab);this.faintNode.addChild(e);var i=this.getBodyPosition(2);i.x-=8,i.y+=35,this.getFlipX()&&(i.x=0-i.x),e.setPosition(i),e.getComponent("EffectPrefab").doStart("faint",1,1/0,null,null,null),this.faintEffect=e}this.faintEffect.active=!0,this.followPlayerScale(this.faintEffect)}else this.playAction("wait",!0),this.clearFaint()},clearFaint:function(){this.faintEffect&&(this.faintEffect.active=!1)},clearHudun:function(){this.hudunEffect&&(this.hudunEffect.active=!1)},followPlayerScale:function(t){var e=this.playerScale;e*=this.getLargeScale(),t&&(t.scale=e)}}),cc._RF.pop()},{}],ProgressBasePrefab:[function(t,e,i){"use strict";cc._RF.push(e,"3db35eNWbxCUYPkKg1a//q/","ProgressBasePrefab"),cc.Class({extends:cc.Component,properties:{goldNode:{default:null,type:cc.Node,displayName:"\u91d1\u5e01\u8282\u70b9"},goldNum:{default:null,type:cc.Label,displayName:"\u91d1\u5e01\u6570\u76ee"},crystalNode:{default:null,type:cc.Node,displayName:"\u6c34\u6676\u8282\u70b9"},crystalNum:{default:null,type:cc.Label,displayName:"\u6c34\u6676\u6570\u76ee"},expNum:{default:null,type:cc.Label,displayName:"\u7ecf\u9a8c\u503c"},levelUp:{default:null,type:cc.Node,displayName:"\u5347\u7ea7"},expProgress:{default:null,type:cc.ProgressBar,displayName:"\u8fdb\u5ea6\u6761"}},onLoad:function(){this.init()},init:function(){this.index=0,this.step=-1,this.listInfo=[],this.expNode=this.expNum.node,this.levelUp.scale=0,this.expNode.scale=0,this.goldNode.scale=0,this.crystalNode.scale=0,this.levelUp.active=!1,this.expNode.active=!1,this.goldNode.active=!1,this.crystalNode.active=!1,this.expProgress.node.active=!1,this.intervalTime=.05,this.durationTime=0},setExpProgressY:function(t){this.expProgress.node.y=t},showGain:function(t){this.expNum.string="+"+t.expAdd+"\u7ecf\u9a8c";var e=0;t.goldAdd&&(this.goldNum.string="+"+t.goldAdd,e=1,this.goldNode.active=!0),t.crystalAdd&&(this.crystalNum.string="+"+t.crystalAdd,this.crystalNode.y=120+40*e,this.crystalNode.active=!0),this.node.active=!0,this.expProgress.node.active=!1,this.index=0,this.step=1;var i=this;this.expNum.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){i.goldNode.active=!1,i.crystalNode.active=!1})))},showExp:function(t){this.listInfo=t,this.index=0,this.step=1;var e=this;e.expNode.active=!0,e.expNode.scale=0,this.showAction(this.expNode,function(){e.expProgress.node.active=!0,e.durationTime=e.intervalTime})},showAction:function(t,e){t.active=!0,t.scale=0;var i=this,n=cc.sequence(cc.callFunc(function(t){i.step=1}),cc.spawn(cc.scaleTo(.6,1).easing(cc.easeBackOut()),cc.delayTime(.6)),cc.delayTime(.4),cc.callFunc(function(n){i.step=2,t.scale=0,e&&e()}));t.runAction(n)},update:function(t){if(2===this.step&&(this.durationTime+=t,!(this.durationTime<this.intervalTime||(this.durationTime=0,this.index>=this.listInfo.length)))){var e=this.listInfo[this.index];1===e&&(this.node.parent.getComponent("PlayerPrefab").playLevelupAni(),this.showAction(this.levelUp)),this.expProgress.progress=e,this.index++}}}),cc._RF.pop()},{}],RankComPrefab:[function(t,e,i){"use strict";cc._RF.push(e,"978fcCLkehEII0WDlmy6+Dn","RankComPrefab"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],RankItemPrefab:[function(t,e,i){"use strict";cc._RF.push(e,"bec1aY3wNhO46YS8rs/CzGc","RankItemPrefab"),cc.Class({extends:cc.Component,properties:{BgFrames:{default:[],type:cc.SpriteFrame},bg:cc.Sprite,playername:cc.Label,playerscore:cc.Label,rank:cc.Label,head:cc.Node},setPlayerInfo:function(t,e,i,n,o){o?(this.bg.spriteFrame=this.BgFrames[4],this.rank.node.active=!0,this.rank.string=cc.js.formatStr("%d",t),this.playername.string="\u6211",this.playername.node.active=!0):(t>=1&&t<=3?(this.bg.spriteFrame=this.BgFrames[t],this.rank.node.active=!1):(this.bg.spriteFrame=this.BgFrames[0],this.rank.node.active=!0,this.rank.string=cc.js.formatStr("%d",t)),this.playername.string=i),this.playerscore.string=n,this.head.getComponent("PhotoPrefab").setPhoto(e)}}),cc._RF.pop()},{}],SpriteFontPrefab:[function(t,e,i){"use strict";cc._RF.push(e,"1e548pfGlND6blTdnX2dyeL","SpriteFontPrefab");var n=cc.Enum({LEFT:-1,CENTER:-1,RIGHT:-1}),o=(cc.Enum({TOP:-1,CENTER:-1,BOTTOM:-1}),{default:"hall/font/spriteNum"});cc.Class({extends:cc.Component,properties:{spriteFonts:cc.SpriteAtlas},onLoad:function(){this.spriteFrameArray=[]},createNewLabel:function(t,e,i,s){var r=this,a=o[e]||o.default;if(this.hAlignment=i||n.CENTER,this.vAlignment=s||this.hAlignment,this.spriteAtlasPath!==a)this.spriteAtlasPath=a,this.contentText=t,this.node.destroyAllChildren(),this.contentText.length<0||this.loadAtlas(this.spriteAtlasPath).then(function(t){r.spriteFrameArray=t,r.initUI()});else{if(this.contentText===t)return;if(this.contentText=t,this.node.destroyAllChildren(),this.contentText.length<0)return;this.initUI()}},loadAtlas:function(t){return new Promise(function(e,i){cc.loader.loadRes(t,cc.SpriteAtlas,function(n,o){if(n)i("Could not load image at "+t);else{for(var s=o.getSpriteFrames(),r=[],a=0;a<s.length;a++){var c=s[a];r[c.name]=c}e(r)}})})},initUI:function(){var t=0,e=0,i=new cc.Node("contentNode");i.setAnchorPoint(0,.5),this.node.addChild(i);for(var n=0;n<this.contentText.length;n++){var o=this.contentText.charAt(n);"/"==o&&(o="chu");var s=new cc.Node("Sprite"+n),r=s.addComponent(cc.Sprite);r.trim=!1,r.sizeMode=2,i.addChild(s),r.spriteFrame=this.spriteFrameArray[o],s.x=t+s.width/2,t=s.x+s.width/2,e=s.height}i.width=t,i.height=e,i.setPosition(t*(i.anchorX-this.node.anchorX),e*(.5-i.anchorY)),this.node.width=t,this.node.height=e}}),cc._RF.pop()},{}],StonePrefab:[function(t,e,i){"use strict";cc._RF.push(e,"c727eshJ4dHP4XLVhU1PTKk","StonePrefab");var n={width:200,baseDt:.9,minSpeed:160,maxSpeed:300},o={width:156,baseDt:.7,minSpeed:160,maxSpeed:320},s={width:100,baseDt:.75,minSpeed:200,maxSpeed:400};cc.Class({extends:cc.Component,properties:{sotneSpriteframes:{default:[],type:cc.SpriteFrame},tipsSpriteframes:{default:[],type:cc.SpriteFrame},scoreNode:cc.Node,light:cc.Node,stoneNode:cc.Node,effectPre:cc.Prefab},onLoad:function(){this.node.width=60,this.node.height=40,this.node.setAnchorPoint(.5,0),this.light.opacity=0;var t=cc.instantiate(this.effectPre);this.node.addChild(t),this.effectScript=t.getComponent("EffectPrefab")},init:function(){this.scoreNode.opacity=0},setStoneType:function(t,e){switch(this.stoneType=t,t){case"stone":this.stoneNode.active=!0,this.effectScript.node.active=!1,this.setNewColor();break;case"fireball":this.stoneNode.active=!1,this.effectScript.node.active=!0}},setStoneRect:function(t,e){this.node.width=t||60,this.node.height=e||40,this.light.width=this.node.width,this.light.height=this.node.height,this.setCenterPosition(this.stoneNode),this.setCenterPosition(this.effectScript.node)},getStoneRect:function(){return this.node.getBoundingBox()},setCenterPosition:function(t){var e=t.getAnchorPoint(),i=this.node.getAnchorPoint(),n=(e.x-i.x)*this.node.width,o=(e.y-i.y)*this.node.height;t.setPosition(n,o)},setNewColor:function(t){var e=null;t===n.width?e=this.sotneSpriteframes[0]:t===o.width?e=this.sotneSpriteframes[1]:t===s.width&&(e=this.sotneSpriteframes[2]),this.stoneNode.getComponent(cc.Sprite).spriteFrame=e},showScore:function(t,e){this.scoreNode.getChildByName("addIcon");var i=this.scoreNode.getChildByName("scoreNum");i.getComponent(cc.Label).string="+"+t;var n=this.scoreNode.getChildByName("tips");i.x=10,i.y=36,n.active=!1;var o=this.node.getComponentInChildren(cc.ParticleSystem);switch(e){case"normal":case"danger":break;case"perfect":case"goodJob":o.resetSystem()}var s=.5*this.node.width+5;this.scoreNode.setPosition(s,0),this.scoreNode.opacity=255},showScoreFadeAction:function(){this.node.getComponentInChildren(cc.ParticleSystem).stopSystem(),this.scoreNode.runAction(cc.sequence(cc.spawn(cc.moveBy(.4,cc.v2(60,0)).easing(cc.easeBackOut()),cc.fadeTo(.4,150)),cc.fadeOut(1/60)))},showLight:function(){this.light.stopAllActions(),this.light.width=this.node.width,this.light.height=this.node.height,this.light.setScale(.85),this.light.opacity=0,this.light.runAction(cc.sequence(cc.fadeTo(.08,242.25),cc.scaleTo(.1,1.1),cc.spawn(cc.fadeTo(.36,0),cc.scaleTo(.36,1.5))))}}),cc._RF.pop()},{}],UserInfoPrefab:[function(t,e,i){"use strict";cc._RF.push(e,"af44bTyJ41NN7cYtIxw37yJ","UserInfoPrefab"),cc.Class({extends:cc.Component,properties:{goldNumLabel:{default:null,type:cc.Label,displayName:"\u91d1\u5e01Label"}},onLoad:function(){this.schedule(this.onUserInfoUpdate,1,this),AF.EventDispatcher.on(AF.Event.USER_INFO_UPDATE,this.onUserInfoUpdate,this)},onDestroy:function(){AF.EventDispatcher.off(AF.Event.USER_INFO_UPDATE,this.onUserInfoUpdate,this)},onEnable:function(){AF.platform.isHairScreen()?this.node.y=cc.winSize.height-72:this.node.y=cc.winSize.height-16,this.onUserInfoUpdate()},onUserInfoUpdate:function(){(function(t){for(var e=!0;t&&t&&t.parent&&(e=t.active);)t=t.parent;return e})(this.node)&&(this.goldNumLabel.string=AF.util.formatNumber(0))},onGoldAddButtonClick:function(t,e){}}),cc._RF.pop()},{}],"af-app-base":[function(t,e,i){"use strict";cc._RF.push(e,"1ca48VS1n1MLZcJmtvsqvra","af-app-base");var n=t("af-event-dispatcher"),o=t("af-event"),s=(t("af-const"),cc.js,{init:function(){n.once(o.GAME_LOADED,this.onInit,this)},onInit:function(){}});e.exports=s,cc._RF.pop()},{"af-const":"af-const","af-event":"af-event","af-event-dispatcher":"af-event-dispatcher"}],"af-app-launcher":[function(t,e,i){"use strict";var n,o,s;if(cc._RF.push(e,"9feefLXMblJC5Gp++bIjRAA","af-app-launcher"),!cc.sys.isNative){n=navigator.userAgent;var r=window;s=n.match(/Chrome\/([\d.]+)/)||n.match(/CriOS\/([\d.]+)/),o=n.match(/(Android);?[\s\/]+([\d.]+)?/)}var a,c={};function h(t){var e=o?t.AndroidSchemeURL:t.iOSSchemeURL;s?(function(){if(!a){var t=document.createElement("iframe");t.style.cssText="display:none;width:0px;height:0px;",document.body.appendChild(t),a=t}return a}()).src=e:r.location.href=o?function(t){return"intent://t.qq.com/#Intent;scheme="+(o?t.AndroidSchemeURL:t.iOSSchemeURL)+";package="+t.AndroidPackageName+";end"}(t):e}c.Const={LAUNCHE_TIMEOUT:500},c.open=function(t){var e=Date.now();h(t),setTimeout(function(){Date.now()-e<c.Const.LAUNCHE_TIMEOUT+100&&function(t){r.location.href=o?t.AndroidDownloadURL:t.iOSDownloadURL}(t)},this.timeout)},e.exports=(window.AF=window.AF||{}).AppLauncher=c,cc._RF.pop()},{}],"af-asset-loader":[function(t,e,i){"use strict";cc._RF.push(e,"047a7wBi7BLeoyNtqkJmbYq","af-asset-loader");var n=t("af-event-dispatcher"),o=t("af-event"),s=(t("af-const"),{init:function(){this._task=[],n.once(o.GAME_LOADED,this._onGameLoaded,this)},_onGameLoaded:function(){this._startLoadDialogAssets("framework"),this._startLoadDialogAssets("hall")},_startLoadDialogAssets:function(t){var e=AF.Config.getDialogList();if(e){for(var i=[],n=e.module[t],o=n.length,s=0;s<o;++s)i.push(e.dialogs[n[s]]);0!=i.length&&cc.loader.loadResArray(i)}else cc.error("load dialog assets failed, not found dialog list.")}});s.init(),e.exports=s,cc._RF.pop()},{"af-const":"af-const","af-event":"af-event","af-event-dispatcher":"af-event-dispatcher"}],"af-audio-controller":[function(t,e,i){"use strict";cc._RF.push(e,"5a164I1AKZItoozXySvTfMm","af-audio-controller");var n=t("af-event-dispatcher"),o=t("af-event"),s=(cc.js,{init:function(){this.sounds={},this.musicPlayer=null,this.bgmAudioID=-1,this.qqSounds={},this.nextBGM="",this.currentBGM="",n.on(o.GMAE_ON_HIDE,this.onGameEnterBackground,this),n.on(o.GAME_ON_SHOW,this.onGameEnterForeground,this),n.on(o.GAME_ON_BGM,this.onGameBGM,this)},playEffect:function(t){AF.platform.isWxApp()?this.wxPlayEffect(t):AF.platform.isQQApp()?this.qqPlayEffect(t):cc.audioEngine.play(AF.util.getSoundUrl(t),!1,1)},wxPlayEffect:function(t){var e=this.sounds[t];e||(e=[],this.sounds[t]=e),e.length>=16&&(e[0].stop(),e[0].destroy(),e.splice(0,1));var i=wx.createInnerAudioContext();i.src=AF.util.getSoundUrl(t),i.play(),e.push(i)},qqPlayEffect:function(t){if(AF.util.isSoundExist(t)){var e=AF.util.getSoundUrl(t),i=this.qqSounds[t];i||(i=[],this.qqSounds[t]=i);for(var n=null,o=0;o<i.length;o++)if(0==i[o].id){n=i[o];break}if(!n){if(i.length>=32)return;var s=BK.createAudioContext({type:"effect",src:e});n={context:s,id:0},i.push(n)}n.id=-1,n.context.play({complete:function(t){n.id=0}})}},play:function(t){this.playEffect(t)},wxPlayMusic:function(){this.musicPlayer&&(this.musicPlayer.stop(),this.musicPlayer.destroy(),this.musicPlayer=null),this.musicPlayer=wx.createInnerAudioContext(),this.musicPlayer.src=AF.util.getMusicUrl(this.nextBGM),this.musicPlayer.loop=!0,this.musicPlayer.volume=1,this.musicPlayer.play(),this.currentBGM=this.nextBGM,this.nextBGM=""},qqPlayMusic:function(){},playBGM:function(t){this.nextBGM=t},stopBGM:function(){AF.platform.isWxApp()?this.musicPlayer&&(this.musicPlayer.stop(),this.musicPlayer.destroy(),this.musicPlayer=null):-1!=this.bgmAudioID&&(cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=-1)},pauseBGM:function(){AF.platform.isWxApp()?this.musicPlayer&&this.musicPlayer.pause():-1!=this.bgmAudioID&&cc.audioEngine.pause(this.bgmAudioID)},resumeBGM:function(){AF.platform.isWxApp()?this.musicPlayer&&this.musicPlayer.play():-1!=this.bgmAudioID&&cc.audioEngine.resume(this.bgmAudioID)},onGameBGM:function(){if(""!=this.nextBGM)if(AF.platform.isWxApp())this.wxPlayMusic();else{if(-1!=this.bgmAudioID){var t=cc.audioEngine.getState(this.bgmAudioID);if(0==t)return;if(1==t)cc.audioEngine.stop(this.bgmAudioID);else{if(2==t)return void cc.audioEngine.resume(this.bgmAudioID);this.bgmAudioID=-1}}if(-1!=this.bgmAudioID)return;var e=AF.util.getMusicUrl(this.nextBGM);this.bgmAudioID=cc.audioEngine.play(e,!0,1),this.currentBGM=this.nextBGM,this.nextBGM=""}},playDefaultBGM:function(){this.playBGM("bgm")},playButtonEffect:function(t){var e=t||"button";this.play(e)},playDialogPopOutEffect:function(){},onGameEnterBackground:function(){AF.audio.pauseBGM()},onGameEnterForeground:function(){AF.audio.resumeBGM()}});s.init(),e.exports=(window.AF=window.AF||{}).audio=s,cc._RF.pop()},{"af-event":"af-event","af-event-dispatcher":"af-event-dispatcher"}],"af-base64":[function(t,e,i){"use strict";cc._RF.push(e,"5977fPOxVpKT4u/hQpoTy86","af-base64");var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o={base64Encode:function(t){var e,i,o,s,r,a,c,h="",l=0;for(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}(t);l<t.length;)s=(e=t.charCodeAt(l++))>>2,r=(3&e)<<4|(i=t.charCodeAt(l++))>>4,a=(15&i)<<2|(o=t.charCodeAt(l++))>>6,c=63&o,isNaN(i)?a=c=64:isNaN(o)&&(c=64),h=h+n.charAt(s)+n.charAt(r)+n.charAt(a)+n.charAt(c);return h},base64Decode:function(t){var e,i,o,s,r,a,c="",h=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<t.length;)e=n.indexOf(t.charAt(h++))<<2|(s=n.indexOf(t.charAt(h++)))>>4,i=(15&s)<<4|(r=n.indexOf(t.charAt(h++)))>>2,o=(3&r)<<6|(a=n.indexOf(t.charAt(h++))),c+=String.fromCharCode(e),64!=r&&(c+=String.fromCharCode(i)),64!=a&&(c+=String.fromCharCode(o));return c=function(t){var e,i,n="",o=0;for(i=e=0;o<t.length;)(i=t.charCodeAt(o))<128?(n+=String.fromCharCode(i),o++):i>191&&i<224?(e=t.charCodeAt(o+1),n+=String.fromCharCode((31&i)<<6|63&e),o+=2):(e=t.charCodeAt(o+1),c3=t.charCodeAt(o+2),n+=String.fromCharCode((15&i)<<12|(63&e)<<6|63&c3),o+=3);return n}(c)}},s=window.AF=window.AF||{};s.util=s.util||{},cc.js.mixin(s.util,o),e.exports=o,cc._RF.pop()},{}],"af-bitmap-font":[function(t,e,i){"use strict";cc._RF.push(e,"0efdb7UodNFH5CedrwY5wEh","af-bitmap-font"),(window.AF=window.AF||{}).BMFont=cc.Class({extends:cc.Component,properties:{},onLoad:function(){}});var n={CreateNewLabel:function(t,e,i){}};e.exports=(window.AF=window.AF||{}).AFBMFont=n,cc._RF.pop()},{}],"af-config-mgr":[function(t,e,i){"use strict";cc._RF.push(e,"6accf9KYURPR5d1knt0IUdo","af-config-mgr");t("af-const");var n=t("af-event-dispatcher"),o=t("af-event"),s={init:function(){this._dialogList=null,console.log("Config init")},getDialogList:function(){return this._dialogList},_onEngineLoad:function(){},_loadDialogList:function(){cc.loader.loadRes("framework/config/dialog_list",function(t,e){t?cc.warn("load dialog list file failed!"):this._dialogList=e}.bind(this))},loadDialogList:function(){return new Promise(function(t,e){cc.loader.loadRes("framework/config/dialog_list",function(i,n){if(i)return cc.warn("load dialog list file failed!"),void e(i);s._dialogList=n.json,t(n)})})}};s.init(),n.once(o.GAME_LOADED,function(){s._onEngineLoad()}),AF.Config=e.exports=s,cc._RF.pop()},{"af-const":"af-const","af-event":"af-event","af-event-dispatcher":"af-event-dispatcher"}],"af-const":[function(t,e,i){"use strict";cc._RF.push(e,"ca790RvSz5CNaNorNFXFyT6","af-const");var n={DIALOG_Z_ORDER:1e3,TOAST_MESSAGE_Z_ORDER:2e3,TOP_Z_ORDER:4e3,ANIM_Z_ORDER:4001,GUIDE_Z_ORDER:4002,STORY_Z_ORDER:4003,GAIN_Z_ORDER:4004,LOADING_LAYER_Z_ORDER:4005,MESSAGE_BOX_Z_ORDER:6e3,UserGender:{FEMALE:0,MALE:1,UNKNOWN:2},ActionType:{effect:0,wait:1,run:2,attack:3,magic:4,dead:5,passive:6,win1:7,win2:8,magic2:9,magic3:10,revive:11},ActionName:["","wait","run","attack","magic","dead","passive","win1","win2","magic2","magic3","revive"]};e.exports=(window.AF=window.AF||{}).Const=n,cc._RF.pop()},{}],"af-downloader":[function(t,e,i){"use strict";cc._RF.push(e,"50fbbfZK0tENpTvLSIs5R4g","af-downloader");var n={init:function(){this.allDownloadFiles=new Array,this.currentDownloadFileInfo=null},startDownloadFile:function(t,e){if(e=e||!1,AF.util.isZipFile(t)&&(e=!0),AF.platform.isWxApp()||AF.platform.isQQApp()){if(!this.currentDownloadFileInfo||this.currentDownloadFileInfo.filename!==t){for(var i=0;i<this.allDownloadFiles.length;i++)if(this.allDownloadFiles[i].filename===t)return;this.allDownloadFiles.push({filename:t,isNotSave:e}),this.processDownloadFile()}}else AF.EventDispatcher.emit(AF.Event.FILE_DOWNLOAD,t,AF.util.getRemoteUrl(t),!0)},processDownloadFile:function(){if(!(this.currentDownloadFileInfo||0>=this.allDownloadFiles.length)){this.currentDownloadFileInfo=this.allDownloadFiles[0],this.currentDownloadFileInfo.isUnzip=!1,this.allDownloadFiles.splice(0,1);var t="",e=!0,i=this;if(!AF.util.makesureLocalPath(i.currentDownloadFileInfo.filename))return e=!1,AF.EventDispatcher.emit(AF.Event.FILE_DOWNLOAD,i.currentDownloadFileInfo.filename,AF.util.getRemoteUrl(i.currentDownloadFileInfo.filename),e),this.currentDownloadFileInfo=null,void i.processDownloadFile();var n=i.currentDownloadFileInfo.filename,o="",s="";i.currentDownloadFileInfo.isNotSave||(s=AF.util.getLocalFilePath(n)),AF.platform.isWxApp()?wx.downloadFile({url:AF.util.getRemoteUrl(n),header:{},filePath:s,success:function(s){if(i.currentDownloadFileInfo.isUnzip=!1,s.statusCode<200||s.statusCode>=300)return e=!1,void(t=AF.util.isZipFile(n)?"":AF.util.getRemoteUrl(n));if(i.currentDownloadFileInfo.isNotSave)AF.util.isZipFile(n)?(o=s.tempFilePath,i.currentDownloadFileInfo.isUnzip=!0):(e=!0,t=s.tempFilePath);else{if(AF.util.isLocalFileExist(n))return e=!0,void(t=AF.util.getLocalFilePath(n));e=!1,t=AF.util.getRemoteUrl(n)}},fail:function(i){e=!1,t=AF.util.isZipFile(n)?"":AF.util.getRemoteUrl(n)},complete:function(){var s=i.currentDownloadFileInfo.isUnzip;(console.log("wx.downloadFile complet: "+n+" ,isUnzip:"+s+" ,state:"+e),s)?wx.getFileSystemManager().unzip({zipFilePath:o,targetPath:AF.util.getLocalFilePath(AF.util.getFilePath(n)),success:function(i){t=AF.util.getLocalFilePath(AF.util.getZipFilename(n)),e=!0},fail:function(i){e=!1,t=""},complete:function(){console.log("fs.unzip complete: "+n+" ,state:"+e),AF.EventDispatcher.emit(AF.Event.FILE_DOWNLOAD,n,t,e),i.currentDownloadFileInfo=null,i.processDownloadFile()}}):(AF.EventDispatcher.emit(AF.Event.FILE_DOWNLOAD,n,t,e),i.currentDownloadFileInfo=null,i.processDownloadFile())}}):AF.platform.isQQApp()&&BK.Http.request({url:AF.util.getRemoteUrl(n),method:"GET",headers:{Referer:"https://hudong.qq.com","User-Agent":"brick-client","Content-Type":"application/octet-stream"},body:"",success:function(r){if(console.log("statusCode",r.statusCode),console.log("headers",JSON.stringify(r.headers)),i.currentDownloadFileInfo.isUnzip=!1,r.statusCode<200||r.statusCode>=300)return e=!1,void(t=AF.util.isZipFile(n)?"":AF.util.getRemoteUrl(n));if(i.currentDownloadFileInfo.isNotSave)if(AF.util.isZipFile(n)){var a="temp/"+n;BK.fileSystem.writeFileSync(AF.util.getLocalFilePath2(a),r.arrayBuffer()),AF.util.isLocalFileExist2(a)?(o=AF.util.getLocalFilePath2(a),i.currentDownloadFileInfo.isUnzip=!0):(e=!1,t="")}else console.log("\u6210\u529f6"),s?(console.log("\u6210\u529f7"),BK.fileSystem.writeFileSync(AF.util.getLocalFilePath(n),r.arrayBuffer()),e=!0,t=AF.util.getLocalFilePath(n)):(console.log("\u6210\u529f8"),e=!0,t=AF.util.getLocalFilePath2("temp/temp_"+n),BK.fileSystem.writeFileSync(t,r.arrayBuffer())),console.log("\u6210\u529f9");else{if(BK.fileSystem.writeFileSync(AF.util.getLocalFilePath(n),r.arrayBuffer()),AF.util.isLocalFileExist(n))return e=!0,void(t=AF.util.getLocalFilePath(n));e=!1,t=AF.util.getRemoteUrl(n)}},fail:function(i){console.log("\u4e0b\u8f7d\u5931\u8d25"),e=!1,t=AF.util.isZipFile(n)?"":AF.util.getRemoteUrl(n)},complete:function(){var s=i.currentDownloadFileInfo.isUnzip;console.log("qq.downloadFile complet: "+n+" ,isUnzip:"+s+" ,state:"+e),s&&(BK.fileSystem.unzipSync(o,AF.util.getLocalFilePath(AF.util.getFilePath(n))),t=AF.util.getLocalFilePath(AF.util.getZipFilename(n)),e=!0),AF.EventDispatcher.emit(AF.Event.FILE_DOWNLOAD,n,t,e),i.currentDownloadFileInfo=null,i.processDownloadFile()}})}}};n.init(),AF.Downloader=e.exports=n,cc._RF.pop()},{}],"af-event-dispatcher":[function(t,e,i){"use strict";cc._RF.push(e,"a2aa1+LMDBLFYupbrRkz/UD","af-event-dispatcher");var n=t("AFList"),o={eventGroup:{},getEvent:function(t){return o.eventGroup[t]=o.eventGroup[t]||new n},on:function(t,e,i){e||cc.error("invalid addListener selector"),e&&o.getEvent(t).pushBack({selector:e,target:i})},off:function(t,e,i){o.getEvent(t).removeIf(function(t){return t.selector==e&&t.target==i})},emit:function(t){for(var e=[],i=1,n=arguments.length;i<n;++i){var s=arguments[i];e.push(s)}return o.getEvent(t).forEach(function(t){return t.selector.apply(t.target,e)})},once:function(t,e,i){var n=this;this.on(t,function o(){n.off(t,o,i),e.apply(this,arguments)},i)}};e.exports=(window.AF=window.AF||{}).EventDispatcher=o,cc._RF.pop()},{AFList:"AFList"}],"af-event":[function(t,e,i){"use strict";cc._RF.push(e,"74c5c2CxblKzoG2L9I4EdaU","af-event");var n={GAME_LOADED:0,ENTER_GAME:0,EXIT_TO_HALL:0,WILL_OPEN_DIALOG:0,UI_SCENE_TOUCH_ENABLE:0,QUERY_OBJECT:0,GAME_ON_SHOW:0,GMAE_ON_HIDE:0,GAME_ON_BGM:0,BEFORE_SCENE_LAUNCH:0,AFTER_SCENE_LAUNCH:0,SCENE_LOADED:0,SHOW_LOADING_LAYER:0,HIDE_LOADING_LAYER:0,USER_INFO_UPDATE:0,FILE_DOWNLOAD:0,FILE_LOADFRAME:0,FILE_LOADNETSPRITE:0,DOWNLOADDIAGLOG_ON_CLOSE:0,CLOSE_WAIT_DIALOG:0,SHOW_LOGIN_PROGRESS_DIALOG:0,CLOSE_DIALOG_BY_NAME:0,HIDE_BANNER_AD:0,JUMP_REVIVE:0},o=0;for(var s in n)n[s]=++o;e.exports=(window.AF=window.AF||{}).Event=n,cc._RF.pop()},{}],"af-fast-hash":[function(t,e,i){"use strict";cc._RF.push(e,"4734eDzbHBD/rpZn2Q7E2JZ","af-fast-hash");var n=t("long"),o=t("bytebuffer"),s={fasthash64:function(t){var e=n.fromString("0x880355f21e6d1965",!0,16),i=n.fromString("0x2127599bf4325c37",!0,16),s=new n(0,0,!0),r=t.length,a=new n(r,0,!0).multiply(e);s=s.xor(a);for(var c=o.wrap(t);r-c.offset>=8;){var h=c.readUint8(),l=c.readUint8(),f=c.readUint8(),u=c.readUint8(),d=c.readUint8(),p=c.readUint8(),g=c.readUint8(),m=c.readUint8();w=(w=(w=new n(16777216*u+65536*f+256*l+h,16777216*m+65536*g+256*p+d,!0)).xor(w.shiftRightUnsigned(23))).multiply(i),y=(y=new n(w.low,w.high,!0)).shiftRightUnsigned(47),w=w.xor(y),s=(s=s.xor(w)).multiply(e)}var v=7&r;if(v<8&&v>0){h=0,l=0,f=0,u=0,d=0,p=0,g=0,m=0;c.offset<r&&(h=c.readUint8()),c.offset<r&&(l=c.readUint8()),c.offset<r&&(f=c.readUint8()),c.offset<r&&(u=c.readUint8()),c.offset<r&&(d=c.readUint8()),c.offset<r&&(p=c.readUint8()),c.offset<r&&(g=c.readUint8()),c.offset<r&&(m=c.readUint8());var y,w=new n(16777216*u+65536*f+256*l+h,16777216*m+65536*g+256*p+d,!0);y=(y=new n(w.low,w.high,!0)).shiftRightUnsigned(23),w=(w=w.xor(y)).multiply(i);var A=new n(w.low,w.high,!0);A=A.shiftRightUnsigned(47),w=w.xor(A),s=(s=s.xor(w)).multiply(e)}var F=new n(s.low,s.high,!0);F=F.shiftRightUnsigned(23),s=(s=s.xor(F)).multiply(i);var S=new n(s.low,s.high,!0);return S=S.shiftRightUnsigned(47),(s=s.xor(S)).toString()},fasthash64x:function(t){var e=n.fromString("0x880355f21e6d1965",!0,16),i=n.fromString("0x2127599bf4325c37",!0,16),s=new n(0,0),r=t.length,a=new n(r,0).multiply(e);s=s.xor(a);for(var c=o.wrap(t);r-c.offset>=8;){var h=c.readUint8(),l=c.readUint8(),f=c.readUint8(),u=c.readUint8(),d=c.readUint8(),p=c.readUint8(),g=c.readUint8(),m=c.readUint8();w=(w=(w=new n(16777216*u+65536*f+256*l+h,16777216*m+65536*g+256*p+d)).xor(w.shiftRightUnsigned(23))).multiply(i),y=(y=new n(w.low,w.high,!0)).shiftRightUnsigned(47),w=w.xor(y),s=(s=s.xor(w)).multiply(e)}var v=7&r;if(v<8&&v>0){h=0,l=0,f=0,u=0,d=0,p=0,g=0,m=0;c.offset<r&&(h=c.readUint8()),c.offset<r&&(l=c.readUint8()),c.offset<r&&(f=c.readUint8()),c.offset<r&&(u=c.readUint8()),c.offset<r&&(d=c.readUint8()),c.offset<r&&(p=c.readUint8()),c.offset<r&&(g=c.readUint8()),c.offset<r&&(m=c.readUint8());var y,w=new n(16777216*u+65536*f+256*l+h,16777216*m+65536*g+256*p+d);y=(y=new n(w.low,w.high,!0)).shiftRightUnsigned(23),w=(w=w.xor(y)).multiply(i);var A=new n(w.low,w.high,!0);A=A.shiftRightUnsigned(47),w=w.xor(A),s=(s=s.xor(w)).multiply(e)}var F=new n(s.low,s.high,!0);F=F.shiftRightUnsigned(23),s=(s=s.xor(F)).multiply(i);var S=new n(s.low,s.high,!0);return S=S.shiftRightUnsigned(47),(s=s.xor(S)).toUnsigned().toString()}},r=window.AF=window.AF||{};r.util=r.util||{},cc.js.mixin(r.util,s),e.exports=s,cc._RF.pop()},{bytebuffer:1,long:5}],"af-frameloader":[function(t,e,i){"use strict";cc._RF.push(e,"79794vaedNDY5C0QYPVTAeI","af-frameloader");var n={EFFECT:0,PLAYER:0,SCENE:0},o=0;for(var s in n)n[s]=++o;function r(t){return new Promise(function(e,i){cc.loader.load(t,function(t,n){t?i(t):e(n)})})}var a={init:function(){this.loadingFiles={}},startLoadFile:function(t,e){if(!this.loadingFiles[t])switch(this.loadingFiles[t]={name:t,type:e},e){case n.EFFECT:this.processLoadEffectFile(t);break;case n.PLAYER:this.processLoadPlayerFile(t);break;case n.SCENE:this.processLoadSceneFile(t)}},getUrl:function(t){var e="";return AF.platform.isWxApp()||AF.platform.isQQApp()?(e=AF.util.getLocalFilePath(t),AF.util.isLocalFileExist(t)||(e=AF.util.getRemoteUrl(t))):e=AF.util.getRemoteUrl(t),e},processLoadEffectFile:function(t){var e=this.getUrl("effect/"+t+".png"),i=this.getUrl("effect/"+t+".plist"),n=this;Promise.all([r(e),r(i)]).then(function(e){var i=e[0],o=e[1],s=n.getFrames(i,o,t,0);n.emitLoadEnded(t,s,!0)},function(e){n.emitLoadEnded(t,[],!1)})},processLoadPlayerFile:function(t){var e=this.getUrl("player/"+t+".png"),i=this.getUrl("player/"+t+".plist"),n=this;Promise.all([r(e),r(i)]).then(function(e){var i=e[0],o=e[1],s=n.getFrames(i,o,t,1);n.emitLoadEnded(t,s,!0)},function(e){n.emitLoadEnded(t,[],!1)})},processLoadSceneFile:function(t){var e=this.getUrl("scene/"+t+".png"),i=this.getUrl("scene/"+t+".plist"),n=this;Promise.all([r(e),r(i)]).then(function(e){var i=e[0],o=e[1],s=n.getFrameOfScene(i,o,t,1);n.emitLoadEnded(t,s,!0)},function(e){n.emitLoadEnded(t,{},!1)})},getFrames:function(t,e,i,n){for(var o=n,s=1,r=[[],[]];;){var a=AF.Const.ActionName[o],c=i;if(""!==a&&(c+="_",c+=a),c+="_",c+=(Array(4).join(0)+s).slice(-4),c+=".png",r[o]||(r[o]=[]),!e.frames.hasOwnProperty(c)){if(o>0&&o<AF.Const.ActionName.length-1){o++,s=1;continue}break}var h=this.createSpriteFrame(t,e.frames[c]);r[o].push(h),s++}return r},createSpriteFrame:function(t,e){var i=AF.util.parseNums(e.frame),n=e.rotated,o=AF.util.parseNums(e.offset),s=AF.util.parseNums(e.sourceSize),r=cc.rect(i[0],i[1],i[2],i[3]),a=cc.v2(o[0],o[1]),c=cc.size(s[0],s[1]);return new cc.SpriteFrame(t,r,n,a,c)},getFrameOfScene:function(t,e){for(var i={},n=Object.keys(e.frames),o=0;o<n.length;o++){var s=n[o],r=this.createSpriteFrame(t,e.frames[s]);i[s]=r}return i},emitLoadEnded:function(t,e,i){this.loadingFiles[t]=null,AF.EventDispatcher.emit(AF.Event.FILE_LOADFRAME,t,e,i)}};a.init(),AF.Frameloader=e.exports=a,cc._RF.pop()},{}],"af-game-config":[function(t,e,i){"use strict";cc._RF.push(e,"15c5eduFM1AY7AEJ3Vrmt80","af-game-config");var n={init:function(){this.modelCfg=null,this.playerCfg=null,this.pointCfg=null,this.maxPointId=0,this.playerIds=[]},setGameConfig:function(t,e){"player"==t?this.setPlayerCfg(e):"model"==t?this.setModelCfg(e):"point"==t&&this.setPointCfg(e)},setPlayerCfg:function(t){if(!this.playerCfg){this.playerCfg={},this.playerIds=[];for(var e=0;e<t.length;e++){var i=t[e].id;this.playerCfg[i]=t[e],this.playerIds.push(i)}}},getPlayerInfo:function(t){var e=this.playerCfg[t];if(!e)return e;if(!e.actions){var i=this.getModelInfo(e.model);e.head=i.head,e.chest=i.chest,e.actions=i.actions}return e.actions.revive||(e.actions.revive={},e.actions.revive.x=e.actions.dead.x,e.actions.revive.y=e.actions.dead.y,e.actions.revive.rate=e.actions.dead.rate),e},setPointCfg:function(t){if(console.log(t),!this.pointCfg){this.pointCfg={};for(var e=0;e<t.length;e++){var i=e+1;this.pointCfg[i]=t[e]}}},getPointInfo:function(t){return this.pointCfg[t]},getMaxPointNum:function(){return this.maxPointId},getRandomPlayerId:function(){var t=AF.Random.getRandomIn(1,this.playerIds.length);return this.playerIds[t-1]},setModelCfg:function(t){if(!this.modelCfg){this.modelCfg={};for(var e=0;e<t.length;e++){var i=t[e].id;this.modelCfg[i]=t[e]}}},getModelInfo:function(t){return this.modelCfg[t]}};n.init(),AF.GameConfig=e.exports=n,cc._RF.pop()},{}],"af-game-data":[function(t,e,i){"use strict";cc._RF.push(e,"13ce4JOj5dCULOm1rHjyfd3","af-game-data");var n={init:function(){this.userId="",this.userName="",this.headUrl="",this.time={remote:0,local:0},this.players=[],this.player_index={},this.myObjects={},this.dialogOnce={}},getDialogOnce:function(t){return this.dialogOnce[t]?this.dialogOnce[t]:0},setDialogOnce:function(t){this.dialogOnce[t]=AF.util.getCurrTime()},initDialogOnce:function(){this.dialogOnce={}},initGold:function(){AF.EventDispatcher.emit(AF.Event.USER_INFO_UPDATE)},setMyObject:function(t,e){this.myObjects[t]=e},getMyObject:function(t){return this.myObjects[t]},setTime:function(t){this.time.remote=Math.floor(t/1e3),this.time.local=AF.util.getCurrTimeOfSecond()},getServerTime:function(){var t=0,e=AF.util.getCurrTimeOfSecond();return e>this.time.local&&(t=e-this.time.local),this.time.remote+t},getPastTime:function(t){var e=AF.GameData.getServerTime();return e<=t?0:e-t},setUserId:function(t){this.userId=t},getUserId:function(){return this.userId},setUserName:function(t){this.userName=t},getUserName:function(){return this.userName},setHeadUrl:function(t){this.headUrl=t},getHeadUrl:function(){return this.headUrl},getMyPlayerData:function(){if(this.playerData)return this.playerData;this.playerData={pointId:0,gold:0};var t=AF.util.getStorage("player_data");return t&&(this.playerData=JSON.parse(t)),this.playerData},setMyPlayerData:function(t){this.playerData=t},savePlayerData:function(){var t=JSON.stringify(this.playerData);AF.util.setStorage("player_data",t)}};n.init(),AF.GameData=e.exports=n,cc._RF.pop()},{}],"af-http":[function(t,e,i){"use strict";cc._RF.push(e,"ae7c6JrGrpK87Anlr9kDecw","af-http");"function"==typeof Symbol&&Symbol.iterator;var n={};function o(t){if(!t)return"";var e="";for(var i in t)t.hasOwnProperty(i)&&void 0!==t[i]&&null!==t[i]&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e}function s(t){try{t=JSON.parse(t)}catch(t){}return t}function r(t,e){return function(){if(4==t.readyState){var i=t.responseText;t.status>=200&&t.status<300&&i?e&&e(null,s(i),t.status):(t.status,e&&e(!0,s(i),t.status))}}}n.get=function(t,e,i,n){function s(t,e,n){a&&clearTimeout(a),a=null,i&&i(t,e,n),i=null}n=n||6e3;var a=setTimeout(function(){a=null,c.abort(),s(!0)},n);t=t+"?"+o(e);var c=new XMLHttpRequest;c.onreadystatechange=r(c,s),c.timeout=n-100,c.ontimeout=function(e){cc.log("request timeout:",t),s(!0)},c.open("GET",t,!0),c.send()},n.getFile=function(t,e,i,n){function s(t,e){r&&clearTimeout(r),r=null,i&&i(t,e),i=null}n=n||6e3;var r=setTimeout(function(){r=null,a.abort(),s(!0)},n);t=t+"?"+o(e);var a=new XMLHttpRequest;a.responseType="blob",a.onreadystatechange=function(t,e){return function(){4==t.readyState&&(t.status>=200&&t.status<300?console.log("HHHHH"):(t.status,e&&e(!0)))}}(a,s),a.timeout=n-100,a.ontimeout=function(e){cc.log("request timeout:",t),s(!0)},a.open("GET",t,!0),a.send()},n.post=function(t,e,i,n,s){function a(t,e,i){c&&clearTimeout(c),c=null,n&&n(t,e,i),n=null}s=s||6e3;var c=setTimeout(function(){c=null,h.abort(),a(!0)},s);(function(t){if(t)for(var e in t)return!0;return!1})(e)&&(t=t+"?"+o(e));var h=new XMLHttpRequest;h.onreadystatechange=r(h,a),h.timeout=s-100,h.ontimeout=function(e){cc.log("request timeout:",t),a(!0)},h.open("POST",t,!0);var l=JSON.stringify(i);h.setRequestHeader("Content-Type","application/json"),h.send(l)},e.exports=(window.AF=window.AF||{}).http=n,cc._RF.pop()},{}],"af-loading-layer-mgr":[function(t,e,i){"use strict";cc._RF.push(e,"a8ac6Vx4LBCgJXVWLZns1Ne","af-loading-layer-mgr");t("af-const");var n=t("af-event-dispatcher"),o=t("af-event"),s={},r={addStyle:function(t,e){s[t]=e,AF.preloadDialog(e)},resetDefaultStyle:function(t){s.default=void 0,t&&this.addStyle("default",t)},show:function(t){t=t||{},AF.EventDispatcher.emit(AF.Event.SHOW_LOADING_LAYER,t)},_closeLoadingLayer:function(){AF.EventDispatcher.emit(AF.Event.HIDE_LOADING_LAYER)},_tick:function(){if(this._totalTime&&(this._totalTime-=1,this._totalTime<=0)){var t=this._timeupCB;t&&t(),this._closeLoadingLayer()}},_onSwitchScene:function(){this._closeLoadingLayer(),this._tickHandle&&clearInterval(this._tickHandle),this._curLoadingLayer=this._releaseProtos=this._timeupCB=this._totalTime=void 0,this._tickHandle=void 0,this._openningLoadingLayer=!1}};AF.EventDispatcher.on(AF.Event.BEFORE_SCENE_LAUNCH,r._onSwitchScene,r),n.once(o.GAME_LOADED,function(){r.addStyle("_default_","DefaultLoadingLayerStyle")}),AF.LOADING_LAYER=r.show.bind(r),AF.CLOSE_LOADING_LAYER=r._closeLoadingLayer.bind(r),e.exports=(window.AF=window.AF||{}).LoadingLayer=r,cc._RF.pop()},{"af-const":"af-const","af-event":"af-event","af-event-dispatcher":"af-event-dispatcher"}],"af-md5":[function(t,e,i){"use strict";cc._RF.push(e,"766bf+DBYJBn51sRufs952n","af-md5");var n=t("md5"),o=window.AF=window.AF||{};o.util=o.util||{},o.util.md5=n,e.exports=n,cc._RF.pop()},{md5:6}],"af-message-box-mgr":[function(t,e,i){"use strict";cc._RF.push(e,"108ebK6Re1LsaOnFtwU/OVr","af-message-box-mgr");t("af-const"),t("af-event-dispatcher"),t("af-event");var n={},o={};o.TYPE_OK=1,o.TYPE_YES_NO=2,o.RET_OK=1,o.RET_YES=2,o.RET_NO=3,o.RET_CLOSE=4,o.addStyle=function(t,e){console.log("name: ",t,", prefabName: ",e),n[t]=e,AF.preloadDialog(e)},o.resetDefaultStyle=function(t){console.log("prefabName: ",t),n.default=void 0,t&&this.addStyle("default",t)},o.show=function(t){var e;e=t.style&&n[t.style]?n[t.style]:n.default?n.default:n._default_,void 0===t.enableTouchEmptyPlaceToClose&&(t.enableTouchEmptyPlaceToClose=!0),AF.openDialog(e,t)},o.YesNo=function(t,e,i,n,s,r){o.show({type:o.TYPE_YES_NO,title:t,content:e,callback:i,yesButtonText:n,noButtonText:s,enableCloseButton:!1,enableTouchEmptyPlaceToClose:r})},o.OK=function(t,e,i,n,s,r){o.show({type:o.TYPE_OK,title:t,content:e,callback:i,okButtonText:n||"\u786e\u5b9a",enableCloseButton:r||!1,enableTouchEmptyPlaceToClose:s})},o.NetError=function(t){o.show({type:o.TYPE_OK,title:"",content:"\u8001\u5927,\u7f51\u7edc\u53d1\u751f\u9519\u8bef!",callback:function(t){AF.gotoScene("HallLoginScene")},okButtonText:"\u91cd\u8fde",enableCloseButton:!1,enableTouchEmptyPlaceToClose:!1,zOrder:AF.Const.MESSAGE_BOX_Z_ORDER})},e.exports=(window.AF=window.AF||{}).MessageBox=o,cc._RF.pop()},{"af-const":"af-const","af-event":"af-event","af-event-dispatcher":"af-event-dispatcher"}],"af-netsprite":[function(t,e,i){"use strict";cc._RF.push(e,"061369dFDZIq6woCE1r1kBE","af-netsprite");var n={init:function(){this.allNeedLoadFiles=new Array,this.currLoadFileInfo=null,this.loadingFiles={}},startLoadNetSprite:function(t){this.loadingFiles[t]||(this.loadingFiles[t]={name:t},this.processLoadFile(t))},getUrl:function(t){var e="";return AF.platform.isWxApp()||AF.platform.isQQApp()?(e=AF.util.getLocalFilePath(t),AF.util.isLocalFileExist(t)||(e=AF.util.getRemoteUrl(t))):e=AF.util.getRemoteUrl(t),e},processLoadFile:function(t){var e=this;(function(t){return new Promise(function(e,i){cc.loader.load(t,function(t,n){t?i(t):e(n)})})})(this.getUrl(t)).then(function(i){var n=new cc.SpriteFrame(i);e.emitLoadEnded(t,n,!0)},function(i){e.emitLoadEnded(t,null,!1)})},emitLoadEnded:function(t,e,i){this.loadingFiles[t]=null,AF.EventDispatcher.emit(AF.Event.FILE_LOADNETSPRITE,t,e,i)}};n.init(),AF.NetSpriteloader=e.exports=n,cc._RF.pop()},{}],"af-notice-mgr":[function(t,e,i){"use strict";cc._RF.push(e,"8a6a5NDTzNCvqqbEjSa6Q93","af-notice-mgr");t("af-const");var n={};n.registerMarqueeWidget=function(t){this._marqueeWidget=t},n.unregisterMarqueeWidget=function(){this._marqueeWidget=void 0},n.marquee=function(t,e,i){this._marqueeMsg=this._marqueeMsg||[],e&&(this._marqueeMsg.push({text:t,repeat:e-1,interval:i||10,time:i||10}),this._tickHandle||(this._tickHandle=setInterval(this._tick.bind(this),1e3))),this._showMarquee(t)},n._showMarquee=function(t){this._marqueeWidget&&this._marqueeWidget.show(t)},n._checkMarqueeMsgQueue=function(){for(var t=0;!(t>=this._marqueeMsg.length);){var e=this._marqueeMsg[t];e.time-=1,e.time<=0?(e.time=e.interval,e.repeat=e.repeat>0?e.repeat-1:e.repeat,this._showMarquee(e.text),0==e.repeat?this._marqueeMsg.splice(t,1):t++):t++}},n._tick=function(){this._marqueeMsg&&this._checkMarqueeMsgQueue()},e.exports=(window.AF=window.AF||{}).Notice=n,cc._RF.pop()},{"af-const":"af-const"}],"af-platform":[function(t,e,i){"use strict";cc._RF.push(e,"caf33uIqhhAX4GqAKuT1wUx","af-platform");var n=t("../config/serverKey.js"),o=t("../config/serverVer.js"),s=t("../config/serverUrl.js"),r={init:function(){(this.WX_GAME_ENV=!1,this.WX_GAME_DEVTOOLS=!1,this.QQ_GAME_ENV=!1,"undefined"!=typeof wx)?(this.WX_GAME_ENV=!0,"devtools"==wx.getSystemInfoSync().platform&&(this.WX_GAME_DEVTOOLS=!0)):"undefined"!=typeof BK&&(this.QQ_GAME_ENV=!0);this.isStart=!1},start:function(t){if(!AF.platform.isStart)if(AF.platform.isStart=!0,AF.platform.isWxApp()){var e=AF.platform.isWxPhone();AF.wxHelper.init(e,t)}else AF.platform.isQQApp()&&AF.qqHelper.init(t)},getSrc:function(){return AF.platform.getServerUrl().src},isWxApp:function(){return AF.platform.WX_GAME_ENV},isQQApp:function(){return AF.platform.QQ_GAME_ENV},isWxPhone:function(){return!(!AF.platform.WX_GAME_ENV||AF.platform.WX_GAME_DEVTOOLS)},getSystemInfo:function(){var t={windowWidth:0,windowHeight:0};if(AF.platform.isWxApp()){var e=wx.getSystemInfoSync();t.windowWidth=e.windowWidth,t.windowHeight=e.windowHeight}return t},getServerKey:function(){var t=AF.platform.getQueryValue("server")||n,e=s.getUrls();return""==t&&(t="test"),e[t]||(t="test"),t},getServerUrl:function(){return s.getUrls()[AF.platform.getServerKey()]},getCdnUrl:function(){return AF.platform.getServerUrl().cdn},getApiUrl:function(){return AF.platform.getServerUrl().api},getDisplayVersion:function(){var t=100*o.version+o.hotfix;return o.displayVersion+" ("+t+")"},getQueryValue:function(t){return AF.platform.isWxApp()?wx.getLaunchOptionsSync().query[t]||"":AF.util.GetRequest()[t]||""},isHairScreen:function(){return cc.winSize.height/cc.winSize.width>=2},setKeepScreenOn:function(){AF.platform.isWxPhone()&&(wx.setKeepScreenOn({keepScreenOn:!0}),console.log("wx\u8bbe\u7f6e\u5c4f\u5e55\u5e38\u4eae"))},request:function(t){t.method&&"POST"===t.method?AF.http.post(t.url,null,t.data,function(e,i,n){n?t.success&&t.success({data:i,statusCode:n}):t.fail&&t.fail({data:i,statusCode:n})}):AF.http.get(t.url,t.data,function(e,i,n){n?t.success&&t.success({data:i,statusCode:n}):t.fail&&t.fail({data:i,statusCode:n})})}};r.init(),e.exports=(window.AF=window.AF||{}).platform=r,cc._RF.pop()},{"../config/serverKey.js":"serverKey","../config/serverUrl.js":"serverUrl","../config/serverVer.js":"serverVer"}],"af-qq-helper":[function(t,e,i){"use strict";var n;cc._RF.push(e,"cb0b9V+p6dPo7xrk1hpJl+X","af-qq-helper");var o={videoAd:null,status:0};n=e.exports=AF.qqHelper={init:function(t){t&&n.createVideoAd(),n.userInfo={openId:n.getStorage("qqOpenId"),nickName:n.getStorage("qqNickName")||"",avatarUrl:n.getStorage("qqAvatarUrl")||""},n.shareInfo={},n.userInfo.openId=GameStatusInfo.openId,n.setStorage("qqOpenId",n.userInfo.openId),n.getNickName(n.userInfo.openId,function(t,e){t===n.userInfo.openId&&(n.userInfo.nickName=e,n.setStorage("qqNickName",n.userInfo.nickName))}),n.getAvatarUrl(n.userInfo.openId,function(t,e){t===n.userInfo.openId&&(n.userInfo.avatarUrl=e,n.setStorage("qqAvatarUrl",n.userInfo.avatarUrl))}),BK.onEnterBackground(function(){BK.Console.log("onEnterBackground "),n.onEnterBackground()}),BK.onEnterForeground(function(){BK.Console.log("onEnterForeground "),n.onEnterForeground()}),n._getShareInfo()},onEnterBackground:function(t){BK.Console.log("\u6e38\u620f\u8fdb\u5165\u540e\u53f0")},onEnterForeground:function(t){BK.Console.log("\u6e38\u620f\u8fdb\u5165\u524d\u53f0"),n._getShareInfo()},_getShareInfo:function(){var t=NaN,e="",i=GameStatusInfo.gameParam;if(BK.Console.log("\u5206\u4eab\u4fe1\u606f gameParam",i),i){for(var o=i.split("&"),s=0;s<o.length;s++){var r=o[s].split("=")[0];"type"===r?t=o[s].split("=")[1]:"data"===r&&(e=o[s].split("=")[1])}n.setShareInfo(t,e)}else n.setShareInfo(t,e)},getShareInfo:function(){return n.shareInfo},setShareInfo:function(t,e){n.shareInfo={},t&&e&&(n.shareInfo[t]=e)},getStorage:function(t){return BK.localStorage.getItem(t)},setStorage:function(t,e){BK.localStorage.setItem(t,e)},shareAppMessage:function(t,e,i,n,o){var s=!1;BK.Share.share({qqImgUrl:"http://manager.pixel08.com/api/public/uploads/c8bc86484b28748830bf1a30b43385951534220948325.jpg",isToFriend:!0,summary:o&&o.summary||"O(\u2229_\u2229)O\uff0c\u6211\u8df3\u4e8690\u5206\uff0c\u6211\u6253\u8d4c\u4f60\u80af\u5b9a\u8d85\u4e0d\u8fc7\u6211",extendInfo:n,success:function(t){BK.Console.log("\u5206\u4eab\u6210\u529f",t.code,JSON.stringify(t.data)),s=!0},fail:function(t){BK.Console.log("\u5206\u4eab\u5931\u8d25",t.code,JSON.stringify(t.msg))},complete:function(){BK.Console.log("\u5206\u4eab\u5b8c\u6210\uff0c\u4e0d\u8bba\u6210\u529f\u5931\u8d25"),s?e():i()}})},createVideoAd:function(){var t=o;t.videoAd||0==t.status&&(t.videoAd=BK.Advertisement.createVideoAd(),t.status=1,t.videoAd.onLoad(function(){t.status=2}),t.videoAd.onError(function(e){t.videoAd=null,t.status=0,n.createVideoAd()}),t.videoAd.onPlayFinish(function(){t.status=4}))},showVideoAd:function(t){if(n.isVideoAdLoaded()){AF.audio.onGameEnterBackground();var e=o;e.status=3,e.videoAd.onClose(function(){AF.audio.onGameEnterForeground(),t(4==e.status),e.videoAd=null,e.status=0,n.createVideoAd()}),e.videoAd.show()}},isVideoAdLoaded:function(){return!!o.videoAd&&2==o.status},showBannerAd:function(){},hideBannerAd:function(){},upScore:function(t){var e=t.startTime,i=t.endTime,n=t.score;BK.Script.logToConsole=1,BK.Script.log(1,1,"\u4e0a\u4f20\u5206\u6570"+JSON.stringify({startTime:e,endTime:i,score:n}));var o={userData:[{openId:GameStatusInfo.openId,startMs:e.toString(),endMs:i.toString(),scoreInfo:{score:n}}],attr:{score:{type:"rank",order:1}}};BK.QQ.uploadScoreWithoutRoom(1,o,function(t,e,i){0!==t&&BK.Script.log(1,1,"\u4e0a\u4f20\u5206\u6570\u5931\u8d25!\u9519\u8bef\u7801\uff1a"+t),BK.Script.log(1,1,"\u4e0a\u4f20\u5206\u6570"+e+" errCode:"+t+"  data:"+JSON.stringify(i))})},getRankList:function(t){BK.QQ.getRankListWithoutRoom("score",1,0,function(e,i,n){if(0!==e)return BK.Script.log(1,1,"\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u5931\u8d25!\u9519\u8bef\u7801\uff1a"+e),void t();n?t(n.data.ranking_list):t()})},getUserInfo:function(){return n.userInfo},getNickName:function(t,e){BK.MQQ.Account.getNick(t,function(t,i){e&&e(t,i)})},getAvatarUrl:function(t,e){BK.MQQ.Account.getHeadEx(t,function(t,i){e&&e(t,i)})}},cc._RF.pop()},{}],"af-random2":[function(t,e,i){"use strict";cc._RF.push(e,"c9109hAD9NA97Du5qxSXISm","af-random2");var n=function(t){t=t||(new Date).getTime(),this.setSeed(t)};n.prototype.next=function(t,e){return this._seed=16807*this._seed%2147483647,0===arguments.length?this._seed/2147483647:1===arguments.length?this._seed/2147483647*t:this._seed/2147483647*(e-t)+t},n.prototype.getChance=function(t){return this.getRandomIn(1,100)<=t},n.prototype.getRandomIn=function(t,e){return Math.floor(this.next()*(e-t+1))+t},n.prototype.setSeed=function(t){this._seed=16807*t%2147483647,this._seed<=0&&(this._seed+=2147483646)},AF.Random2=e.exports=n,AF.Random=new AF.Random2((new Date).getTime()),cc._RF.pop()},{}],"af-scene-mgr":[function(t,e,i){"use strict";cc._RF.push(e,"b502d/ETWBI0ZFd9VjCz5XC","af-scene-mgr");var n=t("af-event-dispatcher"),o=t("af-event"),s=t("af-const"),r=t("af-config-mgr"),a=(window.AF=window.AF||{}).SceneMgr=cc.Class({extends:cc.Component,properties:{},statics:{instance:null},onLoad:function(){a.instance||(a.instance=this,this._active=!0,cc.game.addPersistRootNode(this.node),this.node.zIndex=s.TOP_Z_ORDER,this._enableSwitchSceneAnim=!1,this._switchingSceneFlags={sceneLoaded:!1,inAnimationDone:!1,targetSceneName:null,switching:!1},this._curSceneName="",this._sceneParams=null,this._dialogStack=[],this._dialogCache={},this._preloadingDialog={},this._tryToOpenDialog=void 0,this._sceneDialog={},this._dialogParams=null,n.emit(o.GAME_LOADED),n.on(o.SCENE_LOADED,this.sceneLoadedMsg,this),this.addSwitchSceneAinm("default","framework/prefabs/loading"),this._enableSwitchSceneAnim=!0)},setEnableSwitchSceneAnim:function(t){this._enableSwitchSceneAnim=t},onEnable:function(){this.node.zIndex=s.TOP_Z_ORDER},onDestroy:function(){this._active&&(n.off(o.SCENE_LOADED,this.sceneLoadedMsg,this),cc.game.removePersistRootNode(this.node),a.instance=null)},getCurSceneParams:function(){return this._sceneParams},getCurDialogParams:function(){return this._dialogParams},getCurSceneName:function(){return this._curSceneName},isSwitchingScene:function(){return this._switchingSceneFlags.switching},switchScene:function(t,e,i){var s=this._switchingSceneFlags;if(!s.switching||(cc.warn("alreay switching to scene ["+s.targetSceneName+"]"),s.targetSceneName!==t)){cc.director.getScene();if(this._curSceneName!==t){this._sceneParams=e,this._switchSceneCB=i,n.emit(o.BEFORE_SCENE_LAUNCH,t),s.targetSceneName=t,s.switching=!0,this._enableSwitchSceneAnim&&this._switchSceneAnimIn();var r=this;cc.director.preloadScene(t,function(){s.targetSceneName&&s.targetSceneName==t&&(s.sceneLoaded=!0,r._enableSwitchSceneAnim&&!s.inAnimationDone||r._loadScene())})}}},_loadScene:function(){var t=this._switchingSceneFlags;cc.director.loadScene(t.targetSceneName,function(){this._curSceneName=t.targetSceneName,n.emit(o.AFTER_SCENE_LAUNCH,t.targetSceneName),this._switchSceneCB&&(this._switchSceneCB(),this._switchSceneCB=void 0),this._clearDialogCacheAndStack()}.bind(this))},sceneLoadedMsg:function(){var t=this._switchingSceneFlags;t.targetSceneName=null,t.sceneLoaded=!1,t.inAnimationDone=!1,t.switching=!1,this._enableSwitchSceneAnim&&this._switchSceneAnimOut()},addSwitchSceneAinm:function(t,e){var i=this;cc.loader.loadRes(e,function(n,o){if(n)cc.error("can not load switch scene animation -> ["+e+"], error:",n);else{var r=cc.instantiate(o);r.name=t;var a=i.node.getChildByName("SwitchSceneAnimation");a||((a=new cc.Node("SwitchSceneAnimation")).zIndex=s.ANIM_Z_ORDER,i.node.addChild(a));var c=a.getChildByName(t);c&&c.removeFromParent(!0),a.addChild(r),r.active=!1}})},_switchSceneAnimOut:function(){var t=this._getSwitchAnimComponent();t&&t.playOutAnim()},_switchSceneAnimIn:function(){var t=this._switchingSceneFlags,e=this._getSwitchAnimComponent();e?(e.node.active=!0,e.playInAnim(function(){t.inAnimationDone=!0,t.sceneLoaded&&this._loadScene()}.bind(this))):(t.inAnimationDone=!0,t.sceneLoaded&&this._loadScene())},_getSwitchAnimComponent:function(t){var e=this.node.getChildByName("SwitchSceneAnimation");return e&&(e=e.getChildByName(t||"default"))?e.getComponent("AFLoadingAnim"):null},registerDialog:function(t,e){this._sceneDialog[t]=e},unregisterDialog:function(t){delete this._sceneDialog[t];for(var e=0;e<this._dialogStack.length;){this._dialogStack[e].name===t?this._dialogStack.splice(e,1):e++}},_clearDialogCacheAndStack:function(){this._dialogCache={},this._dialogStack=[],this._tryToOpenDialog=void 0},_loadDialog:function(t,e,i){if(!this._dialogPaths){var n=r.getDialogList();if(this._dialogPaths=n.dialogs,!this._dialogPaths)return void(e&&e(!0))}var o=this._dialogPaths[t];if(!o)return cc.error("can not load dialog -> ["+t+"], not found in dialog list."),void(e&&e(!0));cc.loader.loadRes(o,function(n,o){if(n)return cc.error("can not load dialog -> ["+t+"], error:",n),void(e&&e(!0));var r=cc.instantiate(o);void 0!==i&&(r.active=i),r.setPosition(cc.winSize.width/2,cc.winSize.height/2),cc.director.getScene().addChild(r),r.zIndex=s.DIALOG_Z_ORDER,r.name=t,e&&e(null,r)})},preloadDialog:function(t,e){this._dialogCache[t]||(this._preloadingDialog[t]=!0,this._loadDialog(t,function(i,n){delete this._preloadingDialog[t],this._tryToOpenDialog&&this._tryToOpenDialog.name==t?(!i&&this._pushDialogToStack(t,n),this._tryToOpenDialog.onOpened&&this._tryToOpenDialog.onOpened(i,n),this._tryToOpenDialog=void 0):i||(n.active=!1,this._dialogCache[t]={name:t,node:n}),e&&e(i)}.bind(this),!1))},openDialog:function(t,e,i){if(!t||""==t)return cc.error("can not open dialog -> ["+t+"]"),void(i&&i(!0));if(this._dialogParams=e,this._sceneDialog[t]){if(this._hasDialogInStack(t))return cc.error("scene dialog can not open twice, use prefab dialog or close the dialogs above the scence dialog"),void(i&&i(!0));var n=this._sceneDialog[t];return n.zIndex=s.DIALOG_Z_ORDER,n.active=!0,this._pushDialogToStack(t,n),void(i&&i(!1,n))}if(this._dialogCache[t]){var o=this._dialogCache[t];return delete this._dialogCache[t],o.node.setPosition(cc.winSize.width/2,cc.winSize.height/2),o.node.zIndex=s.DIALOG_Z_ORDER,o.node.active=!0,this._pushDialogToStack(t,o.node),void(i&&i(!1,o.node))}this._preloadingDialog[t]?this._tryToOpenDialog={name:t,onOpened:i}:this._loadDialog(t,function(e,n){this._pushDialogToStack(t,n),i&&i(e,n)}.bind(this))},onDialogClosed:function(t,e){var i=this._dialogStack.length,n=i-1;for(n=i-1;n>=0;n--){var o=this._dialogStack[n];if(o.name===t&&o.node===e){this._dialogStack.splice(n,1),this._sceneDialog[t]?o.node.active=!1:(o.node.zIndex=s.DIALOG_Z_ORDER-1,o.node.active=!1,this._dialogCache[t]?o.node.destroy():this._dialogCache[t]=o);break}}(i=this._dialogStack.length)>0&&(this._dialogStack[i-1].node.zIndex=s.DIALOG_Z_ORDER,this._dialogStack[i-1].node.active=!0)},getCurDialog:function(){var t=this._dialogStack.length;return t>0?this._dialogStack[t-1]:void 0},_pushDialogToStack:function(t,e){var i=this._dialogStack.length,n=e.getComponent("AFDialogBase");if(i>0&&!n.noHideOtherDialog){var o=this._dialogStack[i-1];o.node.zIndex=s.DIALOG_Z_ORDER-1;var r=o.node.getComponent("AFDialogBase");r&&r.noHideBelowDialog||r.isClosing()||(o.node.active=!1)}this._dialogStack.push({name:t,node:e})},_hasDialogInStack:function(t){for(var e=this._dialogStack.length,i=0;i<e;++i){if(this._dialogStack[i].name===t)return!0}return!1}});window.AF.SCENE_PARAMS=function(){return a.instance?a.instance.getCurSceneParams():null},window.AF.DIALOG_PARAMS=function(){return a.instance?a.instance.getCurDialogParams():{}},window.AF.gotoScene=function(t,e,i){if(!a.instance)return null;a.instance.switchScene(t,e,i)},window.AF.setEnableSwitchSceneAnim=function(t){if(!a.instance)return null;a.instance.setEnableSwitchSceneAnim(t)},window.AF.openDialog=function(t,e,i){if(!a.instance)return null;var n={dialogName:t,params:e,onOpened:i};window.AF.EventDispatcher.emit(window.AF.Event.WILL_OPEN_DIALOG,n),n.dialogName&&(cc.log("OpenDialog->",n.dialogName),a.instance.openDialog(n.dialogName,n.params,n.onOpened))},window.AF.preloadDialog=function(t,e){if(!a.instance)return null;a.instance.preloadDialog(t,e)},cc.game.on(cc.game.EVENT_HIDE,function(){console.log("\u6e38\u620f\u5207\u6362\u5230\u540e\u53f0"),n.emit(o.GMAE_ON_HIDE)}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("\u6e38\u620f\u5207\u6362\u5230\u524d\u53f0"),n.emit(o.GAME_ON_SHOW)}),cc._RF.pop()},{"af-config-mgr":"af-config-mgr","af-const":"af-const","af-event":"af-event","af-event-dispatcher":"af-event-dispatcher"}],"af-toast-message-mgr":[function(t,e,i){"use strict";cc._RF.push(e,"0204aispVNOo643M8NaB9iO","af-toast-message-mgr");var n=t("af-event-dispatcher"),o=t("af-event"),s=t("af-const"),r={},a={};r.addStyle=function(t,e){cc.loader.loadRes(e,function(e,i){e?cc.error("can not default toast message style, error:",e):a[t]=i})},r.resetDefaultStyle=function(t){a.default=void 0,t&&this.addStyle("default",t)},r.show=function(t,e,i){t&&(cc.log("Toast->",t),this._msgQueue=this._msgQueue||[],this._msgQueue.push({text:t,duration:e,style:i}),!this._hasMsgShowing&&this._showMessage())},r._showMessage=function(){if(!(this._msgQueue.length<=0)){var t,e=this._msgQueue.shift();t=a[e.style]?a[e.style]:a.default?a.default:a._default_;var i=cc.instantiate(t);i.setPosition(cc.winSize.width/2,cc.winSize.height/2),i.zIndex=s.TOAST_MESSAGE_Z_ORDER;var n=i.getComponent("AFToastMessage");if(n){var o=this;this._hasMsgShowing=!0,n.showMessage(e.text,e.duration,function(){}),setTimeout(function(){o._showMessage(),o._hasMsgShowing=!1},1e3*e.duration),cc.director.getScene().addChild(i)}}},n.once(o.GAME_LOADED,function(){r.addStyle("_default_","framework/prefabs/DefaultToastMessageStyle")}),e.exports=(window.AF=window.AF||{}).ToastMessage=r,cc._RF.pop()},{"af-const":"af-const","af-event":"af-event","af-event-dispatcher":"af-event-dispatcher"}],"af-utils":[function(t,e,i){"use strict";cc._RF.push(e,"3efe0YXqcxBCpCyH1OeMsZo","af-utils");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=t("polyglot"),s=null,r=t("../config/wx/wxShare.js"),a=t("../config/wx/wxVideoAd.js"),c=t("../config/wx/wxBannerAd.js"),h=t("../config/qq/qqShare.js"),l=t("../config/qq/qqVideoAd.js"),f=t("../config/qq/qqBannerAd.js");var u={getSchemeParam:function(t,e){var i=e+"://",n=t.substring(i.length),o={};try{n=decodeURIComponent(n),n=d.util.base64Decode(n),o=JSON.parse(n)}catch(t){}return o},isAllScreen:function(){var t=cc.view.getFrameSize();return(t.width>t.height?t.width/t.height:t.height/t.width)>1.85},isLandscape:function(){var t=cc.view.getFrameSize();return t.width>t.height},guid:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},gotoGameScene:function(t,e){d.gotoScene(t,e)},isZipFile:function(t){return""!==d.util.getZipFilename(t)},getZipFilename:function(t){var e=t.length;return e>4&&t.lastIndexOf(".zip")===e-4?t.substr(0,e-4):""},getFilePath:function(t){var e=t.length,i=t.lastIndexOf("/");return i>=1&&i<e?t.substr(0,i):""},getFramName:function(t){var e=t.length,i=t.lastIndexOf("/");return i>=1&&i<e?t.substr(i+1,e-i-1):""},deepCopy:function(t,e){e=e||{};for(var i in t)t[i]&&"object"===n(t[i])?(t[i].constructor===Array?e[i]=[]:e[i]={},d.util.deepCopy(t[i],e[i])):e[i]=t[i];return e},spliceByChar:function(t,e){for(var i=[];;){var n=t.indexOf(e);if(-1===n)return i.push(Number(t)),i;i.push(Number(t.substr(0,n))),t=t.substr(n+1,t.length-n)}},replaceAToB:function(t,e,i){i=i||"";var n=new RegExp(e,"g");return t.replace(n,i)},parseNums:function(t){return t=d.util.replaceAToB(t,"{"),t=d.util.replaceAToB(t,"}"),d.util.spliceByChar(t,",")},createPrefabNode:function(t){return cc.instantiate(t)},printTime:function(t){var e=(new Date).getTime();this.lastTime?console.log(t,": ",e," [",e-this.lastTime,"]"):console.log(t,": ",e),this.lastTime=e},getCurrTime:function(){return(new Date).getTime()},getCurrTimeOfSecond:function(){return Math.round(this.getCurrTime()/1e3)},queryObject:function(t){return d.GameData.setMyObject(t,!1),d.EventDispatcher.emit(d.Event.QUERY_OBJECT,t),d.GameData.getMyObject(t)},getMinAndSec:function(t){for(var e=0;t>=60;)e+=1,t-=60;var i="";return e<10&&(i+="0"),i+=cc.js.formatStr("%d",e),i+=":",t<10&&(i+="0"),i+=cc.js.formatStr("%d",t)},formatNumber:function(t){var e="";(t=Math.floor(t))<0&&(e="-"),t=Math.abs(t);var i=Number(t).toString(),n="",o="",s="";return i.length>=7?(n="M",o=i.substring(0,i.length-6),s=i.substring(i.length-6,i.length-4)):i.length>=5?(n="K",o=i.substring(0,i.length-3),s=i.substring(i.length-3,i.length-2)):o=i,""!=s&&(o=o+"."+s),o=e+o,o+=n},formatPastTime:function(t){return t>2592e3?Math.floor(t/2592e3)+"\u6708":t>86400?Math.floor(t/86400)+"\u5929":t>3600?Math.floor(t/3600)+"\u5c0f\u65f6":t>60?Math.floor(t/60)+"\u5206\u949f":t>0?t+"\u79d2":t<0?1+Math.floor(58*Math.random())+"\u79d2":void 0},formatTimeToHHMMSS:function(t){if(t>86400)return Math.floor(t/86400)+"\u5929";var e,i=0,n=0;return e=Math.floor(t%60),(i=Math.floor(t/60))>60&&(i=Math.floor(i%60),n=Math.floor(t/3600)),("00"+n).slice(-2)+":"+("00"+i).slice(-2)+":"+("00"+e).slice(-2)},GetRequest:function(){var t={};if(!cc.sys.isNative){var e=location.search;if(t.href=window.location.href,e&&-1!=e.indexOf("?"))for(var i=e.substr(1).split("&"),n=0;n<i.length;n++)t[i[n].split("=")[0]]=i[n].split("=")[1]}return t},openDialogOnce:function(t,e,i){d.GameData.getDialogOnce(t)+1e3>d.util.getCurrTime()?i&&i():(d.GameData.setDialogOnce(t),d.openDialog(t,e,function(t,e){i&&i()}))},sortFunc:function(t,e){for(var i=0;i<t.length-1;i++)for(var n=0;n<t.length-i-1;n++)if(t[n][e]<t[n+1][e]){var o=t[n];t[n]=t[n+1],t[n+1]=o}},cutstr:function(t,e){var i,n=0,o=new String;i=t.length;for(var s=0;s<i;s++){var r=t.charAt(s);if(n++,escape(r).length>4&&n++,o=o.concat(r),n>=e)return s<i-1&&(o=o.concat("...")),o}if(n<e)return t},isShareOpen:function(){var t=d.platform.getSrc();return"wx"==t?!d.platform.isWxApp()||r:"qq"==t&&(!d.platform.isQQApp()||h)},isBannerAdOpen:function(){return d.platform.isWxPhone()?c:!!d.platform.isQQApp()&&f},getAdQuery:function(t){var e=[];for(var i in t)e.push(i+"="+t[i]);return e.join("&")},showUserInfoButton:function(t,e,i,n,o){if(d.platform.isWxApp()){var s=d.platform.getSystemInfo();d.wxHelper.showInfoButton(Math.floor(t/cc.winSize.width*s.windowWidth),Math.floor(e/cc.winSize.height*s.windowHeight),Math.floor(i/cc.winSize.width*s.windowWidth),Math.floor(n/cc.winSize.height*s.windowHeight),o)}},hideUserInfoButton:function(){d.platform.isWxApp()&&d.wxHelper.hideInfoButton()},shareAppMessage:function(t,e,i,n,o,s){if(d.util.isShareOpen()){d.LOADING_LAYER();var r=d.util.getUserInfo();n=Object.assign({sharerOpenId:r.openId,sharerNickName:r.nickName,sharerAvatarUrl:r.avatarUrl},n);var a={type:o||"share",data:JSON.stringify(n)},c=d.util.getAdQuery(a);if(d.platform.isWxPhone()){var h,l=d.wxHelper.shareAppMessage(t,c);return l<=0?void u():void(h=setInterval(function(){var t=d.wxHelper.getShareStatus(l);return console.log("\u5fae\u4fe1\u5206\u4eab\u7ed3\u679cstatus = ",t,1==t?"\u6210\u529f":"\u5931\u8d25"),-1==t?(clearInterval(h),void u()):1==t?(clearInterval(h),void f()):2==t?(clearInterval(h),void u()):void 0},1e3))}d.platform.isQQApp()&&d.qqHelper.shareAppMessage(t,f,u,c,s),d.Random.getChance(50)?setTimeout(function(){f()},1e3):setTimeout(function(){u()},1e3)}else i&&i();function f(){e&&e("success"),d.CLOSE_LOADING_LAYER()}function u(){i&&i(),d.CLOSE_LOADING_LAYER()}},isVideoAdOpen:function(){return!d.platform.isWxApp()&&!d.platform.isQQApp()||(d.platform.isWxPhone()?a:!!d.platform.isQQApp()&&l)},showVideoAd:function(t,e){function i(t){e&&e(t)}d.platform.isWxApp()||d.platform.isQQApp()?d.util.isVideoAdLoaded()?d.platform.isWxPhone()?d.wxHelper.showVideoAd(t,i):d.platform.isQQApp()&&d.qqHelper.showVideoAd(i):e&&e(!1):d.Random.getChance(50)?e&&e(!0):e&&e(!1)},isVideoAdLoaded:function(t){return!d.platform.isWxApp()&&!d.platform.isQQApp()||(d.platform.isWxPhone()?d.wxHelper.isVideoAdLoaded(t):!!d.platform.isQQApp()&&d.qqHelper.isVideoAdLoaded())},showBannerAd:function(t){var e;d.util.isBannerAdOpen()&&(d.platform.isQQApp()?d.qqHelper.showBannerAd():d.platform.isWxPhone()&&d.wxHelper.createBannerAd(t)&&(e=setInterval(function(){var i=d.wxHelper.getBannerAdHeight(t);i<=0||(clearInterval(e),d.wxHelper.moveBannerAd(t,i))},1e3)))},hideBannerAd:function(t){d.platform.isWxPhone()?d.wxHelper.hideBannerAd(t):d.platform.isQQApp()&&d.qqHelper.hideBannerAd()},upScore:function(t){d.platform.isWxApp()?d.wxHelper.upScore(t):d.platform.isQQApp()&&d.qqHelper.upScore(t)},postMessage:function(t,e){d.platform.isWxApp()&&d.wxHelper.postMessage(t,e)},getRankList:function(t){if(d.platform.isWxApp());else{if(d.platform.isQQApp())return d.qqHelper.getRankList(t);for(var e=["\u9001\u821f\u884c","\u72c2\u5954\u8717\u725b","\u732e\u4e16\u793c","\u5eb8\u989c","\u8fdd\u5fc3","\u2198\u9501\u82af\u30e9","\u679d\u6860","\u5b9e\u4e60\u751f","\u534a\u887e\u68a6","\u821f\u9065\u5ba2","\u66f8\u751f","\u6ee1\u6800","\u906e\u4e91\u58d1","\u6795\u82b1\u7720","\u6697\u4e2d","\u76d7\u7434","\u4f5e\u81e3","\u4e16\u4f5b","\u5b64\u51eb","\u4e09\u751f\u8def","\u8d60\u4f73\u671f"],i=[],n=Math.ceil(20*Math.random()),o=Math.floor(n*Math.random()),s=1;s<=n;s++){var r={url:"https://res.pixel08.com/robot/"+(100+s)+".jpg",nick:e[s],score:5+100*(s-1),selfFlag:!1};i.push(r)}i[o].selfFlag=!0,t&&t(i.reverse())}},getMyUserInfo:function(){var t={};return d.platform.isQQApp()&&(t.qq=d.qqHelper.getUserInfo()),t},setButtonInteractable:function(t,e,i){for(var n=t.getComponentsInChildren(cc.Button),o=0;o<n.length;o++)i&&i===n[o]||(n[o].interactable=e)},checkShareMsg:function(t){return"exceedTheLimit"===t?(d.ToastMessage.show("\u3010\u540c\u4e00\u4e2a\u7fa4\u4e00\u5929\u53ea\u80fd\u5206\u4eab\u4e00\u6b21\u3011"),!1):"notGroup"===t?(d.ToastMessage.show("\u3010\u5206\u4eab\u5230\u7fa4\u540e\u89e3\u9501\u3011"),!1):"exceedTheDayLimit"!==t||(d.ToastMessage.show("\u3010\u4eca\u5929\u7684\u5206\u4eab\u989d\u5ea6\u5df2\u7ecf\u7528\u5b8c\uff01\u3011"),!1)},getText:function(t,e,i){return s||function(t){t&&(s?s.replace(t):s=new o({phrases:t,allowMissing:!0}))}(d.GameConfig.getTextData()),s.has(t)?s.t(t,e):i||""},getStorage:function(t){return d.platform.isWxApp()?d.wxHelper.getStorage(t):d.platform.isQQApp()?d.qqHelper.getStorage(t):cc.sys.localStorage.getItem(t)},setStorage:function(t,e){d.platform.isWxApp()?d.wxHelper.setStorage(t,e):d.platform.isQQApp()?d.qqHelper.setStorage(t,e):cc.sys.localStorage.setItem(t,e)},setClipboardData:function(t){d.platform.isWxApp()&&d.wxHelper.setClipboardData(t)},requestServerApi:function(t,e,i,n){t=t||"",e=e||{};var o=d.platform.getApiUrl();o+=t,e.ts=(new Date).getTime();var s={};s.url=o,s.data=e,s.success=i,s.fail=n,d.platform.isWxApp()?d.wxHelper.request(s):d.http.get(s.url,s.data,function(t,e,i){i?s.success&&s.success({data:e,statusCode:i}):s.fail&&s.fail({data:e,statusCode:i})})},getMoveTime:function(t,e,i){if(0===t)return 0;if(0===i)return 0===e?0:Math.abs(t/e);if(e*e+2*i*t<0)return NaN;var n=(-e+Math.sqrt(e*e+2*i*t))/i,o=(-e-Math.sqrt(e*e+2*i*t))/i;return n<0&&o<0?NaN:n>0&&o>0?Math.min(n,o):Math.max(n,o)},getDestination:function(t,e,i,n){return t+e*n+.5*i*n*n},login:function(t,e){var i=d.util.guid();d.platform.isWxApp()?d.wxHelper.login(t,e):d.platform.isQQApp()?(i=GameStatusInfo.openId,d.util.setStorage("openId",i),t(i)):(d.util.setStorage("webOpenId",i),t(i))},getUserInfo:function(){return d.platform.isWxApp()?d.wxHelper.getUserInfo():d.platform.isQQApp()?d.qqHelper.getUserInfo():{openId:d.util.getStorage("webOpenId")||"",nickName:d.util.getStorage("webNickName")||"",avatarUrl:d.util.getStorage("webAvatarUrl")||""}},getShareUserInfo:function(t){var e=d.util.getShareInfo();e?d.platform.isWxApp()?(e=d.wxHelper.getShareInfo(),t(null,e)):d.platform.isQQApp()?d.qqHelper.getAvatarUrl(openId,function(i,n){i===e.sharerOpenId?(e.shareravatarurl=n,sharerNickName?t(null,e):d.qqHelper.getNickName(i,function(i,n){i===e.sharerOpenId?(e.sharerNickName=n,t(null,e)):t("Sharer nickName is null!",e)})):t("Sharer avatarurl is null!",e)}):t(null,e):t("Sharer information is null!",e)},getShareInfo:function(){return d.platform.isWxApp()?d.wxHelper.getShareInfo():d.platform.isQQApp()?d.qqHelper.getShareInfo():null},getMusicUrl:function(t){var e="sfx/music/"+t+".mp3";return d.util.isLocalFileExist(e)?d.util.getLocalFilePath(e):d.util.getRemoteUrl(e)},getSoundUrl:function(t){var e="sfx/sound/"+t+".mp3";return d.util.isLocalFileExist(e)?d.util.getLocalFilePath(e):d.util.getRemoteUrl(e)},isSoundExist:function(t){var e="sfx/sound/"+t+".mp3";return d.util.isLocalFileExist(e)},getRemoteUrl:function(t){var e=d.platform.getCdnUrl()+"remote/"+t;return e+="?ts="+(new Date).getTime()},isLocalFileExist:function(t){return d.util.isLocalFileExist2("remote/"+t)},isLocalFileExist2:function(t){var e=d.util.getLocalFilePath2(t);if(d.platform.isWxApp()){var i=wx.getFileSystemManager(),n=!1;try{n=!i.accessSync(e)}catch(t){console.log("isLocalFileExist2 err ",t),n=!1}return n}return!!d.platform.isQQApp()&&BK.fileSystem.accessSync(e)},getLocalFilePath:function(t){return d.util.getLocalFilePath2("remote/"+t)},getLocalFilePath2:function(t){return d.platform.isWxApp()?wx.env.USER_DATA_PATH+"/"+t:d.platform.isQQApp()?"GameSandBox://"+t:t},makesureLocalPath:function(t){return t="remote/"+t,d.util.makesureLocalPath2(t)},makesureLocalPath2:function(t){if(t.length<=1)return!0;var e=t.lastIndexOf("/");if(e<0||e>=t.length)return!0;function i(t){if(!d.util.isLocalFileExist2(t)){var e=d.util.getLocalFilePath2(t);if(d.platform.isWxApp())try{wx.getFileSystemManager().mkdirSync(e,!0)}catch(t){console.log("mkDir:",t)}else d.platform.isQQApp()&&BK.fileSystem.makeDirSync(e)}return d.util.isLocalFileExist2(t)}for(var n=t.substr(0,e).split("/"),o="",s=0;s<n.length;s++)if(s>0&&(o+="/"),!i(o+=n[s]))return!1;return!0},saveLocalFile:function(t,e){d.platform.isWxApp()?wx.getFileSystemManager().saveFileSync(t,e):d.platform.isQQApp()&&BK.fileSystem.copyFileSync(t,e)},copyLocalFile:function(t,e){d.platform.isWxApp()?wx.getFileSystemManager().copyFileSync(t,e):d.platform.isQQApp()&&BK.fileSystem.copyFileSync(t,e)},checkShareGift:function(){var t=d.util.getShareInfo();if(console.log("\u5206\u4eab\u4fe1\u606f111",JSON.stringify(t||{})),t&&t.gift){try{t.gift=JSON.parse(t.gift)}catch(t){console.log("\u5206\u4eab\u4fe1\u606fjson\u89e3\u6790\u5931\u8d25")}console.log("\u5206\u4eab\u4fe1\u606f222",JSON.stringify(t.gift||{}));var e=d.GameData.getMyPlayerData();e&&e.giftTag===t.gift.giftTag&&(e.gold?e.gold+=600:e.gold=600,e.giftTag="",d.GameData.savePlayerData(e),d.ToastMessage.show("\u83b7\u53d6\u5206\u4eab\u53cc\u500d\u5956\u52b1\uff0c600\u91d1\u5e01"),d.EventDispatcher.emit("GoldRefresh"))}}},d=window.AF=window.AF||{};d.util=d.util||{},cc.js.mixin(d.util,u),e.exports=u,cc._RF.pop()},{"../config/qq/qqBannerAd.js":"qqBannerAd","../config/qq/qqShare.js":"qqShare","../config/qq/qqVideoAd.js":"qqVideoAd","../config/wx/wxBannerAd.js":"wxBannerAd","../config/wx/wxShare.js":"wxShare","../config/wx/wxVideoAd.js":"wxVideoAd",polyglot:"polyglot"}],"af-wx-helper":[function(t,e,i){"use strict";var n;cc._RF.push(e,"0391fr7FKlEx4lxfRHbhnDk","af-wx-helper");var o,s={power:{adUnitId:"adunit-b8725e85334ae519"},unlock:{adUnitId:"adunit-591765348646c1a1"},openbox:{adUnitId:"adunit-35001cd5627726da"},friend:{adUnitId:"adunit-d3b7efcbbc23a0bb"},castle:{adUnitId:"adunit-feb26727984a74e3"}},r={main:{adUnitId:"adunit-01e7fa530d116c13"},battle:{adUnitId:"adunit-51e4a64bbcb539f8"}};n=e.exports=AF.wxHelper={init:function(t,e){n.lastShareEventId=0,n.userInfo={openId:n.getStorage("wxOpenId"),nickName:n.getStorage("wxNickName")||"\u8981\u4e0a\u5929\u5566\u4f60",avatarUrl:n.getStorage("wxAvatarUrl")||""},n.initShareData(),t&&e&&n.loadAllVideoAds(),wx.showShareMenu({withShareTicket:!0}),wx.onShareAppMessage(function(){return{title:"\u8981\u4e0a\u5929\u5566\u4f60",imageUrl:"http://manager.pixel08.com/api/public/uploads/c8bc86484b28748830bf1a30b43385951534220948325.jpg",query:""}})},initShareData:function(){n.shareData={id:0,status:0,time:0}},onShow:function(t){n.shareData&&n.shareData.id>0&&(0!=n.shareData.status?n.initShareData():(new Date).getTime()>=n.shareData.time+3e3?n.shareData.status=1:n.shareData.status=2);console.log("\u5fae\u4fe1onshowwwwwwww",t.query.type,t.query.data);var e=t.query.type,i=t.query.data;n.setShareInfo(e,i)},onHide:function(t){},getShareInfo:function(){return n.shareInfo},setShareInfo:function(t,e){console.log("\u8bbe\u7f6e\u5206\u4eab\u5185\u5bb9",t,e),n.shareInfo={},t&&e&&(console.log("\u8bbe\u7f6e\u5206\u4eab\u5185\u5bb9",t,e),n.shareInfo[t]=e)},getShareStatus:function(t){return t!=n.shareData.id?-1:n.shareData.status},getStorage:function(t){return wx.getStorageSync(t)},setStorage:function(t,e){wx.setStorageSync(t,e)},setClipboardData:function(t){wx.setClipboardData({data:t})},shareAppMessage:function(t,e){return n.initShareData(),n.lastShareEventId++,n.shareData.id=n.lastShareEventId,n.shareData.status=0,n.shareData.time=(new Date).getTime(),wx.shareAppMessage({title:"\u54c8\u54c8\u54c8",imageUrl:"http://manager.pixel08.com/api/public/uploads/c8bc86484b28748830bf1a30b43385951534220948325.jpg",query:e}),n.shareData.id},createBannerAd:function(t){if(!r[t])return!1;if(r[t].bannerAd)return!0;var e=AF.platform.getSystemInfo(),i=cc.winSize.width;AF.platform.isHairScreen()&&(i=Math.floor(.6*cc.winSize.width));var n=i/cc.winSize.width;return r[t].bannerAd=wx.createBannerAd({adUnitId:r[t].adUnitId,style:{left:0,top:e.windowHeight,width:Math.floor(n*e.windowWidth)}}),r[t].bannerAd.show(),r[t].res=null,r[t].bannerAd.onResize(function(i){r[t].res=i,r[t].bannerAd.style.left=Math.floor((e.windowWidth-i.width)/2)}),!0},hideBannerAd:function(t){r[t]&&r[t].bannerAd&&(r[t].bannerAd.destroy(),r[t].bannerAd=null,r[t].res=null)},moveBannerAd:function(t,e){if(r[t]){var i=AF.platform.getSystemInfo(),n=(cc.winSize.height-e)/cc.winSize.height;r[t].bannerAd&&(r[t].bannerAd.style.top=Math.floor(n*i.windowHeight))}},getBannerAdHeight:function(t){if(!r[t])return 0;if(!r[t].bannerAd)return 0;if(!r[t].res)return 0;var e=AF.platform.getSystemInfo(),i=Math.floor(r[t].res.height/e.windowHeight*cc.winSize.height);return AF.platform.isHairScreen()&&(i+=40),i},showInfoButton:function(t,e,i,s,r){if(console.log("showInfoButton",t,e,i,s),!o){AF.platform.getSystemInfo();(o=wx.createUserInfoButton({type:"text",text:"",style:{left:t,top:e,width:i,height:s,lineHeight:40,backgroundColor:"#ff000000",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4}}))&&o.onTap(function(t){t.userInfo&&(n.userInfo.nickName=t.userInfo.nickName,n.userInfo.avatarUrl=t.userInfo.avatarUrl,n.setStorage("wxNickName",n.userInfo.nickName),n.setStorage("wxAvatarUrl",n.userInfo.avatarUrl),r&&r(n.userInfo))})}},hideInfoButton:function(){o&&(o.destroy(),o=null)},loadAllVideoAds:function(){for(var t in s)n.createVideoAd(t)},createVideoAd:function(t){var e=s[t];e.videoAd||(e.videoAd=wx.createRewardedVideoAd({adUnitId:e.adUnitId}),e.adLoaded=!1,e.videoAd.onLoad(function(){e.adLoaded=!0,console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),e.videoAd.onError(function(t){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff0c\u91cd\u65b0\u52a0\u8f7d"),e.videoAd.load()}))},showVideoAd:function(t,e){if(n.isVideoAdLoaded(t)){AF.audio.onGameEnterBackground();var i=s[t];i.videoAd.onClose(function(t){AF.audio.onGameEnterForeground(),!t||t.isEnded?e(!0):e(!1),i.videoAd.offClose(),i.videoAd.load()}),i.adLoaded=!1,i.videoAd.show()}},isVideoAdLoaded:function(t){return!!s[t]&&!0===s[t].adLoaded},request:function(t){var e,i;wx.request({url:t.url,data:t.data,success:function(t){i=t.statusCode,e=t.data},fail:function(t){i=t.statusCode,e=t.data},complete:function(){e&&200==i?t.success&&t.success({data:e,statusCode:i}):t.fail&&t.fail({data:e,statusCode:i})}})},getUserInfo:function(){return n.userInfo},login:function(t,e,i){wx.login({timeout:1e4,success:function(i){i.code?t&&t(i.code):(console.error("\u767b\u5f55\u5931\u8d25"+err.errMsg),e&&e("\u767b\u5f55\u5931\u8d25"))},fail:function(t){console.error("\u767b\u5f55\u5931\u8d25",t.errMsg),e&&e("\u767b\u5f55\u5931\u8d25")},complete:i})},upScore:function(t){wx.setUserCloudStorage({KVDataList:[{key:"score",value:JSON.stringify(t)}]})},postMessage:function(t,e){wx.getOpenDataContext().postMessage({cmd:t,data:e})}},void 0!==window.wx&&(wx.onShow(function(t){n.onShow(t)}),wx.onHide(function(t){n.onHide(t)})),cc._RF.pop()},{}],"gray.frag":[function(t,e,i){"use strict";cc._RF.push(e,"b5835o7PSdHza4dgTuGdNCw","gray.frag"),e.exports="\n#ifdef GL_ES\nprecision lowp float;\n#endif\n\nvarying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nvoid main()\n{\n    vec4 c = v_fragmentColor * texture2D(CC_Texture0, v_texCoord);\n    gl_FragColor.xyz = vec3(0.2126*c.r + 0.7152*c.g + 0.0722*c.b);\n    gl_FragColor.w = c.w;\n}\n",cc._RF.pop()},{}],"gray.vert":[function(t,e,i){"use strict";cc._RF.push(e,"731a9F87sdIRb2DolsU5Ill","gray.vert"),e.exports="\nattribute vec4 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position = CC_PMatrix * a_position;\n    v_fragmentColor = a_color; \n    v_texCoord = a_texCoord; \n}\n",cc._RF.pop()},{}],platformListener:[function(t,e,i){"use strict";cc._RF.push(e,"d02d0hSfhBM1bRXF67mCWN3","platformListener");var n=t("af-event-dispatcher"),o=t("af-const"),s={};n.on("ShowFriendPassed",function(t){s.FriendPassedView||cc.loader.loadRes("hall/prefabs/platformViews/FriendPassedView",function(e,i){if(!e){var r=cc.instantiate(i);cc.director.getScene().addChild(r),r.zIndex=o.DIALOG_Z_ORDER+1,s.FriendPassedView=r,n.emit("UpdateFriendPassed",t)}})}),n.on("HideFriendPassed",function(){s.FriendPassedView&&(s.FriendPassedView.destroy(),s.FriendPassedView=null),AF.util.postMessage(0,{})}),n.on("ShowBalancePassed",function(t){s.BalancePassedView||cc.loader.loadRes("hall/prefabs/platformViews/BalancePassedView",function(e,i){if(!e){var r=cc.instantiate(i);cc.director.getScene().addChild(r),r.zIndex=o.DIALOG_Z_ORDER+1,s.BalancePassedView=r,n.emit("UpdateBalancePassed",t)}})}),n.on("HideBalancePassed",function(){s.BalancePassedView&&(s.BalancePassedView.destroy(),s.BalancePassedView=null),AF.util.postMessage(0,{})}),cc._RF.pop()},{"af-const":"af-const","af-event-dispatcher":"af-event-dispatcher"}],polyglot:[function(t,e,i){"use strict";cc._RF.push(e,"8cf03Ap10ZJEZHigvWQq5u0","polyglot");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(t,o){"function"==typeof define&&define.amd?define([],function(){return o(t)}):"object"==(void 0===i?"undefined":n(i))?e.exports=o(t):t.Polyglot=o(t)})(void 0,function(t){function e(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||s}function i(t,e,i){var n,s;return null!=i&&t?n=function(t){return t.replace(/^\s+|\s+$/g,"")}((s=t.split(r))[o(e,i)]||s[0]):n=t,n}function o(t,e){return a[function(t){var e=function(t){var e,i,n,o={};for(e in t)if(t.hasOwnProperty(e))for(n in i=t[e])o[i[n]]=e;return o}(c);return e[t]||e.en}(t)](e)}function s(e){t.console&&t.console.warn&&t.console.warn("WARNING: "+e)}e.VERSION="0.4.3",e.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},e.prototype.extend=function(t,e){var i;for(var o in t)t.hasOwnProperty(o)&&(i=t[o],e&&(o=e+"."+o),"object"==(void 0===i?"undefined":n(i))?this.extend(i,o):this.phrases[o]=i)},e.prototype.clear=function(){this.phrases={}},e.prototype.replace=function(t){this.clear(),this.extend(t)},e.prototype.t=function(t,e){var n,o;return"number"==typeof(e=null==e?{}:e)&&(e={smart_count:e}),"string"==typeof this.phrases[t]?n=this.phrases[t]:"string"==typeof e._?n=e._:this.allowMissing?n=t:(this.warn('Missing translation for key: "'+t+'"'),o=t),"string"==typeof n&&(e=function(t){var e={};for(var i in t)e[i]=t[i];return e}(e),o=function(t,e){for(var i in e)"_"!==i&&e.hasOwnProperty(i)&&(t=t.replace(new RegExp("%\\{"+i+"\\}","g"),e[i]));return t}(o=i(n,this.currentLocale,e.smart_count),e)),o},e.prototype.has=function(t){return t in this.phrases};var r="||||",a={chinese:function(t){return 0},german:function(t){return 1!==t?1:0},french:function(t){return t>1?1:0},russian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},c={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return e}),cc._RF.pop()},{}],qqBannerAd:[function(t,e,i){"use strict";cc._RF.push(e,"70d4bxH5ntDJYKxb13TK9LF","qqBannerAd"),e.exports=!0,cc._RF.pop()},{}],qqShare:[function(t,e,i){"use strict";cc._RF.push(e,"150fckBw/xDJaVZJcfyMl+O","qqShare"),e.exports=!0,cc._RF.pop()},{}],qqVideoAd:[function(t,e,i){"use strict";cc._RF.push(e,"70c56DQ9yZKMI+E4uQv/b52","qqVideoAd"),e.exports=!0,cc._RF.pop()},{}],regenerator:[function(t,e,i){(function(t){"use strict";cc._RF.push(e,"baca5DjfHFOvqXAT5AaeGwq","regenerator");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t){var e,n=Object.prototype,o=n.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},r=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function h(t,e,i,n){var o=e&&e.prototype instanceof m?e:m,s=Object.create(o.prototype),r=new I(n||[]);return s._invoke=function(t,e,i){var n=f;return function(o,s){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw s;return T()}for(i.method=o,i.arg=s;;){var r=i.delegate;if(r){var a=_(r,i);if(a){if(a===g)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var c=l(t,e,i);if("normal"===c.type){if(n=i.done?p:u,c.arg===g)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n=p,i.method="throw",i.arg=c.arg)}}}(t,i,r),s}function l(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var f="suspendedStart",u="suspendedYield",d="executing",p="completed",g={};function m(){}function v(){}function y(){}var w={};w[r]=function(){return this};var A=Object.getPrototypeOf,F=A&&A(A(C([])));F&&F!==n&&o.call(F,r)&&(w=F);var S=y.prototype=m.prototype=Object.create(w);function b(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function E(t){var e;this._invoke=function(n,s){function r(){return new Promise(function(e,r){(function e(n,s,r,a){var c=l(t[n],t,s);if("throw"!==c.type){var h=c.arg,f=h.value;return f&&"object"===(void 0===f?"undefined":i(f))&&o.call(f,"__await")?Promise.resolve(f.__await).then(function(t){e("next",t,r,a)},function(t){e("throw",t,r,a)}):Promise.resolve(f).then(function(t){h.value=t,r(h)},function(t){return e("throw",t,r,a)})}a(c.arg)})(n,s,e,r)})}return e=e?e.then(r,r):r()}}function _(t,i){var n=t.iterator[i.method];if(n===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,_(t,i),"throw"===i.method))return g;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=l(n,t.iterator,i.arg);if("throw"===o.type)return i.method="throw",i.arg=o.arg,i.delegate=null,g;var s=o.arg;return s?s.done?(i[t.resultName]=s.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,g):s:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function C(t){if(t){var i=t[r];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function i(){for(;++n<t.length;)if(o.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=e,i.done=!0,i};return s.next=s}}return{next:T}}function T(){return{value:e,done:!0}}return v.prototype=S.constructor=y,y.constructor=v,y[c]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},b(E.prototype),E.prototype[a]=function(){return this},t.AsyncIterator=E,t.async=function(e,i,n,o){var s=new E(h(e,i,n,o));return t.isGeneratorFunction(i)?s:s.next().then(function(t){return t.done?t.value:s.next()})},b(S),S[c]="Generator",S[r]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=C,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var i in this)"t"===i.charAt(0)&&o.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function n(n,o){return a.type="throw",a.arg=t,i.next=n,o&&(i.method="next",i.arg=e),!!o}for(var s=this.tryEntries.length-1;s>=0;--s){var r=this.tryEntries[s],a=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var c=o.call(r,"catchLoc"),h=o.call(r,"finallyLoc");if(c&&h){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var r=s?s.completion:{};return r.type=t,r.arg=e,s?(this.method="next",this.next=s.finallyLoc,g):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),N(i),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var o=n.arg;N(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:C(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}("object"===(void 0===e?"undefined":i(e))?e.exports:{});(function(t){t.regeneratorRuntime||(t.regeneratorRuntime=n)})("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:void 0),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],serverKey:[function(t,e,i){"use strict";cc._RF.push(e,"0dce1vbcyNK9qL3nl/WtrFz","serverKey"),e.exports="",cc._RF.pop()},{}],serverUrl:[function(t,e,i){"use strict";cc._RF.push(e,"ce339+Z6nxEvLv/eu3uRE/l","serverUrl");var n=t("./serverVer.js"),o={test:{src:"wx",api:"https://yangtest.yiziruwo.cn/link/update/api/v"+n.version+"/",cdn:"https://yangtest.yiziruwo.cn/link/update/version/"+n.version+"/"},releaseWX:{src:"wx",api:"https://yangtest.yiziruwo.cn/link/update/api/v"+n.version+"/",cdn:"https://yangtest.yiziruwo.cn/link/update/version/"+n.version+"/"},releaseQQ:{src:"qq",api:"https://yangtest.yiziruwo.cn/link/update/api/v"+n.version+"/",cdn:"https://yangtest.yiziruwo.cn/link/update/version/"+n.version+"/"}};e.exports={getUrls:function(){return o}};cc._RF.pop()},{"./serverVer.js":"serverVer"}],serverVer:[function(t,e,i){"use strict";cc._RF.push(e,"e1bdcGMY/hJ2ZG6/qGJAQMD","serverVer"),e.exports={version:1,hotfix:0,displayVersion:"0.0.1"},cc._RF.pop()},{}],wxBannerAd:[function(t,e,i){"use strict";cc._RF.push(e,"39fa3HQWuJNI42YqtLySl4P","wxBannerAd"),e.exports=!0,cc._RF.pop()},{}],wxShare:[function(t,e,i){"use strict";cc._RF.push(e,"a028ePoTa1KeYIrI4gjLgtt","wxShare"),e.exports=!0,cc._RF.pop()},{}],wxVideoAd:[function(t,e,i){"use strict";cc._RF.push(e,"f39f8CVmsVFka8lX6YssLZT","wxVideoAd"),e.exports=!0,cc._RF.pop()},{}],zh:[function(t,e,i){"use strict";cc._RF.push(e,"d4383Nk7qlElpNftrUA/ZoH","zh"),cc._RF.pop()},{}]},{},["AFList","AFLong","af-event-dispatcher","polyglot","regenerator","qqBannerAd","qqShare","qqVideoAd","serverKey","serverUrl","serverVer","wxBannerAd","wxShare","wxVideoAd","af-const","af-event","af-config-mgr","af-game-config","af-game-data","af-app-base","af-app-launcher","af-asset-loader","af-audio-controller","af-http","af-qq-helper","af-wx-helper","AFDialogBase","AFNetSpriteBase","AFAdJustScale","AFAdjustAllScreen","AFAudioClip","AFBtnSpriteCheck","AFBtnSpriteGray","AFClickWidgetAttach","AFFlipPosDir","AFPlayEffect","af-loading-layer-mgr","af-message-box-mgr","af-notice-mgr","af-scene-mgr","af-toast-message-mgr","AFDiceBoxItem","AFDownloadLayer","AFLoadingAnim","AFLoadingLayer","AFMarqueeNotice","AFMessageBox","AFSwitchSceneAnim","AFToastMessage","AF-shader-utils","af-base64","af-bitmap-font","af-downloader","af-fast-hash","af-frameloader","af-md5","af-netsprite","af-platform","af-random2","af-utils","Hall","platformListener","GameItem","HallBalanceDialog","HallGameDialog","HallGiftDialog","HallRocketDialog","HallWaitingDialog","LinkItem","LoginProgressDialog","BalancePassedView","FriendPassedView","HallBootScene","HallJumpScene","HallLoginScene","HallMainScene","HallPointScene","HallRankScene","EffectPrefab","InReviewXChange","LoadingLayer","LogoAnimation","PhotoPrefab","PlayerPrefab","ProgressBasePrefab","RankComPrefab","RankItemPrefab","SpriteFontPrefab","StonePrefab","UserInfoPrefab","zh","gray.frag","gray.vert"]);