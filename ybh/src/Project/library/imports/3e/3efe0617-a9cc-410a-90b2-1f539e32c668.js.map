{"version":3,"sources":["../../../../../assets/framework/utils/assets/framework/utils/af-utils.js"],"names":["Polyglot","require","polyInst","REMOTE_DIR","wxShareOpen","wxVideoAdOpen","wxBannerAdOpen","qqShareOpen","qqVideoAdOpen","qqBannerAdOpen","initPolyglot","data","replace","phrases","allowMissing","utils","getSchemeParam","url","scheme","prefix","str","substring","length","param","decodeURIComponent","AF","util","base64Decode","JSON","parse","e","isAllScreen","sz","cc","view","getFrameSize","r","width","height","isLandscape","guid","s4","Math","floor","random","toString","gotoGameScene","sceneName","params","gotoScene","isZipFile","filename","getZipFilename","leng","lastIndexOf","substr","getFilePath","index","getFramName","deepCopy","obj","c","key","constructor","Array","spliceByChar","s","nums","i","indexOf","push","Number","replaceAToB","a","b","re","RegExp","parseNums","createPrefabNode","prefab","instantiate","printTime","t","Date","getTime","lastTime","console","log","getCurrTime","getCurrTimeOfSecond","round","queryObject","GameData","setMyObject","EventDispatcher","emit","Event","QUERY_OBJECT","has","getMyObject","getMinAndSec","sec","minute","js","formatStr","formatNumber","value","abs","strValue","suffix","strNum","strDot","formatPastTime","seconds","formatTimeToHHMMSS","ss","mm","hh","slice","GetRequest","theRequest","sys","isNative","location","search","href","window","strs","split","openDialogOnce","name","callback","getDialogOnce","now","setDialogOnce","openDialog","err","node","sortFunc","arr","j","temp","cutstr","len","str_length","str_len","str_cut","String","charAt","escape","concat","isShareOpen","src","platform","getSrc","isWxApp","isQQApp","isBannerAdOpen","isWxPhone","getAdQuery","q","sb","k","join","showUserInfoButton","left","top","cb","systemInfo","getSystemInfo","wxHelper","showInfoButton","winSize","windowWidth","windowHeight","hideUserInfoButton","hideInfoButton","shareAppMessage","scene","success","fail","queryData","type","content","onSuccess","CLOSE_LOADING_LAYER","onFail","simulateShare","Random","getChance","setTimeout","LOADING_LAYER","userInfo","getUserInfo","Object","assign","sharerOpenId","openId","sharerNickName","nickName","sharerAvatarUrl","avatarUrl","query","stringify","queryStr","onFetchShareStatus","status","getShareStatus","eventId","clearInterval","_tickHandle","setInterval","qqHelper","isVideoAdOpen","showVideoAd","tag","finish","isVideoAdLoaded","onFinish","res","showBannerAd","created","createBannerAd","onShowBannerAd","getBannerAdHeight","moveBannerAd","hideBannerAd","upScore","postMessage","cmd","getRankList","rankList","ceil","selfFlag","playerInfo","nick","score","reverse","getMyUserInfo","qq","setButtonInteractable","flag","specialButton","btns","getComponentsInChildren","Button","interactable","checkShareMsg","msg","ToastMessage","show","getText","opt","defaultStr","GameConfig","getTextData","getStorage","localStorage","getItem","setStorage","setItem","setClipboardData","requestServerApi","api","getApiUrl","ts","request","http","get","result","statusCode","getMoveTime","distance","velocity","acceleration","NaN","t1","sqrt","t2","min","max","getDestination","posY","time","login","GameStatusInfo","getShareUserInfo","shareInfo","getShareInfo","getAvatarUrl","getNickName","getMusicUrl","isLocalFileExist","getLocalFilePath","getRemoteUrl","getSoundUrl","isSoundExist","getCdnUrl","isLocalFileExist2","localPath","getLocalFilePath2","fs","wx","getFileSystemManager","ret","accessSync","BK","fileSystem","env","USER_DATA_PATH","makesureLocalPath","makesureLocalPath2","mkDir","path","mkdirSync","makeDirSync","dirPath","dirArr","saveLocalFile","srcFile","dstFile","saveFileSync","copyFileSync","copyLocalFile","checkShareGift","gift","playerData","getMyPlayerData","giftTag","gold","savePlayerData","mixin","module","exports"],"mappings":";;;;;;;;AAAA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;AACA,IAAIC,WAAW,IAAf;;AAEA,IAAMC,aAAa,SAAnB;;AAEA,IAAMC,cAAcH,QAAQ,yBAAR,CAApB;AACA,IAAMI,gBAAgBJ,QAAQ,2BAAR,CAAtB;AACA,IAAMK,iBAAiBL,QAAQ,4BAAR,CAAvB;AACA,IAAMM,cAAcN,QAAQ,yBAAR,CAApB;AACA,IAAMO,gBAAgBP,QAAQ,2BAAR,CAAtB;AACA,IAAMQ,iBAAiBR,QAAQ,4BAAR,CAAvB;;AAEA,SAASS,YAAT,CAAsBC,IAAtB,EAA4B;AACxB,QAAIA,IAAJ,EAAU;AACN,YAAIT,QAAJ,EAAc;AACVA,qBAASU,OAAT,CAAiBD,IAAjB;AACH,SAFD,MAEO;AACHT,uBAAW,IAAIF,QAAJ,CAAa,EAAEa,SAASF,IAAX,EAAiBG,cAAc,IAA/B,EAAb,CAAX;AACH;AACJ;AACJ;;AAED,IAAIC,QAAQ;AACRC,oBAAgB,wBAAUC,GAAV,EAAeC,MAAf,EAAuB;AACnC,YAAIC,SAASD,SAAS,KAAtB;AACA,YAAIE,MAAMH,IAAII,SAAJ,CAAcF,OAAOG,MAArB,CAAV;AACA,YAAIC,QAAQ,EAAZ;AACA,YAAI;AACAH,kBAAMI,mBAAmBJ,GAAnB,CAAN;AACAA,kBAAMK,GAAGC,IAAH,CAAQC,YAAR,CAAqBP,GAArB,CAAN;AACAG,oBAAQK,KAAKC,KAAL,CAAWT,GAAX,CAAR;AACH,SAJD,CAIE,OAAOU,CAAP,EAAU,CAAG;AACf,eAAOP,KAAP;AACH,KAXO;;AAaR;AACAQ,iBAAa,uBAAY;AACrB,YAAIC,KAAKC,GAAGC,IAAH,CAAQC,YAAR,EAAT;AACA,YAAIC,IAAIJ,GAAGK,KAAH,GAAWL,GAAGM,MAAd,GAAuBN,GAAGK,KAAH,GAAWL,GAAGM,MAArC,GAA8CN,GAAGM,MAAH,GAAYN,GAAGK,KAArE;AACA,eAAOD,IAAI,IAAX;AACH,KAlBO;;AAoBRG,iBAAa,uBAAY;AACrB,YAAIP,KAAKC,GAAGC,IAAH,CAAQC,YAAR,EAAT;AACA,eAAOH,GAAGK,KAAH,GAAWL,GAAGM,MAArB;AACH,KAvBO;;AAyBRE,UAAM,gBAAY;AACd,iBAASC,EAAT,GAAc;AACV,mBAAOC,KAAKC,KAAL,CAAW,CAAC,IAAID,KAAKE,MAAL,EAAL,IAAsB,OAAjC,EACFC,QADE,CACO,EADP,EAEFxB,SAFE,CAEQ,CAFR,CAAP;AAGH;AACD,eAAOoB,OAAOA,IAAP,GAAc,GAAd,GAAoBA,IAApB,GAA2B,GAA3B,GAAiCA,IAAjC,GAAwC,GAAxC,GAA8CA,IAA9C,GAAqD,GAArD,GAA2DA,IAA3D,GAAkEA,IAAlE,GAAyEA,IAAhF;AACH,KAhCO;;AAkCRK,mBAAe,uBAAUC,SAAV,EAAqBC,MAArB,EAA6B;AACxCvB,WAAGwB,SAAH,CAAaF,SAAb,EAAwBC,MAAxB;AACH,KApCO;AAqCRE,eAAW,mBAAUC,QAAV,EAAoB;AAC3B,eAAO,OAAO1B,GAAGC,IAAH,CAAQ0B,cAAR,CAAuBD,QAAvB,CAAd;AACH,KAvCO;AAwCRC,oBAAgB,wBAAUD,QAAV,EAAoB;AAChC,YAAIE,OAAOF,SAAS7B,MAApB;AACA,YAAI+B,OAAO,CAAP,IAAYF,SAASG,WAAT,CAAqB,MAArB,MAAiCD,OAAO,CAAxD,EAA2D;AACvD,mBAAOF,SAASI,MAAT,CAAgB,CAAhB,EAAmBF,OAAO,CAA1B,CAAP;AACH,SAFD,MAEO;AACH,mBAAO,EAAP;AACH;AACJ,KA/CO;AAgDRG,iBAAa,qBAAUL,QAAV,EAAoB;AAC7B,YAAIE,OAAOF,SAAS7B,MAApB;AACA,YAAImC,QAAQN,SAASG,WAAT,CAAqB,GAArB,CAAZ;AACA,YAAIG,SAAS,CAAT,IAAcA,QAAQJ,IAA1B,EAAgC;AAC5B,mBAAOF,SAASI,MAAT,CAAgB,CAAhB,EAAmBE,KAAnB,CAAP;AACH,SAFD,MAEO;AACH,mBAAO,EAAP;AACH;AACJ,KAxDO;AAyDRC,iBAAa,qBAAUP,QAAV,EAAoB;AAC7B,YAAIE,OAAOF,SAAS7B,MAApB;AACA,YAAImC,QAAQN,SAASG,WAAT,CAAqB,GAArB,CAAZ;AACA,YAAIG,SAAS,CAAT,IAAcA,QAAQJ,IAA1B,EAAgC;AAC5B,mBAAOF,SAASI,MAAT,CAAgBE,QAAQ,CAAxB,EAA2BJ,OAAOI,KAAP,GAAe,CAA1C,CAAP;AACH,SAFD,MAEO;AACH,mBAAO,EAAP;AACH;AACJ,KAjEO;AAkERE,cAAU,kBAAUC,GAAV,EAAeC,CAAf,EAAkB;AACxB,YAAIA,IAAIA,KAAK,EAAb;AACA,aAAK,IAAIC,GAAT,IAAgBF,GAAhB,EAAqB;AACjB,gBAAIA,IAAIE,GAAJ,KAAY,QAAOF,IAAIE,GAAJ,CAAP,MAAoB,QAApC,EAA8C;AAC1C,oBAAIF,IAAIE,GAAJ,EAASC,WAAT,KAAyBC,KAA7B,EAAoC;AAChCH,sBAAEC,GAAF,IAAS,EAAT;AACH,iBAFD,MAEO;AACHD,sBAAEC,GAAF,IAAS,EAAT;AACH;AACDrC,mBAAGC,IAAH,CAAQiC,QAAR,CAAiBC,IAAIE,GAAJ,CAAjB,EAA2BD,EAAEC,GAAF,CAA3B;AACH,aAPD,MAOO;AACHD,kBAAEC,GAAF,IAASF,IAAIE,GAAJ,CAAT;AACH;AACJ;AACD,eAAOD,CAAP;AACH,KAjFO;;AAmFRI,kBAAc,sBAAU7C,GAAV,EAAe8C,CAAf,EAAkB;AAC5B,YAAIC,OAAO,EAAX;AACA,eAAO,IAAP,EAAa;AACT,gBAAIC,IAAIhD,IAAIiD,OAAJ,CAAYH,CAAZ,CAAR;AACA,gBAAI,CAAC,CAAD,KAAOE,CAAX,EAAc;AACVD,qBAAKG,IAAL,CAAUC,OAAOnD,GAAP,CAAV;AACA,uBAAO+C,IAAP;AACH;AACDA,iBAAKG,IAAL,CAAUC,OAAOnD,IAAImC,MAAJ,CAAW,CAAX,EAAca,CAAd,CAAP,CAAV;AACAhD,kBAAMA,IAAImC,MAAJ,CAAWa,IAAI,CAAf,EAAkBhD,IAAIE,MAAJ,GAAa8C,CAA/B,CAAN;AACH;AACJ,KA9FO;;AAgGRI,iBAAa,qBAAUpD,GAAV,EAAeqD,CAAf,EAAkBC,CAAlB,EAAqB;AAC9BA,YAAIA,KAAK,EAAT;AACA,YAAIC,KAAK,IAAIC,MAAJ,CAAWH,CAAX,EAAc,GAAd,CAAT;AACA,eAAOrD,IAAIR,OAAJ,CAAY+D,EAAZ,EAAgBD,CAAhB,CAAP;AACH,KApGO;;AAsGRG,eAAW,mBAAUzD,GAAV,EAAe;AAAC;AACvBA,cAAMK,GAAGC,IAAH,CAAQ8C,WAAR,CAAoBpD,GAApB,EAAyB,GAAzB,CAAN;AACAA,cAAMK,GAAGC,IAAH,CAAQ8C,WAAR,CAAoBpD,GAApB,EAAyB,GAAzB,CAAN;AACA,YAAI+C,OAAO1C,GAAGC,IAAH,CAAQuC,YAAR,CAAqB7C,GAArB,EAA0B,GAA1B,CAAX;AACA,eAAO+C,IAAP;AACH,KA3GO;;AA6GRW,sBAAkB,0BAAUC,MAAV,EAAkB;AAChC,eAAO9C,GAAG+C,WAAH,CAAeD,MAAf,CAAP;AACH,KA/GO;;AAiHRE,eAAW,mBAAUnB,GAAV,EAAe;;AAEtB,YAAIoB,IAAK,IAAIC,IAAJ,EAAD,CAAaC,OAAb,EAAR;;AAEA,YAAI,KAAKC,QAAT,EAAmB;AACfC,oBAAQC,GAAR,CAAYzB,GAAZ,EAAiB,IAAjB,EAAuBoB,CAAvB,EAA0B,IAA1B,EAAgCA,IAAI,KAAKG,QAAzC,EAAmD,GAAnD;AACH,SAFD,MAEO;AACHC,oBAAQC,GAAR,CAAYzB,GAAZ,EAAiB,IAAjB,EAAuBoB,CAAvB;AACH;;AAED,aAAKG,QAAL,GAAgBH,CAAhB;AACH,KA5HO;;AA8HRM,iBAAa,uBAAY;AACrB,eAAO,IAAIL,IAAJ,GAAWC,OAAX,EAAP;AACH,KAhIO;;AAkIRK,yBAAqB,+BAAY;AAC7B,eAAO/C,KAAKgD,KAAL,CAAW,KAAKF,WAAL,KAAqB,IAAhC,CAAP;AACH,KApIO;;AAsIRG,iBAAa,qBAAU7B,GAAV,EAAe;AACxBrC,WAAGmE,QAAH,CAAYC,WAAZ,CAAwB/B,GAAxB,EAA6B,KAA7B;;AAEArC,WAAGqE,eAAH,CAAmBC,IAAnB,CAAwBtE,GAAGuE,KAAH,CAASC,YAAjC,EAA+CnC,GAA/C;;AAEA,YAAIoC,MAAMzE,GAAGmE,QAAH,CAAYO,WAAZ,CAAwBrC,GAAxB,CAAV;;AAEA,eAAOoC,GAAP;AACH,KA9IO;;AAgJRE,kBAAc,sBAAUC,GAAV,EAAe;AACzB,YAAIC,SAAS,CAAb;;AAEA,eAAOD,OAAO,EAAd,EAAkB;AACdC,sBAAU,CAAV;AACAD,mBAAO,EAAP;AACH;;AAED,YAAIjF,MAAM,EAAV;;AAEA,YAAIkF,SAAS,EAAb,EAAiB;AACblF,mBAAO,GAAP;AACH;;AAEDA,eAAOa,GAAGsE,EAAH,CAAMC,SAAN,CAAgB,IAAhB,EAAsBF,MAAtB,CAAP;;AAEAlF,eAAO,GAAP;;AAEA,YAAIiF,MAAM,EAAV,EAAc;AACVjF,mBAAO,GAAP;AACH;;AAEDA,eAAOa,GAAGsE,EAAH,CAAMC,SAAN,CAAgB,IAAhB,EAAsBH,GAAtB,CAAP;;AAEA,eAAOjF,GAAP;AACH,KAzKO;;AA2KRqF,kBAAc,sBAAUC,KAAV,EAAiB;;AAE3BA,gBAAQhE,KAAKC,KAAL,CAAW+D,KAAX,CAAR;;AAEA,YAAIvF,SAAS,EAAb;;AAEA,YAAIuF,QAAQ,CAAZ,EAAe;AACXvF,qBAAS,GAAT;AACH;;AAEDuF,gBAAQhE,KAAKiE,GAAL,CAASD,KAAT,CAAR;;AAEA,YAAIE,WAAWrC,OAAOmC,KAAP,EAAc7D,QAAd,EAAf;AACA,YAAIgE,SAAS,EAAb;AACA,YAAIC,SAAS,EAAb;AACA,YAAIC,SAAS,EAAb;;AAEA,YAAIH,SAAStF,MAAT,IAAmB,CAAvB,EAA0B;AACtBuF,qBAAS,GAAT;AACAC,qBAASF,SAASvF,SAAT,CAAmB,CAAnB,EAAsBuF,SAAStF,MAAT,GAAkB,CAAxC,CAAT;AACAyF,qBAASH,SAASvF,SAAT,CAAmBuF,SAAStF,MAAT,GAAkB,CAArC,EAAwCsF,SAAStF,MAAT,GAAkB,CAA1D,CAAT;AACH,SAJD,MAIO,IAAIsF,SAAStF,MAAT,IAAmB,CAAvB,EAA0B;AAC7BuF,qBAAS,GAAT;AACAC,qBAASF,SAASvF,SAAT,CAAmB,CAAnB,EAAsBuF,SAAStF,MAAT,GAAkB,CAAxC,CAAT;AACAyF,qBAASH,SAASvF,SAAT,CAAmBuF,SAAStF,MAAT,GAAkB,CAArC,EAAwCsF,SAAStF,MAAT,GAAkB,CAA1D,CAAT;AACH,SAJM,MAIA;AACHwF,qBAASF,QAAT;AACH;;AAED,YAAIG,UAAU,EAAd,EAAkB;AACdD,qBAASA,SAAS,GAAT,GAAeC,MAAxB;AACH;;AAEDD,iBAAS3F,SAAS2F,MAAlB;AACAA,iBAASA,SAASD,MAAlB;;AAEA,eAAOC,MAAP;AACH,KAhNO;;AAkNR;AACAE,oBAAgB,wBAAUC,OAAV,EAAmB;AAC/B,YAAIA,UAAU,KAAK,EAAL,GAAU,EAAV,GAAe,EAA7B,EAAiC;AAC7B,mBAAOvE,KAAKC,KAAL,CAAWsE,WAAW,KAAK,EAAL,GAAU,EAAV,GAAe,EAA1B,CAAX,IAA4C,GAAnD;AACH;AACD,YAAIA,UAAU,KAAK,EAAL,GAAU,EAAxB,EAA4B;AACxB,mBAAOvE,KAAKC,KAAL,CAAWsE,WAAW,KAAK,EAAL,GAAU,EAArB,CAAX,IAAuC,GAA9C;AACH;AACD,YAAIA,UAAU,KAAK,EAAnB,EAAuB;AACnB,mBAAOvE,KAAKC,KAAL,CAAWsE,WAAW,KAAK,EAAhB,CAAX,IAAkC,IAAzC;AACH;AACD,YAAIA,UAAU,EAAd,EAAkB;AACd,mBAAOvE,KAAKC,KAAL,CAAWsE,UAAU,EAArB,IAA2B,IAAlC;AAEH;AACD,YAAIA,UAAU,CAAd,EAAiB;AACb,mBAAOA,UAAU,GAAjB;AACH;AACD,YAAIA,UAAU,CAAd,EAAiB;AACb,mBAAQ,IAAIvE,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgB,EAA3B,CAAL,GAAuC,GAA9C;AACH;AACJ,KAvOO;;AAyOR;AACAsE,wBAAoB,4BAAUD,OAAV,EAAmB;AACnC,YAAIA,UAAU,KAAK,EAAL,GAAU,EAAxB,EAA4B;AACxB,mBAAOvE,KAAKC,KAAL,CAAWsE,WAAW,KAAK,EAAL,GAAU,EAArB,CAAX,IAAuC,GAA9C;AACH;AACD,YAAIE,KAAK,CAAT;AACA,YAAIC,KAAK,CAAT;AACA,YAAIC,KAAK,CAAT;AACAF,aAAKzE,KAAKC,KAAL,CAAWsE,UAAU,EAArB,CAAL;AACAG,aAAK1E,KAAKC,KAAL,CAAWsE,UAAU,EAArB,CAAL;AACA,YAAIG,KAAK,EAAT,EAAa;AACTA,iBAAK1E,KAAKC,KAAL,CAAWyE,KAAK,EAAhB,CAAL;AACAC,iBAAK3E,KAAKC,KAAL,CAAWsE,WAAW,KAAK,EAAhB,CAAX,CAAL;AACH;;AAED,eAAO,CAAC,OAAOI,EAAR,EAAYC,KAAZ,CAAkB,CAAC,CAAnB,IAAwB,GAAxB,GAA8B,CAAC,OAAOF,EAAR,EAAYE,KAAZ,CAAkB,CAAC,CAAnB,CAA9B,GAAsD,GAAtD,GAA4D,CAAC,OAAOH,EAAR,EAAYG,KAAZ,CAAkB,CAAC,CAAnB,CAAnE;AACH,KAzPO;AA0PRC,gBAAY,sBAAY;AACpB,YAAIC,aAAa,EAAjB;AACA,YAAI,CAACvF,GAAGwF,GAAH,CAAOC,QAAZ,EAAsB;AAClB,gBAAIzG,MAAM0G,SAASC,MAAnB,CADkB,CACS;AAC3BJ,uBAAWK,IAAX,GAAkBC,OAAOH,QAAP,CAAgBE,IAAlC;;AAEA,gBAAI5G,OAAOA,IAAIoD,OAAJ,CAAY,GAAZ,KAAoB,CAAC,CAAhC,EAAmC;AAC/B,oBAAIjD,MAAMH,IAAIsC,MAAJ,CAAW,CAAX,CAAV;AACA,oBAAIwE,OAAO3G,IAAI4G,KAAJ,CAAU,GAAV,CAAX;AACA,qBAAK,IAAI5D,IAAI,CAAb,EAAgBA,IAAI2D,KAAKzG,MAAzB,EAAiC8C,GAAjC,EAAsC;AAClCoD,+BAAWO,KAAK3D,CAAL,EAAQ4D,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAX,IAAoCD,KAAK3D,CAAL,EAAQ4D,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAApC;AACH;AACJ;AACJ;AACD,eAAOR,UAAP;AACH,KAzQO;;AA2QRS,oBAAgB,wBAAUC,IAAV,EAAgBlF,MAAhB,EAAwBmF,QAAxB,EAAkC;AAC9C,YAAIzB,QAAQjF,GAAGmE,QAAH,CAAYwC,aAAZ,CAA0BF,IAA1B,CAAZ;AACA,YAAIG,MAAM5G,GAAGC,IAAH,CAAQ8D,WAAR,EAAV;;AAEA,YAAIkB,QAAQ,IAAR,GAAe2B,GAAnB,EAAwB;AACpB,gBAAIF,QAAJ,EAAc;AACVA;AACH;AACD;AACH;;AAED1G,WAAGmE,QAAH,CAAY0C,aAAZ,CAA0BJ,IAA1B;;AAEAzG,WAAG8G,UAAH,CAAcL,IAAd,EAAoBlF,MAApB,EAA4B,UAAUwF,GAAV,EAAeC,IAAf,EAAqB;AAC7CN,wBAAYA,UAAZ;AACH,SAFD;AAGH,KA3RO;;AA6RRO,cAAU,kBAAUC,GAAV,EAAe7E,GAAf,EAAoB;AAC1B,aAAK,IAAIM,IAAI,CAAb,EAAgBA,IAAIuE,IAAIrH,MAAJ,GAAa,CAAjC,EAAoC8C,GAApC,EAAyC;AACrC,iBAAK,IAAIwE,IAAI,CAAb,EAAgBA,IAAID,IAAIrH,MAAJ,GAAa8C,CAAb,GAAiB,CAArC,EAAwCwE,GAAxC,EAA6C;AACzC;AACA,oBAAID,IAAIC,CAAJ,EAAO9E,GAAP,IAAc6E,IAAIC,IAAI,CAAR,EAAW9E,GAAX,CAAlB,EAAmC;AAC/B,wBAAI+E,OAAOF,IAAIC,CAAJ,CAAX;AACAD,wBAAIC,CAAJ,IAASD,IAAIC,IAAI,CAAR,CAAT;AACAD,wBAAIC,IAAI,CAAR,IAAaC,IAAb;AACH;AACJ;AACJ;AACJ,KAxSO;;AA0SRC,YAAQ,gBAAU1H,GAAV,EAAe2H,GAAf,EAAoB;AACxB,YAAIC,aAAa,CAAjB;AACA,YAAIC,UAAU,CAAd;AACA,YAAIC,UAAU,IAAIC,MAAJ,EAAd;AACAF,kBAAU7H,IAAIE,MAAd;AACA,aAAK,IAAI8C,IAAI,CAAb,EAAgBA,IAAI6E,OAApB,EAA6B7E,GAA7B,EAAkC;AAC9B,gBAAIK,IAAIrD,IAAIgI,MAAJ,CAAWhF,CAAX,CAAR;AACA4E;AACA,gBAAIK,OAAO5E,CAAP,EAAUnD,MAAV,GAAmB,CAAvB,EAA0B;AACtB;AACA0H;AACH;AACDE,sBAAUA,QAAQI,MAAR,CAAe7E,CAAf,CAAV;AACA,gBAAIuE,cAAcD,GAAlB,EAAuB;AACnB,oBAAI3E,IAAI6E,UAAU,CAAlB,EAAqB;AACjBC,8BAAUA,QAAQI,MAAR,CAAe,KAAf,CAAV;AACH;AACD,uBAAOJ,OAAP;AACH;AACJ;AACD;AACA,YAAIF,aAAaD,GAAjB,EAAsB;AAClB,mBAAO3H,GAAP;AACH;AACJ,KAlUO;;AAoURmI,iBAAa,uBAAY;AACrB;AACA,YAAIC,MAAM/H,GAAGgI,QAAH,CAAYC,MAAZ,EAAV;;AAEA,YAAIF,OAAO,IAAX,EAAiB;AACb,gBAAI/H,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvB,uBAAOvJ,WAAP;AACH,aAFD,MAGK;AACD;AACA,uBAAO,IAAP;AACH;AACJ,SARD,MAQO,IAAIoJ,OAAO,IAAX,EAAiB;AACpB,gBAAI/H,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AACvB,uBAAOrJ,WAAP;AACH,aAFD,MAGK;AACD;AACA,uBAAO,IAAP;AACH;AACJ,SARM,MAQA;AACH,mBAAO,KAAP;AACH;AACJ,KA3VO;;AA6VRsJ,oBAAgB,0BAAY;AACxB,YAAIpI,GAAGgI,QAAH,CAAYK,SAAZ,EAAJ,EAA6B;AACzB,mBAAOxJ,cAAP;AACH,SAFD,MAGK,IAAImB,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC5B,mBAAOnJ,cAAP;AACH;;AAED,eAAO,KAAP;AACH,KAtWO;;AAwWRsJ,cAxWQ,sBAwWGC,CAxWH,EAwWM;AACV,YAAIC,KAAK,EAAT;AACA,aAAK,IAAIC,CAAT,IAAcF,CAAd,EAAiB;AACbC,eAAG3F,IAAH,CAAQ4F,IAAI,GAAJ,GAAUF,EAAEE,CAAF,CAAlB;AACH;AACD,eAAOD,GAAGE,IAAH,CAAQ,GAAR,CAAP;AACH,KA9WO;;;AAgXRC,wBAAoB,4BAAUC,IAAV,EAAgBC,GAAhB,EAAqBjI,KAArB,EAA4BC,MAA5B,EAAoCiI,EAApC,EAAwC;AACxD,YAAI9I,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvB,gBAAIa,aAAa/I,GAAGgI,QAAH,CAAYgB,aAAZ,EAAjB;AACAhJ,eAAGiJ,QAAH,CAAYC,cAAZ,CACIjI,KAAKC,KAAL,CAAY0H,OAAOpI,GAAG2I,OAAH,CAAWvI,KAAnB,GAA4BmI,WAAWK,WAAlD,CADJ,EAEInI,KAAKC,KAAL,CAAY2H,MAAMrI,GAAG2I,OAAH,CAAWtI,MAAlB,GAA4BkI,WAAWM,YAAlD,CAFJ,EAGIpI,KAAKC,KAAL,CAAYN,QAAQJ,GAAG2I,OAAH,CAAWvI,KAApB,GAA6BmI,WAAWK,WAAnD,CAHJ,EAIInI,KAAKC,KAAL,CAAYL,SAASL,GAAG2I,OAAH,CAAWtI,MAArB,GAA+BkI,WAAWM,YAArD,CAJJ,EAKIP,EALJ;AAOH;AACJ,KA3XO;;AA6XRQ,wBAAoB,8BAAY;AAC5B,YAAItJ,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvBlI,eAAGiJ,QAAH,CAAYM,cAAZ;AACH;AACJ,KAjYO;;AAmYR;AACAC,qBAAiB,yBAAUC,KAAV,EAAiBC,OAAjB,EAA0BC,IAA1B,EAAgCC,SAAhC,EAA2CC,IAA3C,EAAiDC,OAAjD,EAA0D;AACvE,YAAI,CAAC9J,GAAGC,IAAH,CAAQ6H,WAAR,EAAL,EAA4B;AACxB6B,oBAAQA,MAAR;AACA;AACH;;AAED,iBAASI,SAAT,GAAqB;AACjBL,uBAAWA,QAAQ,SAAR,CAAX;AACA1J,eAAGgK,mBAAH;AACH;;AAED,iBAASC,MAAT,GAAkB;AACdN,oBAAQA,MAAR;AACA3J,eAAGgK,mBAAH;AACH;;AAED,iBAASE,aAAT,GAAyB;AACrB,gBAAIlK,GAAGmK,MAAH,CAAUC,SAAV,CAAoB,EAApB,CAAJ,EAA6B;AACzBC,2BAAW,YAAM;AACbN;AACH,iBAFD,EAEG,IAFH;AAGH,aAJD,MAIO;AACHM,2BAAW,YAAM;AACbJ;AACH,iBAFD,EAEG,IAFH;AAGH;AACJ;;AAEDjK,WAAGsK,aAAH;AACA,YAAIC,WAAWvK,GAAGC,IAAH,CAAQuK,WAAR,EAAf;AACAZ,oBAAYa,OAAOC,MAAP,CAAc;AACtBC,0BAAcJ,SAASK,MADD;AAEtBC,4BAAgBN,SAASO,QAFH;AAGtBC,6BAAiBR,SAASS;AAHJ,SAAd,EAITpB,SAJS,CAAZ;AAKA,YAAIqB,QAAQ;AACRpB,kBAAMA,QAAQ,OADN;AAER3K,kBAAMiB,KAAK+K,SAAL,CAAetB,SAAf;AAFE,SAAZ;AAIA,YAAIuB,WAAWnL,GAAGC,IAAH,CAAQqI,UAAR,CAAmB2C,KAAnB,CAAf;AACA,YAAIjL,GAAGgI,QAAH,CAAYK,SAAZ,EAAJ,EAA6B;AAAA,gBAUhB+C,kBAVgB,GAUzB,SAASA,kBAAT,GAA8B;AAC1B,oBAAIC,SAASrL,GAAGiJ,QAAH,CAAYqC,cAAZ,CAA2BC,OAA3B,CAAb;AACA1H,wBAAQC,GAAR,CAAY,iBAAZ,EAA+BuH,MAA/B,EAAuCA,UAAU,CAAV,GAAc,IAAd,GAAqB,IAA5D;AACA,oBAAIA,UAAU,CAAC,CAAf,EAAkB;AACdG,kCAAcC,WAAd;AACAxB;AACA;AACH;;AAED,oBAAIoB,UAAU,CAAd,EAAiB;AACbG,kCAAcC,WAAd;AACA1B;AACA;AACH;;AAED,oBAAIsB,UAAU,CAAd,EAAiB;AACbG,kCAAcC,WAAd;AACAxB;AACA;AACH;AACJ,aA9BwB;;AACzB,gBAAIsB,UAAUvL,GAAGiJ,QAAH,CAAYO,eAAZ,CAA4BC,KAA5B,EAAmC0B,QAAnC,CAAd;;AAEA,gBAAII,WAAW,CAAf,EAAkB;AACdtB;AACA;AACH;;AAED,gBAAIwB,WAAJ;;AAwBAA,0BAAcC,YAAYN,kBAAZ,EAAgC,IAAhC,CAAd;AACA;AACH,SAlCD,MAkCO,IAAIpL,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9BnI,eAAG2L,QAAH,CAAYnC,eAAZ,CAA4BC,KAA5B,EAAmCM,SAAnC,EAA8CE,MAA9C,EAAsDkB,QAAtD,EAAgErB,OAAhE;AACH;;AAEDI;AACH,KAndO;;AAqdR0B,mBAAe,yBAAY;;AAEvB,YAAI,CAAC5L,GAAGgI,QAAH,CAAYE,OAAZ,EAAD,IAA0B,CAAClI,GAAGgI,QAAH,CAAYG,OAAZ,EAA/B,EAAsD;AAClD,mBAAO,IAAP;AACH;;AAED,YAAInI,GAAGgI,QAAH,CAAYK,SAAZ,EAAJ,EAA6B;AACzB,mBAAOzJ,aAAP;AACH,SAFD,MAEO,IAAIoB,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9B,mBAAOpJ,aAAP;AACH,SAFM,MAEA;AACH,mBAAO,KAAP;AACH;AACJ,KAleO;;AAoeR;AACA8M,iBAAa,qBAAUC,GAAV,EAAeC,MAAf,EAAuB;AAChC,YAAI,CAAC/L,GAAGgI,QAAH,CAAYE,OAAZ,EAAD,IAA0B,CAAClI,GAAGgI,QAAH,CAAYG,OAAZ,EAA/B,EAAsD;AAClD,gBAAInI,GAAGmK,MAAH,CAAUC,SAAV,CAAoB,EAApB,CAAJ,EAA6B;AACzB2B,0BAAUA,OAAO,IAAP,CAAV;AACH,aAFD,MAEO;AACHA,0BAAUA,OAAO,KAAP,CAAV;AACH;;AAED;AACH;;AAED,YAAI,CAAC/L,GAAGC,IAAH,CAAQ+L,eAAR,EAAL,EAAgC;AAC5BD,sBAAUA,OAAO,KAAP,CAAV;AACA;AACH;;AAED,iBAASE,QAAT,CAAkBC,GAAlB,EAAuB;AACnBH,sBAAUA,OAAOG,GAAP,CAAV;AACH;;AAED,YAAIlM,GAAGgI,QAAH,CAAYK,SAAZ,EAAJ,EAA6B;AACzBrI,eAAGiJ,QAAH,CAAY4C,WAAZ,CAAwBC,GAAxB,EAA6BG,QAA7B;AACH,SAFD,MAEO,IAAIjM,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9BnI,eAAG2L,QAAH,CAAYE,WAAZ,CAAwBI,QAAxB;AACH;AACJ,KA9fO;;AAggBRD,qBAAiB,yBAAUF,GAAV,EAAe;;AAE5B,YAAI,CAAC9L,GAAGgI,QAAH,CAAYE,OAAZ,EAAD,IAA0B,CAAClI,GAAGgI,QAAH,CAAYG,OAAZ,EAA/B,EAAsD;AAClD,mBAAO,IAAP;AACH;;AAED,YAAInI,GAAGgI,QAAH,CAAYK,SAAZ,EAAJ,EAA6B;AACzB,mBAAOrI,GAAGiJ,QAAH,CAAY+C,eAAZ,CAA4BF,GAA5B,CAAP;AACH,SAFD,MAEO,IAAI9L,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9B,mBAAOnI,GAAG2L,QAAH,CAAYK,eAAZ,EAAP;AACH;;AAED,eAAO,KAAP;AACH,KA7gBO;;AA+gBR;AACAG,kBAAc,sBAAUL,GAAV,EAAe;AACzB,YAAI,CAAC9L,GAAGC,IAAH,CAAQmI,cAAR,EAAL,EAA+B;AAC3B;AACH;;AAED,YAAIpI,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AACvBnI,eAAG2L,QAAH,CAAYQ,YAAZ;AACA;AACH;;AAED,YAAI,CAACnM,GAAGgI,QAAH,CAAYK,SAAZ,EAAL,EAA8B;AAC1B;AACH;;AAED,YAAI+D,UAAUpM,GAAGiJ,QAAH,CAAYoD,cAAZ,CAA2BP,GAA3B,CAAd;;AAEA,YAAI,CAACM,OAAL,EAAc;AACV;AACH;;AAED,YAAIX,WAAJ;;AAEA,iBAASa,cAAT,GAA0B;AACtB,gBAAIzL,SAASb,GAAGiJ,QAAH,CAAYsD,iBAAZ,CAA8BT,GAA9B,CAAb;;AAEA,gBAAIjL,UAAU,CAAd,EAAiB;AACb;AACH;;AAED2K,0BAAcC,WAAd;;AAEAzL,eAAGiJ,QAAH,CAAYuD,YAAZ,CAAyBV,GAAzB,EAA8BjL,MAA9B;AACH;;AAED4K,sBAAcC,YAAYY,cAAZ,EAA4B,IAA5B,CAAd;AACH,KAnjBO;;AAqjBRG,kBAAc,sBAAUX,GAAV,EAAe;AACzB,YAAI9L,GAAGgI,QAAH,CAAYK,SAAZ,EAAJ,EAA6B;AACzBrI,eAAGiJ,QAAH,CAAYwD,YAAZ,CAAyBX,GAAzB;AACH,SAFD,MAEO,IAAI9L,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9BnI,eAAG2L,QAAH,CAAYc,YAAZ;AACH;AACJ,KA3jBO;;AA6jBRC,aAAS,iBAAUxN,IAAV,EAAgB;AACrB;AACA;AACA;AACA;AACA;AACA,YAAIc,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvBlI,eAAGiJ,QAAH,CAAYyD,OAAZ,CAAoBxN,IAApB;AACH,SAFD,MAEO,IAAIc,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9BnI,eAAG2L,QAAH,CAAYe,OAAZ,CAAoBxN,IAApB;AACH;AACJ,KAxkBO;;AA0kBRyN,iBAAa,qBAAUC,GAAV,EAAe1N,IAAf,EAAqB;AAC9B,YAAIc,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvBlI,eAAGiJ,QAAH,CAAY0D,WAAZ,CAAwBC,GAAxB,EAA6B1N,IAA7B;AACH;AACJ,KA9kBO;;AAglBR2N,iBAAa,qBAAU/D,EAAV,EAAc;AACvB,YAAI9I,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvB;AACH,SAFD,MAEO,IAAIlI,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9B,mBAAOnI,GAAG2L,QAAH,CAAYkB,WAAZ,CAAwB/D,EAAxB,CAAP;AACH,SAFM,MAEA;AACH,gBAAIgC,WAAW,CACX,KADW,EACJ,MADI,EACI,KADJ,EACW,IADX,EACiB,IADjB,EACuB,MADvB,EAC+B,IAD/B,EAEX,KAFW,EAEJ,KAFI,EAEG,KAFH,EAEU,IAFV,EAEgB,IAFhB,EAEsB,KAFtB,EAE6B,KAF7B,EAGX,IAHW,EAGL,IAHK,EAGC,IAHD,EAGO,IAHP,EAGa,IAHb,EAGmB,KAHnB,EAG0B,KAH1B,CAAf;AAKA,gBAAIgC,WAAW,EAAf;AACA,gBAAIjN,SAASoB,KAAK8L,IAAL,CAAU,KAAK9L,KAAKE,MAAL,EAAf,CAAb;AACA,gBAAI6L,WAAW/L,KAAKC,KAAL,CAAWrB,SAASoB,KAAKE,MAAL,EAApB,CAAf;AACA,iBAAK,IAAIwB,IAAI,CAAb,EAAgBA,KAAK9C,MAArB,EAA6B8C,GAA7B,EAAkC;AAC9B,oBAAIsK,aAAa;AACbzN,yBAAK,oCAAoC,MAAMmD,CAA1C,IAA+C,MADvC;AAEbuK,0BAAMpC,SAASnI,CAAT,CAFO;AAGbwK,2BAAO,IAAI,CAACxK,IAAI,CAAL,IAAU,GAHR;AAIbqK,8BAAU;AAJG,iBAAjB;AAMAF,yBAASjK,IAAT,CAAcoK,UAAd;AACH;AACDH,qBAASE,QAAT,EAAmBA,QAAnB,GAA8B,IAA9B;AACAlE,kBAAMA,GAAGgE,SAASM,OAAT,EAAH,CAAN;AACH;AACJ,KA1mBO;;AA4mBRC,mBAAe,yBAAY;AACvB,YAAInO,OAAO,EAAX;;AAEA,YAAIc,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AACvBjJ,iBAAKoO,EAAL,GAAUtN,GAAG2L,QAAH,CAAYnB,WAAZ,EAAV;AACH;;AAED,eAAOtL,IAAP;AACH,KApnBO;;AAsnBRqO,2BAAuB,+BAAUvG,IAAV,EAAgBwG,IAAhB,EAAsBC,aAAtB,EAAqC;AACxD,YAAIC,OAAO1G,KAAK2G,uBAAL,CAA6BnN,GAAGoN,MAAhC,CAAX;AACA,aAAK,IAAIjL,IAAI,CAAb,EAAgBA,IAAI+K,KAAK7N,MAAzB,EAAiC8C,GAAjC,EAAsC;AAClC,gBAAI8K,iBAAiBA,kBAAkBC,KAAK/K,CAAL,CAAvC,EAAgD;AAC5C;AACH;AACD+K,iBAAK/K,CAAL,EAAQkL,YAAR,GAAuBL,IAAvB;AACH;AAEJ,KA/nBO;;AAioBRM,mBAAe,uBAAUC,GAAV,EAAe;AAC1B,YAAI,qBAAqBA,GAAzB,EAA8B;AAC1B/N,eAAGgO,YAAH,CAAgBC,IAAhB,CAAqB,gBAArB;AACA,mBAAO,KAAP;AACH,SAHD,MAGO,IAAI,eAAeF,GAAnB,EAAwB;AAC3B/N,eAAGgO,YAAH,CAAgBC,IAAhB,CAAqB,WAArB;AACA,mBAAO,KAAP;AACH,SAHM,MAGA,IAAI,wBAAwBF,GAA5B,EAAiC;AACpC/N,eAAGgO,YAAH,CAAgBC,IAAhB,CAAqB,gBAArB;AACA,mBAAO,KAAP;AACH;AACD,eAAO,IAAP;AACH,KA7oBO;;AA+oBRC,aAAS,iBAAU7L,GAAV,EAAe8L,GAAf,EAAoBC,UAApB,EAAgC;AACrC,YAAI,CAAC3P,QAAL,EAAe;AACXQ,yBAAae,GAAGqO,UAAH,CAAcC,WAAd,EAAb;AACH;;AAED,YAAI7J,MAAMhG,SAASgG,GAAT,CAAapC,GAAb,CAAV;AACA,YAAI,CAACoC,GAAL,EAAU;AACN,mBAAO2J,aAAaA,UAAb,GAA0B,EAAjC;AACH;AACD,eAAO3P,SAASgF,CAAT,CAAWpB,GAAX,EAAgB8L,GAAhB,CAAP;AACH,KAzpBO;;AA2pBRI,gBAAY,oBAAUlM,GAAV,EAAe;AACvB,YAAIrC,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvB,mBAAOlI,GAAGiJ,QAAH,CAAYsF,UAAZ,CAAuBlM,GAAvB,CAAP;AACH,SAFD,MAEO,IAAIrC,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9B,mBAAOnI,GAAG2L,QAAH,CAAY4C,UAAZ,CAAuBlM,GAAvB,CAAP;AACH,SAFM,MAEA;AACH,mBAAO7B,GAAGwF,GAAH,CAAOwI,YAAP,CAAoBC,OAApB,CAA4BpM,GAA5B,CAAP;AACH;AACJ,KAnqBO;;AAqqBRqM,gBAAY,oBAAUrM,GAAV,EAAe4C,KAAf,EAAsB;AAC9B,YAAIjF,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvBlI,eAAGiJ,QAAH,CAAYyF,UAAZ,CAAuBrM,GAAvB,EAA4B4C,KAA5B;AACH,SAFD,MAEO,IAAIjF,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9BnI,eAAG2L,QAAH,CAAY+C,UAAZ,CAAuBrM,GAAvB,EAA4B4C,KAA5B;AACH,SAFM,MAEA;AACHzE,eAAGwF,GAAH,CAAOwI,YAAP,CAAoBG,OAApB,CAA4BtM,GAA5B,EAAiC4C,KAAjC;AACH;AACJ,KA7qBO;;AA+qBR2J,sBAAkB,0BAAUjP,GAAV,EAAe;AAC7B,YAAIK,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvBlI,eAAGiJ,QAAH,CAAY2F,gBAAZ,CAA6BjP,GAA7B;AACA;AACH;AACJ,KAprBO;;AAsrBRkP,sBAAkB,0BAAUC,GAAV,EAAe5P,IAAf,EAAqBwK,OAArB,EAA8BC,IAA9B,EAAoC;AAClDmF,cAAMA,OAAO,EAAb;AACA5P,eAAOA,QAAQ,EAAf;;AAEA,YAAIM,MAAMQ,GAAGgI,QAAH,CAAY+G,SAAZ,EAAV;AACAvP,eAAOsP,GAAP;AACA5P,aAAK8P,EAAL,GAAU,IAAItL,IAAJ,GAAWC,OAAX,EAAV;;AAEA,YAAIxB,MAAM,EAAV;AACAA,YAAI3C,GAAJ,GAAUA,GAAV;AACA2C,YAAIjD,IAAJ,GAAWA,IAAX;AACAiD,YAAIuH,OAAJ,GAAcA,OAAd;AACAvH,YAAIwH,IAAJ,GAAWA,IAAX;;AAEA,YAAI3J,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvBlI,eAAGiJ,QAAH,CAAYgG,OAAZ,CAAoB9M,GAApB;AACH,SAFD,MAEO;AACHnC,eAAGkP,IAAH,CAAQC,GAAR,CAAYhN,IAAI3C,GAAhB,EAAqB2C,IAAIjD,IAAzB,EAA+B,UAAC6H,GAAD,EAAMqI,MAAN,EAAc/D,MAAd,EAAyB;AACpD,oBAAIA,MAAJ,EAAY;AACRlJ,wBAAIuH,OAAJ,IAAevH,IAAIuH,OAAJ,CAAY,EAAExK,MAAMkQ,MAAR,EAAgBC,YAAYhE,MAA5B,EAAZ,CAAf;AACH,iBAFD,MAEO;AACHlJ,wBAAIwH,IAAJ,IAAYxH,IAAIwH,IAAJ,CAAS,EAAEzK,MAAMkQ,MAAR,EAAgBC,YAAYhE,MAA5B,EAAT,CAAZ;AACH;AACJ,aAND;AAOH;AACJ,KA/sBO;;AAitBRiE,iBAAa,qBAAUC,QAAV,EAAoBC,QAApB,EAA8BC,YAA9B,EAA4C;AACrD;AACA,YAAI,MAAMF,QAAV,EAAoB;AAChB,mBAAO,CAAP;AACH;AACD,YAAI,MAAME,YAAV,EAAwB;AACpB,gBAAI,MAAMD,QAAV,EAAoB;AAChB,uBAAO,CAAP;AACH;AACD,mBAAOvO,KAAKiE,GAAL,CAASqK,WAAWC,QAApB,CAAP;AACH;AACD,YAAKA,WAAWA,QAAX,GAAsB,IAAIC,YAAJ,GAAmBF,QAA1C,GAAsD,CAA1D,EAA6D;AACzD,mBAAOG,GAAP;AACH;AACD,YAAIC,KAAK,CAAC,CAACH,QAAD,GAAavO,KAAK2O,IAAL,CAAUJ,WAAWA,QAAX,GAAsB,IAAIC,YAAJ,GAAmBF,QAAnD,CAAd,IAAgFE,YAAzF;AACA,YAAII,KAAK,CAAC,CAACL,QAAD,GAAavO,KAAK2O,IAAL,CAAUJ,WAAWA,QAAX,GAAsB,IAAIC,YAAJ,GAAmBF,QAAnD,CAAd,IAAgFE,YAAzF;AACA,YAAIE,KAAK,CAAL,IAAUE,KAAK,CAAnB,EAAsB;AAClB,mBAAOH,GAAP;AACH,SAFD,MAEO,IAAIC,KAAK,CAAL,IAAUE,KAAK,CAAnB,EAAsB;AACzB,mBAAO5O,KAAK6O,GAAL,CAASH,EAAT,EAAaE,EAAb,CAAP;AACH;AACD,eAAO5O,KAAK8O,GAAL,CAASJ,EAAT,EAAaE,EAAb,CAAP;AACH,KAvuBO;;AAyuBRG,oBAAgB,wBAAUC,IAAV,EAAgBT,QAAhB,EAA0BC,YAA1B,EAAwCS,IAAxC,EAA8C;AAC1D,eAAOD,OAAOT,WAAWU,IAAlB,GAAyB,MAAMT,YAAN,GAAqBS,IAArB,GAA4BA,IAA5D;AACH,KA3uBO;;AA6uBRC,WAAO,eAAUzG,OAAV,EAAmBC,IAAnB,EAAyB;AAC5B,YAAIiB,SAAS5K,GAAGC,IAAH,CAAQc,IAAR,EAAb;AACA,YAAIf,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvBlI,eAAGiJ,QAAH,CAAYkH,KAAZ,CAAkBzG,OAAlB,EAA2BC,IAA3B;AACH,SAFD,MAEO,IAAI3J,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9ByC,qBAASwF,eAAexF,MAAxB;AACA5K,eAAGC,IAAH,CAAQyO,UAAR,CAAmB,QAAnB,EAA6B9D,MAA7B;AACAlB,oBAAQkB,MAAR;AACH,SAJM,MAIA;AACH5K,eAAGC,IAAH,CAAQyO,UAAR,CAAmB,WAAnB,EAAgC9D,MAAhC;AACAlB,oBAAQkB,MAAR;AACH;AACJ,KAzvBO;;AA2vBRJ,iBAAa,uBAAY;AACrB,YAAID,QAAJ;;AAEA,YAAIvK,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvBqC,uBAAWvK,GAAGiJ,QAAH,CAAYuB,WAAZ,EAAX;AACH,SAFD,MAEO,IAAIxK,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9BoC,uBAAWvK,GAAG2L,QAAH,CAAYnB,WAAZ,EAAX;AACH,SAFM,MAEA;AACHD,uBAAW;AACPK,wBAAQ5K,GAAGC,IAAH,CAAQsO,UAAR,CAAmB,WAAnB,KAAmC,EADpC;AAEPzD,0BAAU9K,GAAGC,IAAH,CAAQsO,UAAR,CAAmB,aAAnB,KAAqC,EAFxC;AAGPvD,2BAAWhL,GAAGC,IAAH,CAAQsO,UAAR,CAAmB,cAAnB,KAAsC;AAH1C,aAAX;AAKH;AACD,eAAOhE,QAAP;AACH,KA1wBO;;AA4wBR;;;;;;;;;;;;;;;;;AAmBA8F,sBAAkB,0BAAUvH,EAAV,EAAc;AAC5B,YAAIwH,YAAYtQ,GAAGC,IAAH,CAAQsQ,YAAR,EAAhB;AACA,YAAI,CAACD,SAAL,EAAgB;AACZxH,eAAG,6BAAH,EAAkCwH,SAAlC;AACA;AACH;AACD,YAAItQ,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvBoI,wBAAYtQ,GAAGiJ,QAAH,CAAYsH,YAAZ,EAAZ;AACAzH,eAAG,IAAH,EAASwH,SAAT;AACH,SAHD,MAGO,IAAItQ,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9BnI,eAAG2L,QAAH,CAAY6E,YAAZ,CAAyB5F,MAAzB,EAAiC,UAAUA,MAAV,EAAkBI,SAAlB,EAA6B;AAC1D,oBAAIJ,WAAW0F,UAAU,cAAV,CAAf,EAA0C;AACtCxH,uBAAG,2BAAH,EAAgCwH,SAAhC;AACA;AACH;AACDA,0BAAU,iBAAV,IAA+BtF,SAA/B;AACA,oBAAIH,cAAJ,EAAoB;AAChB/B,uBAAG,IAAH,EAASwH,SAAT;AACA;AACH;AACDtQ,mBAAG2L,QAAH,CAAY8E,WAAZ,CAAwB7F,MAAxB,EAAgC,UAAUA,MAAV,EAAkBE,QAAlB,EAA4B;AACxD,wBAAIF,WAAW0F,UAAU,cAAV,CAAf,EAA0C;AACtCxH,2BAAG,0BAAH,EAA+BwH,SAA/B;AACA;AACH;AACDA,8BAAU,gBAAV,IAA8BxF,QAA9B;AACAhC,uBAAG,IAAH,EAASwH,SAAT;AACA;AACH,iBARD;AASH,aAnBD;AAoBH,SArBM,MAqBA;AACHxH,eAAG,IAAH,EAASwH,SAAT;AACH;AACJ,KAh0BO;;AAk0BRC,kBAAc,wBAAY;AACtB,YAAID,YAAY,IAAhB;AACA,YAAItQ,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvBoI,wBAAYtQ,GAAGiJ,QAAH,CAAYsH,YAAZ,EAAZ;AACH,SAFD,MAEO,IAAIvQ,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9BmI,wBAAYtQ,GAAG2L,QAAH,CAAY4E,YAAZ,EAAZ;AACH,SAFM,MAEA;AACHD,wBAAY,IAAZ;AACH;AACD,eAAOA,SAAP;AACH,KA50BO;;AA80BRI,iBAAa,qBAAUhP,QAAV,EAAoB;AAC7B,YAAI+E,OAAO,eAAe/E,QAAf,GAA0B,MAArC;;AAEA,YAAI1B,GAAGC,IAAH,CAAQ0Q,gBAAR,CAAyBlK,IAAzB,CAAJ,EAAoC;AAChC,mBAAOzG,GAAGC,IAAH,CAAQ2Q,gBAAR,CAAyBnK,IAAzB,CAAP;AACH,SAFD,MAEO;AACH,mBAAOzG,GAAGC,IAAH,CAAQ4Q,YAAR,CAAqBpK,IAArB,CAAP;AACH;AACJ,KAt1BO;;AAw1BRqK,iBAAa,qBAAUpP,QAAV,EAAoB;AAC7B,YAAI+E,OAAO,eAAe/E,QAAf,GAA0B,MAArC;;AAEA,YAAI1B,GAAGC,IAAH,CAAQ0Q,gBAAR,CAAyBlK,IAAzB,CAAJ,EAAoC;AAChC,mBAAOzG,GAAGC,IAAH,CAAQ2Q,gBAAR,CAAyBnK,IAAzB,CAAP;AACH,SAFD,MAEO;AACH,mBAAOzG,GAAGC,IAAH,CAAQ4Q,YAAR,CAAqBpK,IAArB,CAAP;AACH;AACJ,KAh2BO;;AAk2BRsK,kBAAc,sBAAUrP,QAAV,EAAoB;AAC9B,YAAI+E,OAAO,eAAe/E,QAAf,GAA0B,MAArC;;AAEA,eAAO1B,GAAGC,IAAH,CAAQ0Q,gBAAR,CAAyBlK,IAAzB,CAAP;AACH,KAt2BO;;AAw2BRoK,kBAAc,sBAAUnP,QAAV,EAAoB;AAC9B,YAAIlC,MAAMQ,GAAGgI,QAAH,CAAYgJ,SAAZ,KAA0BtS,UAA1B,GAAuCgD,QAAjD;AACAlC,eAAO,SAAU,IAAIkE,IAAJ,EAAD,CAAaC,OAAb,EAAhB;AACA,eAAOnE,GAAP;AACH,KA52BO;;AA82BRmR,sBAAkB,0BAAUjP,QAAV,EAAoB;AAClC,eAAO1B,GAAGC,IAAH,CAAQgR,iBAAR,CAA0BvS,aAAagD,QAAvC,CAAP;AACH,KAh3BO;;AAk3BRuP,uBAAmB,2BAAUvP,QAAV,EAAoB;AACnC,YAAIwP,YAAYlR,GAAGC,IAAH,CAAQkR,iBAAR,CAA0BzP,QAA1B,CAAhB;;AAEA,YAAI1B,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvB,gBAAIkJ,KAAKC,GAAGC,oBAAH,EAAT;AACA,gBAAIC,MAAM,KAAV;AACA,gBAAI;AACA,oBAAIH,GAAGI,UAAH,CAAcN,SAAd,CAAJ,EAA8B;AAC1BK,0BAAM,KAAN;AACH,iBAFD,MAEO;AACHA,0BAAM,IAAN;AACH;AACJ,aAND,CAME,OAAOxK,GAAP,EAAY;AACVlD,wBAAQC,GAAR,CAAY,wBAAZ,EAAsCiD,GAAtC;AACAwK,sBAAM,KAAN;AACH;AACD,mBAAOA,GAAP;AACH,SAdD,MAcO,IAAIvR,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9B,mBAAOsJ,GAAGC,UAAH,CAAcF,UAAd,CAAyBN,SAAzB,CAAP;AACH,SAFM,MAEA;AACH,mBAAO,KAAP;AACH;AACJ,KAx4BO;;AA04BRN,sBAAkB,0BAAUlP,QAAV,EAAoB;AAClC,eAAO1B,GAAGC,IAAH,CAAQkR,iBAAR,CAA0BzS,aAAagD,QAAvC,CAAP;AACH,KA54BO;;AA84BRyP,uBAAmB,2BAAUzP,QAAV,EAAoB;AACnC,YAAI1B,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvB,mBAAOmJ,GAAGM,GAAH,CAAOC,cAAP,GAAwB,GAAxB,GAA8BlQ,QAArC;AACH,SAFD,MAEO,IAAI1B,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9B,mBAAO,mBAAmBzG,QAA1B;AACH,SAFM,MAEA;AACH,mBAAOA,QAAP;AACH;AACJ,KAt5BO;;AAw5BRmQ,uBAAmB,2BAAUnQ,QAAV,EAAoB;AACnCA,mBAAWhD,aAAagD,QAAxB;AACA,eAAO1B,GAAGC,IAAH,CAAQ6R,kBAAR,CAA2BpQ,QAA3B,CAAP;AACH,KA35BO;;AA65BRoQ,wBAAoB,4BAAUpQ,QAAV,EAAoB;AACpC,YAAIA,SAAS7B,MAAT,IAAmB,CAAvB,EAA0B;AACtB,mBAAO,IAAP;AACH;AACD,YAAImC,QAAQN,SAASG,WAAT,CAAqB,GAArB,CAAZ;AACA,YAAIG,QAAQ,CAAR,IAAaA,SAASN,SAAS7B,MAAnC,EAA2C;AACvC,mBAAO,IAAP;AACH;AACD,iBAASkS,KAAT,CAAeC,IAAf,EAAqB;AACjB,gBAAI,CAAChS,GAAGC,IAAH,CAAQgR,iBAAR,CAA0Be,IAA1B,CAAL,EAAsC;AAClC,oBAAId,YAAYlR,GAAGC,IAAH,CAAQkR,iBAAR,CAA0Ba,IAA1B,CAAhB;AACA,oBAAIhS,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvB,wBAAI;AACA,4BAAIkJ,KAAKC,GAAGC,oBAAH,EAAT;AACAF,2BAAGa,SAAH,CAAaf,SAAb,EAAwB,IAAxB;AACH,qBAHD,CAGE,OAAOnK,GAAP,EAAY;AACVlD,gCAAQC,GAAR,CAAY,QAAZ,EAAsBiD,GAAtB;AACH;AACJ,iBAPD,MAQK,IAAI/G,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC5BsJ,uBAAGC,UAAH,CAAcQ,WAAd,CAA0BhB,SAA1B;AACH;AACJ;AACD,mBAAOlR,GAAGC,IAAH,CAAQgR,iBAAR,CAA0Be,IAA1B,CAAP;AACH;AACD,YAAIG,UAAUzQ,SAASI,MAAT,CAAgB,CAAhB,EAAmBE,KAAnB,CAAd;AACA,YAAIoQ,SAASD,QAAQ5L,KAAR,CAAc,GAAd,CAAb;AACA,YAAIyL,OAAO,EAAX;AACA,aAAK,IAAIrP,IAAI,CAAb,EAAgBA,IAAIyP,OAAOvS,MAA3B,EAAmC8C,GAAnC,EAAwC;AACpC,gBAAIA,IAAI,CAAR,EAAW;AACPqP,wBAAQ,GAAR;AACH;AACDA,oBAAQI,OAAOzP,CAAP,CAAR;AACA,gBAAI,CAACoP,MAAMC,IAAN,CAAL,EAAkB;AACd,uBAAO,KAAP;AACH;AACJ;AACD,eAAO,IAAP;AACH,KAn8BO;;AAq8BRK,mBAAe,uBAAUC,OAAV,EAAmBC,OAAnB,EAA4B;AACvC,YAAIvS,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvB,gBAAIkJ,KAAKC,GAAGC,oBAAH,EAAT;AACAF,eAAGoB,YAAH,CAAgBF,OAAhB,EAAyBC,OAAzB;AACH,SAHD,MAGO,IAAIvS,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9BsJ,eAAGC,UAAH,CAAce,YAAd,CAA2BH,OAA3B,EAAoCC,OAApC;AACH;AACJ,KA58BO;;AA88BRG,mBAAe,uBAAUJ,OAAV,EAAmBC,OAAnB,EAA4B;AACvC,YAAIvS,GAAGgI,QAAH,CAAYE,OAAZ,EAAJ,EAA2B;AACvB,gBAAIkJ,KAAKC,GAAGC,oBAAH,EAAT;AACAF,eAAGqB,YAAH,CAAgBH,OAAhB,EAAyBC,OAAzB;AACH,SAHD,MAGO,IAAIvS,GAAGgI,QAAH,CAAYG,OAAZ,EAAJ,EAA2B;AAC9BsJ,eAAGC,UAAH,CAAce,YAAd,CAA2BH,OAA3B,EAAoCC,OAApC;AACH;AACJ,KAr9BO;;AAu9BRI,kBAv9BQ,4BAu9BS;AACb,YAAIrC,YAAYtQ,GAAGC,IAAH,CAAQsQ,YAAR,EAAhB;AACA1M,gBAAQC,GAAR,CAAY,SAAZ,EAAuB3D,KAAK+K,SAAL,CAAeoF,aAAa,EAA5B,CAAvB;AACA,YAAIA,aAAaA,UAAUsC,IAA3B,EAAiC;AAC7B,gBAAI;AACAtC,0BAAUsC,IAAV,GAAiBzS,KAAKC,KAAL,CAAWkQ,UAAUsC,IAArB,CAAjB;AACH,aAFD,CAEE,OAAOvS,CAAP,EAAU;AACRwD,wBAAQC,GAAR,CAAY,cAAZ;AACH;AACDD,oBAAQC,GAAR,CAAY,SAAZ,EAAuB3D,KAAK+K,SAAL,CAAeoF,UAAUsC,IAAV,IAAkB,EAAjC,CAAvB;;AAEA,gBAAIC,aAAa7S,GAAGmE,QAAH,CAAY2O,eAAZ,EAAjB;AACA,gBAAID,cAAcA,WAAWE,OAAX,KAAuBzC,UAAUsC,IAAV,CAAeG,OAAxD,EAAiE;AAC7D,oBAAI,CAACF,WAAWG,IAAhB,EAAsB;AAClBH,+BAAWG,IAAX,GAAkB,GAAlB;AACH,iBAFD,MAEO;AACHH,+BAAWG,IAAX,IAAmB,GAAnB;AACH;AACDH,2BAAWE,OAAX,GAAqB,EAArB;AACA/S,mBAAGmE,QAAH,CAAY8O,cAAZ,CAA2BJ,UAA3B;AACA7S,mBAAGgO,YAAH,CAAgBC,IAAhB,CAAqB,gBAArB;AACAjO,mBAAGqE,eAAH,CAAmBC,IAAnB,CAAwB,aAAxB;AACH;AACJ;AACJ;AA/+BO,CAAZ;;AAk/BA,IAAItE,KAAKqG,OAAOrG,EAAP,GAAYqG,OAAOrG,EAAP,IAAa,EAAlC;AACAA,GAAGC,IAAH,GAAUD,GAAGC,IAAH,IAAW,EAArB;AACAO,GAAGsE,EAAH,CAAMoO,KAAN,CAAYlT,GAAGC,IAAf,EAAqBX,KAArB;;AAGA6T,OAAOC,OAAP,GAAiB9T,KAAjB","file":"af-utils.js","sourceRoot":"../../../../../assets/framework/utils","sourcesContent":["const Polyglot = require('polyglot');\r\nlet polyInst = null;\r\n\r\nconst REMOTE_DIR = \"remote/\";\r\n\r\nconst wxShareOpen = require('../config/wx/wxShare.js')\r\nconst wxVideoAdOpen = require('../config/wx/wxVideoAd.js')\r\nconst wxBannerAdOpen = require('../config/wx/wxBannerAd.js')\r\nconst qqShareOpen = require('../config/qq/qqShare.js')\r\nconst qqVideoAdOpen = require('../config/qq/qqVideoAd.js')\r\nconst qqBannerAdOpen = require('../config/qq/qqBannerAd.js')\r\n\r\nfunction initPolyglot(data) {\r\n    if (data) {\r\n        if (polyInst) {\r\n            polyInst.replace(data);\r\n        } else {\r\n            polyInst = new Polyglot({ phrases: data, allowMissing: true });\r\n        }\r\n    }\r\n}\r\n\r\nvar utils = {\r\n    getSchemeParam: function (url, scheme) {\r\n        var prefix = scheme + '://';\r\n        var str = url.substring(prefix.length);\r\n        var param = {};\r\n        try {\r\n            str = decodeURIComponent(str);\r\n            str = AF.util.base64Decode(str);\r\n            param = JSON.parse(str);\r\n        } catch (e) { }\r\n        return param;\r\n    },\r\n\r\n    // 是否是全面屏\r\n    isAllScreen: function () {\r\n        var sz = cc.view.getFrameSize();\r\n        var r = sz.width > sz.height ? sz.width / sz.height : sz.height / sz.width;\r\n        return r > 1.85;\r\n    },\r\n\r\n    isLandscape: function () {\r\n        var sz = cc.view.getFrameSize();\r\n        return sz.width > sz.height;\r\n    },\r\n\r\n    guid: function () {\r\n        function s4() {\r\n            return Math.floor((1 + Math.random()) * 0x10000)\r\n                .toString(16)\r\n                .substring(1);\r\n        }\r\n        return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\r\n    },\r\n\r\n    gotoGameScene: function (sceneName, params) {\r\n        AF.gotoScene(sceneName, params);\r\n    },\r\n    isZipFile: function (filename) {\r\n        return '' !== AF.util.getZipFilename(filename);\r\n    },\r\n    getZipFilename: function (filename) {\r\n        var leng = filename.length;\r\n        if (leng > 4 && filename.lastIndexOf(\".zip\") === leng - 4) {\r\n            return filename.substr(0, leng - 4);\r\n        } else {\r\n            return '';\r\n        }\r\n    },\r\n    getFilePath: function (filename) {\r\n        var leng = filename.length;\r\n        var index = filename.lastIndexOf(\"/\");\r\n        if (index >= 1 && index < leng) {\r\n            return filename.substr(0, index);\r\n        } else {\r\n            return '';\r\n        }\r\n    },\r\n    getFramName: function (filename) {\r\n        var leng = filename.length;\r\n        var index = filename.lastIndexOf(\"/\");\r\n        if (index >= 1 && index < leng) {\r\n            return filename.substr(index + 1, leng - index - 1);\r\n        } else {\r\n            return '';\r\n        }\r\n    },\r\n    deepCopy: function (obj, c) {\r\n        var c = c || {};\r\n        for (var key in obj) {\r\n            if (obj[key] && typeof obj[key] === 'object') {\r\n                if (obj[key].constructor === Array) {\r\n                    c[key] = [];\r\n                } else {\r\n                    c[key] = {};\r\n                }\r\n                AF.util.deepCopy(obj[key], c[key]);\r\n            } else {\r\n                c[key] = obj[key];\r\n            }\r\n        }\r\n        return c;\r\n    },\r\n\r\n    spliceByChar: function (str, s) {\r\n        var nums = [];\r\n        while (true) {\r\n            let i = str.indexOf(s);\r\n            if (-1 === i) {\r\n                nums.push(Number(str));\r\n                return nums;\r\n            }\r\n            nums.push(Number(str.substr(0, i)));\r\n            str = str.substr(i + 1, str.length - i);\r\n        }\r\n    },\r\n\r\n    replaceAToB: function (str, a, b) {\r\n        b = b || '';\r\n        var re = new RegExp(a, \"g\");\r\n        return str.replace(re, b);\r\n    },\r\n\r\n    parseNums: function (str) {//str {num1,mun2}\r\n        str = AF.util.replaceAToB(str, \"{\");\r\n        str = AF.util.replaceAToB(str, \"}\");\r\n        var nums = AF.util.spliceByChar(str, \",\");\r\n        return nums;\r\n    },\r\n\r\n    createPrefabNode: function (prefab) {\r\n        return cc.instantiate(prefab);\r\n    },\r\n\r\n    printTime: function (key) {\r\n\r\n        var t = (new Date()).getTime();\r\n\r\n        if (this.lastTime) {\r\n            console.log(key, \": \", t, \" [\", t - this.lastTime, \"]\");\r\n        } else {\r\n            console.log(key, \": \", t);\r\n        }\r\n\r\n        this.lastTime = t;\r\n    },\r\n\r\n    getCurrTime: function () {\r\n        return new Date().getTime();\r\n    },\r\n\r\n    getCurrTimeOfSecond: function () {\r\n        return Math.round(this.getCurrTime() / 1000);\r\n    },\r\n\r\n    queryObject: function (key) {\r\n        AF.GameData.setMyObject(key, false);\r\n\r\n        AF.EventDispatcher.emit(AF.Event.QUERY_OBJECT, key);\r\n\r\n        var has = AF.GameData.getMyObject(key);\r\n\r\n        return has;\r\n    },\r\n\r\n    getMinAndSec: function (sec) {\r\n        var minute = 0;\r\n\r\n        while (sec >= 60) {\r\n            minute += 1;\r\n            sec -= 60;\r\n        }\r\n\r\n        var str = \"\";\r\n\r\n        if (minute < 10) {\r\n            str += \"0\";\r\n        }\r\n\r\n        str += cc.js.formatStr(\"%d\", minute);\r\n\r\n        str += \":\";\r\n\r\n        if (sec < 10) {\r\n            str += \"0\";\r\n        }\r\n\r\n        str += cc.js.formatStr(\"%d\", sec);\r\n\r\n        return str;\r\n    },\r\n\r\n    formatNumber: function (value) {\r\n\r\n        value = Math.floor(value);\r\n\r\n        var prefix = \"\";\r\n\r\n        if (value < 0) {\r\n            prefix = \"-\";\r\n        }\r\n\r\n        value = Math.abs(value);\r\n\r\n        var strValue = Number(value).toString();\r\n        var suffix = \"\";\r\n        var strNum = \"\";\r\n        var strDot = \"\";\r\n\r\n        if (strValue.length >= 7) {\r\n            suffix = \"M\";\r\n            strNum = strValue.substring(0, strValue.length - 6);\r\n            strDot = strValue.substring(strValue.length - 6, strValue.length - 4);\r\n        } else if (strValue.length >= 5) {\r\n            suffix = \"K\";\r\n            strNum = strValue.substring(0, strValue.length - 3);\r\n            strDot = strValue.substring(strValue.length - 3, strValue.length - 2);\r\n        } else {\r\n            strNum = strValue;\r\n        }\r\n\r\n        if (strDot != \"\") {\r\n            strNum = strNum + \".\" + strDot;\r\n        }\r\n\r\n        strNum = prefix + strNum;\r\n        strNum = strNum + suffix;\r\n\r\n        return strNum;\r\n    },\r\n\r\n    //time的单位秒\r\n    formatPastTime: function (seconds) {\r\n        if (seconds > 60 * 60 * 24 * 30) {\r\n            return Math.floor(seconds / (60 * 60 * 24 * 30)) + \"月\"\r\n        }\r\n        if (seconds > 60 * 60 * 24) {\r\n            return Math.floor(seconds / (60 * 60 * 24)) + \"天\"\r\n        }\r\n        if (seconds > 60 * 60) {\r\n            return Math.floor(seconds / (60 * 60)) + \"小时\"\r\n        }\r\n        if (seconds > 60) {\r\n            return Math.floor(seconds / 60) + \"分钟\"\r\n\r\n        }\r\n        if (seconds > 0) {\r\n            return seconds + \"秒\"\r\n        }\r\n        if (seconds < 0) {\r\n            return (1 + Math.floor(Math.random() * 58)) + \"秒\"\r\n        }\r\n    },\r\n\r\n    //time的单位秒\r\n    formatTimeToHHMMSS: function (seconds) {\r\n        if (seconds > 60 * 60 * 24) {\r\n            return Math.floor(seconds / (60 * 60 * 24)) + \"天\"\r\n        }\r\n        var ss = 0;\r\n        var mm = 0;\r\n        var hh = 0;\r\n        ss = Math.floor(seconds % 60);\r\n        mm = Math.floor(seconds / 60);\r\n        if (mm > 60) {\r\n            mm = Math.floor(mm % 60);\r\n            hh = Math.floor(seconds / (60 * 60));\r\n        }\r\n\r\n        return ('00' + hh).slice(-2) + ':' + ('00' + mm).slice(-2) + ':' + ('00' + ss).slice(-2);\r\n    },\r\n    GetRequest: function () {\r\n        var theRequest = {};\r\n        if (!cc.sys.isNative) {\r\n            var url = location.search; //获取url中\"?\"符后的字串\r\n            theRequest.href = window.location.href;\r\n\r\n            if (url && url.indexOf(\"?\") != -1) {\r\n                var str = url.substr(1);\r\n                var strs = str.split(\"&\");\r\n                for (var i = 0; i < strs.length; i++) {\r\n                    theRequest[strs[i].split(\"=\")[0]] = strs[i].split(\"=\")[1];\r\n                }\r\n            }\r\n        }\r\n        return theRequest;\r\n    },\r\n\r\n    openDialogOnce: function (name, params, callback) {\r\n        var value = AF.GameData.getDialogOnce(name);\r\n        var now = AF.util.getCurrTime();\r\n\r\n        if (value + 1000 > now) {\r\n            if (callback) {\r\n                callback();\r\n            }\r\n            return;\r\n        }\r\n\r\n        AF.GameData.setDialogOnce(name);\r\n\r\n        AF.openDialog(name, params, function (err, node) {\r\n            callback && callback();\r\n        });\r\n    },\r\n\r\n    sortFunc: function (arr, key) {\r\n        for (let i = 0; i < arr.length - 1; i++) {\r\n            for (let j = 0; j < arr.length - i - 1; j++) {\r\n                // var condition =\r\n                if (arr[j][key] < arr[j + 1][key]) {\r\n                    var temp = arr[j];\r\n                    arr[j] = arr[j + 1];\r\n                    arr[j + 1] = temp;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    cutstr: function (str, len) {\r\n        var str_length = 0;\r\n        var str_len = 0;\r\n        var str_cut = new String();\r\n        str_len = str.length;\r\n        for (var i = 0; i < str_len; i++) {\r\n            let a = str.charAt(i);\r\n            str_length++;\r\n            if (escape(a).length > 4) {\r\n                //中文字符的长度经编码之后大于len\r\n                str_length++;\r\n            }\r\n            str_cut = str_cut.concat(a);\r\n            if (str_length >= len) {\r\n                if (i < str_len - 1) {\r\n                    str_cut = str_cut.concat(\"...\");\r\n                }\r\n                return str_cut;\r\n            }\r\n        }\r\n        //如果给定字符串小于指定长度，则返回源字符串；\r\n        if (str_length < len) {\r\n            return str;\r\n        }\r\n    },\r\n\r\n    isShareOpen: function () {\r\n        //分享开关打开\r\n        var src = AF.platform.getSrc();\r\n\r\n        if (src == \"wx\") {\r\n            if (AF.platform.isWxApp()) {\r\n                return wxShareOpen;\r\n            }\r\n            else {\r\n                //模拟分享\r\n                return true;\r\n            }\r\n        } else if (src == \"qq\") {\r\n            if (AF.platform.isQQApp()) {\r\n                return qqShareOpen;\r\n            }\r\n            else {\r\n                //模拟分享\r\n                return true;\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n\r\n    isBannerAdOpen: function () {\r\n        if (AF.platform.isWxPhone()) {\r\n            return wxBannerAdOpen;\r\n        }\r\n        else if (AF.platform.isQQApp()) {\r\n            return qqBannerAdOpen;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    getAdQuery(q) {\r\n        var sb = [];\r\n        for (let k in q) {\r\n            sb.push(k + '=' + q[k])\r\n        }\r\n        return sb.join('&');\r\n    },\r\n\r\n    showUserInfoButton: function (left, top, width, height, cb) {\r\n        if (AF.platform.isWxApp()) {\r\n            var systemInfo = AF.platform.getSystemInfo();\r\n            AF.wxHelper.showInfoButton(\r\n                Math.floor((left / cc.winSize.width) * systemInfo.windowWidth),\r\n                Math.floor((top / cc.winSize.height) * systemInfo.windowHeight),\r\n                Math.floor((width / cc.winSize.width) * systemInfo.windowWidth),\r\n                Math.floor((height / cc.winSize.height) * systemInfo.windowHeight),\r\n                cb\r\n            );\r\n        }\r\n    },\r\n\r\n    hideUserInfoButton: function () {\r\n        if (AF.platform.isWxApp()) {\r\n            AF.wxHelper.hideInfoButton();\r\n        }\r\n    },\r\n\r\n    //分享\r\n    shareAppMessage: function (scene, success, fail, queryData, type, content) {\r\n        if (!AF.util.isShareOpen()) {\r\n            fail && fail();\r\n            return;\r\n        }\r\n\r\n        function onSuccess() {\r\n            success && success(\"success\");\r\n            AF.CLOSE_LOADING_LAYER();\r\n        }\r\n\r\n        function onFail() {\r\n            fail && fail();\r\n            AF.CLOSE_LOADING_LAYER();\r\n        }\r\n\r\n        function simulateShare() {\r\n            if (AF.Random.getChance(50)) {\r\n                setTimeout(() => {\r\n                    onSuccess();\r\n                }, 1000);\r\n            } else {\r\n                setTimeout(() => {\r\n                    onFail();\r\n                }, 1000);\r\n            }\r\n        }\r\n\r\n        AF.LOADING_LAYER();\r\n        var userInfo = AF.util.getUserInfo();\r\n        queryData = Object.assign({\r\n            sharerOpenId: userInfo.openId,\r\n            sharerNickName: userInfo.nickName,\r\n            sharerAvatarUrl: userInfo.avatarUrl,\r\n        }, queryData);\r\n        var query = {\r\n            type: type || 'share',\r\n            data: JSON.stringify(queryData),\r\n        };\r\n        var queryStr = AF.util.getAdQuery(query);\r\n        if (AF.platform.isWxPhone()) {\r\n            var eventId = AF.wxHelper.shareAppMessage(scene, queryStr);\r\n\r\n            if (eventId <= 0) {\r\n                onFail();\r\n                return;\r\n            }\r\n\r\n            var _tickHandle;\r\n\r\n            function onFetchShareStatus() {\r\n                var status = AF.wxHelper.getShareStatus(eventId);\r\n                console.log('微信分享结果status = ', status, status == 1 ? '成功' : '失败')\r\n                if (status == -1) {\r\n                    clearInterval(_tickHandle);\r\n                    onFail();\r\n                    return;\r\n                }\r\n\r\n                if (status == 1) {\r\n                    clearInterval(_tickHandle);\r\n                    onSuccess();\r\n                    return;\r\n                }\r\n\r\n                if (status == 2) {\r\n                    clearInterval(_tickHandle);\r\n                    onFail();\r\n                    return;\r\n                }\r\n            }\r\n\r\n            _tickHandle = setInterval(onFetchShareStatus, 1000);\r\n            return;\r\n        } else if (AF.platform.isQQApp()) {\r\n            AF.qqHelper.shareAppMessage(scene, onSuccess, onFail, queryStr, content);\r\n        }\r\n\r\n        simulateShare();\r\n    },\r\n\r\n    isVideoAdOpen: function () {\r\n\r\n        if (!AF.platform.isWxApp() && !AF.platform.isQQApp()) {\r\n            return true;\r\n        }\r\n\r\n        if (AF.platform.isWxPhone()) {\r\n            return wxVideoAdOpen;\r\n        } else if (AF.platform.isQQApp()) {\r\n            return qqVideoAdOpen;\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n\r\n    //看视频\r\n    showVideoAd: function (tag, finish) {\r\n        if (!AF.platform.isWxApp() && !AF.platform.isQQApp()) {\r\n            if (AF.Random.getChance(50)) {\r\n                finish && finish(true);\r\n            } else {\r\n                finish && finish(false);\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        if (!AF.util.isVideoAdLoaded()) {\r\n            finish && finish(false);\r\n            return;\r\n        }\r\n\r\n        function onFinish(res) {\r\n            finish && finish(res);\r\n        }\r\n\r\n        if (AF.platform.isWxPhone()) {\r\n            AF.wxHelper.showVideoAd(tag, onFinish);\r\n        } else if (AF.platform.isQQApp()) {\r\n            AF.qqHelper.showVideoAd(onFinish);\r\n        }\r\n    },\r\n\r\n    isVideoAdLoaded: function (tag) {\r\n\r\n        if (!AF.platform.isWxApp() && !AF.platform.isQQApp()) {\r\n            return true;\r\n        }\r\n\r\n        if (AF.platform.isWxPhone()) {\r\n            return AF.wxHelper.isVideoAdLoaded(tag);\r\n        } else if (AF.platform.isQQApp()) {\r\n            return AF.qqHelper.isVideoAdLoaded();\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    //Banner广告\r\n    showBannerAd: function (tag) {\r\n        if (!AF.util.isBannerAdOpen()) {\r\n            return;\r\n        }\r\n\r\n        if (AF.platform.isQQApp()) {\r\n            AF.qqHelper.showBannerAd();\r\n            return;\r\n        }\r\n\r\n        if (!AF.platform.isWxPhone()) {\r\n            return;\r\n        }\r\n\r\n        var created = AF.wxHelper.createBannerAd(tag);\r\n\r\n        if (!created) {\r\n            return;\r\n        }\r\n\r\n        var _tickHandle;\r\n\r\n        function onShowBannerAd() {\r\n            var height = AF.wxHelper.getBannerAdHeight(tag);\r\n\r\n            if (height <= 0) {\r\n                return;\r\n            }\r\n\r\n            clearInterval(_tickHandle);\r\n\r\n            AF.wxHelper.moveBannerAd(tag, height);\r\n        }\r\n\r\n        _tickHandle = setInterval(onShowBannerAd, 1000);\r\n    },\r\n\r\n    hideBannerAd: function (tag) {\r\n        if (AF.platform.isWxPhone()) {\r\n            AF.wxHelper.hideBannerAd(tag);\r\n        } else if (AF.platform.isQQApp()) {\r\n            AF.qqHelper.hideBannerAd();\r\n        }\r\n    },\r\n\r\n    upScore: function (data) {\r\n        // var score = data.score;\r\n        // const scoreCount = AF.GameData.getScoreInfo();\r\n        // if (score < scoreCount.best) {\r\n        //     return;\r\n        // }\r\n        if (AF.platform.isWxApp()) {\r\n            AF.wxHelper.upScore(data);\r\n        } else if (AF.platform.isQQApp()) {\r\n            AF.qqHelper.upScore(data);\r\n        }\r\n    },\r\n\r\n    postMessage: function (cmd, data) {\r\n        if (AF.platform.isWxApp()) {\r\n            AF.wxHelper.postMessage(cmd, data);\r\n        }\r\n    },\r\n\r\n    getRankList: function (cb) {\r\n        if (AF.platform.isWxApp()) {\r\n            // AF.wxHelper.data(data);\r\n        } else if (AF.platform.isQQApp()) {\r\n            return AF.qqHelper.getRankList(cb)\r\n        } else {\r\n            let nickName = [\r\n                '送舟行', '狂奔蜗牛', '献世礼', '庸颜', '违心', '↘锁芯ラ', '枝桠',\r\n                '实习生', '半衾梦', '舟遥客', '書生', '满栀', '遮云壑', '枕花眠',\r\n                '暗中', '盗琴', '佞臣', '世佛', '孤凫', '三生路', '赠佳期',\r\n            ];\r\n            let rankList = [];\r\n            let length = Math.ceil(20 * Math.random());\r\n            let selfFlag = Math.floor(length * Math.random());\r\n            for (let i = 1; i <= length; i++) {\r\n                let playerInfo = {\r\n                    url: 'https://res.pixel08.com/robot/' + (100 + i) + '.jpg',\r\n                    nick: nickName[i],\r\n                    score: 5 + (i - 1) * 100,\r\n                    selfFlag: false,\r\n                };\r\n                rankList.push(playerInfo);\r\n            }\r\n            rankList[selfFlag].selfFlag = true;\r\n            cb && cb(rankList.reverse());\r\n        }\r\n    },\r\n\r\n    getMyUserInfo: function () {\r\n        var data = {}\r\n\r\n        if (AF.platform.isQQApp()) {\r\n            data.qq = AF.qqHelper.getUserInfo();\r\n        }\r\n\r\n        return data;\r\n    },\r\n\r\n    setButtonInteractable: function (node, flag, specialButton) {\r\n        var btns = node.getComponentsInChildren(cc.Button);\r\n        for (let i = 0; i < btns.length; i++) {\r\n            if (specialButton && specialButton === btns[i]) {\r\n                continue;\r\n            }\r\n            btns[i].interactable = flag;\r\n        }\r\n\r\n    },\r\n\r\n    checkShareMsg: function (msg) {\r\n        if ('exceedTheLimit' === msg) {\r\n            AF.ToastMessage.show(\"【同一个群一天只能分享一次】\");\r\n            return false;\r\n        } else if ('notGroup' === msg) {\r\n            AF.ToastMessage.show(\"【分享到群后解锁】\");\r\n            return false;\r\n        } else if ('exceedTheDayLimit' === msg) {\r\n            AF.ToastMessage.show(\"【今天的分享额度已经用完！】\");\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    getText: function (key, opt, defaultStr) {\r\n        if (!polyInst) {\r\n            initPolyglot(AF.GameConfig.getTextData());\r\n        }\r\n\r\n        let has = polyInst.has(key);\r\n        if (!has) {\r\n            return defaultStr ? defaultStr : '';\r\n        }\r\n        return polyInst.t(key, opt);\r\n    },\r\n\r\n    getStorage: function (key) {\r\n        if (AF.platform.isWxApp()) {\r\n            return AF.wxHelper.getStorage(key);\r\n        } else if (AF.platform.isQQApp()) {\r\n            return AF.qqHelper.getStorage(key);\r\n        } else {\r\n            return cc.sys.localStorage.getItem(key);\r\n        }\r\n    },\r\n\r\n    setStorage: function (key, value) {\r\n        if (AF.platform.isWxApp()) {\r\n            AF.wxHelper.setStorage(key, value);\r\n        } else if (AF.platform.isQQApp()) {\r\n            AF.qqHelper.setStorage(key, value);\r\n        } else {\r\n            cc.sys.localStorage.setItem(key, value);\r\n        }\r\n    },\r\n\r\n    setClipboardData: function (str) {\r\n        if (AF.platform.isWxApp()) {\r\n            AF.wxHelper.setClipboardData(str);\r\n            return;\r\n        }\r\n    },\r\n\r\n    requestServerApi: function (api, data, success, fail) {\r\n        api = api || \"\";\r\n        data = data || {};\r\n\r\n        var url = AF.platform.getApiUrl();\r\n        url += api;\r\n        data.ts = new Date().getTime();\r\n\r\n        var obj = {};\r\n        obj.url = url;\r\n        obj.data = data;\r\n        obj.success = success;\r\n        obj.fail = fail;\r\n\r\n        if (AF.platform.isWxApp()) {\r\n            AF.wxHelper.request(obj);\r\n        } else {\r\n            AF.http.get(obj.url, obj.data, (err, result, status) => {\r\n                if (status) {\r\n                    obj.success && obj.success({ data: result, statusCode: status });\r\n                } else {\r\n                    obj.fail && obj.fail({ data: result, statusCode: status });\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    getMoveTime: function (distance, velocity, acceleration) {\r\n        // var distance = Math.abs(distance);\r\n        if (0 === distance) {\r\n            return 0;\r\n        }\r\n        if (0 === acceleration) {\r\n            if (0 === velocity) {\r\n                return 0;\r\n            }\r\n            return Math.abs(distance / velocity);\r\n        }\r\n        if ((velocity * velocity + 2 * acceleration * distance) < 0) {\r\n            return NaN;\r\n        }\r\n        var t1 = (-velocity + (Math.sqrt(velocity * velocity + 2 * acceleration * distance))) / (acceleration);\r\n        var t2 = (-velocity - (Math.sqrt(velocity * velocity + 2 * acceleration * distance))) / (acceleration);\r\n        if (t1 < 0 && t2 < 0) {\r\n            return NaN;\r\n        } else if (t1 > 0 && t2 > 0) {\r\n            return Math.min(t1, t2);\r\n        }\r\n        return Math.max(t1, t2);\r\n    },\r\n\r\n    getDestination: function (posY, velocity, acceleration, time) {\r\n        return posY + velocity * time + 0.5 * acceleration * time * time;\r\n    },\r\n\r\n    login: function (success, fail) {\r\n        var openId = AF.util.guid();\r\n        if (AF.platform.isWxApp()) {\r\n            AF.wxHelper.login(success, fail);\r\n        } else if (AF.platform.isQQApp()) {\r\n            openId = GameStatusInfo.openId;\r\n            AF.util.setStorage('openId', openId);\r\n            success(openId);\r\n        } else {\r\n            AF.util.setStorage('webOpenId', openId);\r\n            success(openId);\r\n        }\r\n    },\r\n\r\n    getUserInfo: function () {\r\n        var userInfo;\r\n\r\n        if (AF.platform.isWxApp()) {\r\n            userInfo = AF.wxHelper.getUserInfo();\r\n        } else if (AF.platform.isQQApp()) {\r\n            userInfo = AF.qqHelper.getUserInfo();\r\n        } else {\r\n            userInfo = {\r\n                openId: AF.util.getStorage('webOpenId') || \"\",\r\n                nickName: AF.util.getStorage('webNickName') || \"\",\r\n                avatarUrl: AF.util.getStorage('webAvatarUrl') || \"\",\r\n            };\r\n        }\r\n        return userInfo;\r\n    },\r\n\r\n    /*getAvatarUrl: function (openId, cb) {\r\n        if (AF.platform.isQQApp()) {\r\n            AF.qqHelper.getAvatarUrl(openId, cb);\r\n            return;\r\n        }\r\n        else if (AF.platform.isWxApp()) {\r\n            userInfo = AF.wxHelper.getUserInfo(cb);\r\n        } else {\r\n\r\n        }\r\n        var userInfo = {\r\n            openId: AF.util.getStorage('openId'),\r\n            nickName: AF.util.getStorage('nickName'),\r\n            avatarUrl: AF.util.getStorage('avatarUrl'),\r\n        };\r\n\r\n        cb(openId, userInfo.avatarUrl);\r\n    },*/\r\n\r\n    getShareUserInfo: function (cb) {\r\n        var shareInfo = AF.util.getShareInfo();\r\n        if (!shareInfo) {\r\n            cb('Sharer information is null!', shareInfo);\r\n            return;\r\n        }\r\n        if (AF.platform.isWxApp()) {\r\n            shareInfo = AF.wxHelper.getShareInfo();\r\n            cb(null, shareInfo);\r\n        } else if (AF.platform.isQQApp()) {\r\n            AF.qqHelper.getAvatarUrl(openId, function (openId, avatarUrl) {\r\n                if (openId !== shareInfo['sharerOpenId']) {\r\n                    cb('Sharer avatarurl is null!', shareInfo);\r\n                    return;\r\n                }\r\n                shareInfo['shareravatarurl'] = avatarUrl;\r\n                if (sharerNickName) {\r\n                    cb(null, shareInfo);\r\n                    return;\r\n                }\r\n                AF.qqHelper.getNickName(openId, function (openId, nickName) {\r\n                    if (openId !== shareInfo['sharerOpenId']) {\r\n                        cb('Sharer nickName is null!', shareInfo);\r\n                        return;\r\n                    }\r\n                    shareInfo['sharerNickName'] = nickName;\r\n                    cb(null, shareInfo);\r\n                    return;\r\n                });\r\n            });\r\n        } else {\r\n            cb(null, shareInfo);\r\n        }\r\n    },\r\n\r\n    getShareInfo: function () {\r\n        var shareInfo = null;\r\n        if (AF.platform.isWxApp()) {\r\n            shareInfo = AF.wxHelper.getShareInfo();\r\n        } else if (AF.platform.isQQApp()) {\r\n            shareInfo = AF.qqHelper.getShareInfo();\r\n        } else {\r\n            shareInfo = null;\r\n        }\r\n        return shareInfo;\r\n    },\r\n\r\n    getMusicUrl: function (filename) {\r\n        var name = \"sfx/music/\" + filename + \".mp3\";\r\n\r\n        if (AF.util.isLocalFileExist(name)) {\r\n            return AF.util.getLocalFilePath(name);\r\n        } else {\r\n            return AF.util.getRemoteUrl(name);\r\n        }\r\n    },\r\n\r\n    getSoundUrl: function (filename) {\r\n        var name = \"sfx/sound/\" + filename + \".mp3\";\r\n\r\n        if (AF.util.isLocalFileExist(name)) {\r\n            return AF.util.getLocalFilePath(name);\r\n        } else {\r\n            return AF.util.getRemoteUrl(name);\r\n        }\r\n    },\r\n\r\n    isSoundExist: function (filename) {\r\n        var name = \"sfx/sound/\" + filename + \".mp3\";\r\n\r\n        return AF.util.isLocalFileExist(name);\r\n    },\r\n\r\n    getRemoteUrl: function (filename) {\r\n        var url = AF.platform.getCdnUrl() + REMOTE_DIR + filename;\r\n        url += \"?ts=\" + (new Date()).getTime();\r\n        return url;\r\n    },\r\n\r\n    isLocalFileExist: function (filename) {\r\n        return AF.util.isLocalFileExist2(REMOTE_DIR + filename);\r\n    },\r\n\r\n    isLocalFileExist2: function (filename) {\r\n        var localPath = AF.util.getLocalFilePath2(filename);\r\n\r\n        if (AF.platform.isWxApp()) {\r\n            var fs = wx.getFileSystemManager();\r\n            var ret = false;\r\n            try {\r\n                if (fs.accessSync(localPath)) {\r\n                    ret = false;\r\n                } else {\r\n                    ret = true;\r\n                }\r\n            } catch (err) {\r\n                console.log(\"isLocalFileExist2 err \", err);\r\n                ret = false;\r\n            }\r\n            return ret;\r\n        } else if (AF.platform.isQQApp()) {\r\n            return BK.fileSystem.accessSync(localPath);\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n\r\n    getLocalFilePath: function (filename) {\r\n        return AF.util.getLocalFilePath2(REMOTE_DIR + filename);\r\n    },\r\n\r\n    getLocalFilePath2: function (filename) {\r\n        if (AF.platform.isWxApp()) {\r\n            return wx.env.USER_DATA_PATH + '/' + filename;\r\n        } else if (AF.platform.isQQApp()) {\r\n            return \"GameSandBox://\" + filename;\r\n        } else {\r\n            return filename;\r\n        }\r\n    },\r\n\r\n    makesureLocalPath: function (filename) {\r\n        filename = REMOTE_DIR + filename;\r\n        return AF.util.makesureLocalPath2(filename);\r\n    },\r\n\r\n    makesureLocalPath2: function (filename) {\r\n        if (filename.length <= 1) {\r\n            return true;\r\n        }\r\n        var index = filename.lastIndexOf('/');\r\n        if (index < 0 || index >= filename.length) {\r\n            return true;\r\n        }\r\n        function mkDir(path) {\r\n            if (!AF.util.isLocalFileExist2(path)) {\r\n                var localPath = AF.util.getLocalFilePath2(path);\r\n                if (AF.platform.isWxApp()) {\r\n                    try {\r\n                        var fs = wx.getFileSystemManager();\r\n                        fs.mkdirSync(localPath, true);\r\n                    } catch (err) {\r\n                        console.log(\"mkDir:\", err);\r\n                    }\r\n                }\r\n                else if (AF.platform.isQQApp()) {\r\n                    BK.fileSystem.makeDirSync(localPath);\r\n                }\r\n            }\r\n            return AF.util.isLocalFileExist2(path);\r\n        }\r\n        var dirPath = filename.substr(0, index);\r\n        var dirArr = dirPath.split('/');\r\n        var path = '';\r\n        for (let i = 0; i < dirArr.length; i++) {\r\n            if (i > 0) {\r\n                path += '/';\r\n            }\r\n            path += dirArr[i];\r\n            if (!mkDir(path)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n\r\n    saveLocalFile: function (srcFile, dstFile) {\r\n        if (AF.platform.isWxApp()) {\r\n            var fs = wx.getFileSystemManager();\r\n            fs.saveFileSync(srcFile, dstFile);\r\n        } else if (AF.platform.isQQApp()) {\r\n            BK.fileSystem.copyFileSync(srcFile, dstFile);\r\n        }\r\n    },\r\n\r\n    copyLocalFile: function (srcFile, dstFile) {\r\n        if (AF.platform.isWxApp()) {\r\n            var fs = wx.getFileSystemManager();\r\n            fs.copyFileSync(srcFile, dstFile);\r\n        } else if (AF.platform.isQQApp()) {\r\n            BK.fileSystem.copyFileSync(srcFile, dstFile);\r\n        }\r\n    },\r\n\r\n    checkShareGift() {\r\n        let shareInfo = AF.util.getShareInfo()\r\n        console.log('分享信息111', JSON.stringify(shareInfo || {}))\r\n        if (shareInfo && shareInfo.gift) {\r\n            try {\r\n                shareInfo.gift = JSON.parse(shareInfo.gift)\r\n            } catch (e) {\r\n                console.log('分享信息json解析失败');\r\n            }\r\n            console.log('分享信息222', JSON.stringify(shareInfo.gift || {}))\r\n\r\n            let playerData = AF.GameData.getMyPlayerData();\r\n            if (playerData && playerData.giftTag === shareInfo.gift.giftTag) {\r\n                if (!playerData.gold) {\r\n                    playerData.gold = 600\r\n                } else {\r\n                    playerData.gold += 600\r\n                }\r\n                playerData.giftTag = ''\r\n                AF.GameData.savePlayerData(playerData);\r\n                AF.ToastMessage.show('获取分享双倍奖励，600金币');\r\n                AF.EventDispatcher.emit('GoldRefresh');\r\n            }\r\n        }\r\n    },\r\n};\r\n\r\nvar AF = window.AF = window.AF || {};\r\nAF.util = AF.util || {};\r\ncc.js.mixin(AF.util, utils);\r\n\r\n\r\nmodule.exports = utils;\r\n"]}