{"version":3,"sources":["../../../../../../assets/hall/ui/widget/assets/hall/ui/widget/PhotoPrefab.js"],"names":["cc","Class","extends","Component","properties","photo","default","type","Node","displayName","onLoad","setPhoto","url","active","loadPhoto","clearPhoto","getChildByName","getComponent","Sprite","spriteFrame","photoNode","photoSprite","loader","load","err","res","console","log","undefined","SpriteFrame","error"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAO;AACHC,qBAAS,IADN;AAEHC,kBAAMP,GAAGQ,IAFN;AAGHC,yBAAa;AAHV;AADC,KAHP;;AAWLC,YAAQ,kBAAY,CAEnB,CAbI;;AAeLC,cAAU,kBAAUC,GAAV,EAAe;;AAErB,aAAKP,KAAL,CAAWQ,MAAX,GAAoB,IAApB;;AAEA,aAAKC,SAAL,CAAe,KAAKT,KAApB,EAA2BO,GAA3B;AACH,KApBI;AAqBLG,cArBK,wBAqBO;AACR,YAAIV,QAAS,KAAKA,KAAL,CAAWW,cAAX,CAA0B,OAA1B,KAAsC,KAAKX,KAAL,CAAWW,cAAX,CAA0B,MAA1B,EAAkCA,cAAlC,CAAiD,OAAjD,CAAnD;AACAX,cAAMY,YAAN,CAAmBjB,GAAGkB,MAAtB,EAA8BC,WAA9B,GAA4C,IAA5C;AACH,KAxBI;;;AA0BLL,eAAW,mBAAUM,SAAV,EAAqBR,GAArB,EAA0B;AACjC,YAAI,CAACA,GAAL,EAAU;AACN;AACH;AACD,YAAIP,QAASe,UAAUJ,cAAV,CAAyB,OAAzB,KAAqCI,UAAUJ,cAAV,CAAyB,MAAzB,EAAiCA,cAAjC,CAAgD,OAAhD,CAAlD;AACA,YAAIK,cAAchB,MAAMY,YAAN,CAAmBjB,GAAGkB,MAAtB,CAAlB;AACAlB,WAAGsB,MAAH,CAAUC,IAAV,CAAe,EAAEX,KAAKA,GAAP,EAAYL,MAAM,KAAlB,EAAf,EAA0C,UAACiB,GAAD,EAAMC,GAAN,EAAc;AACpD,gBAAID,GAAJ,EAAS;AACLE,wBAAQC,GAAR,CAAY,gCAAZ,EAA8CH,GAA9C;AACA;AACH;AACD,gBAAIH,eAAeA,YAAYF,WAAZ,KAA4BS,SAA/C,EAA0D;AACtDP,4BAAYF,WAAZ,GAA0B,IAAInB,GAAG6B,WAAP,CAAmBJ,GAAnB,CAA1B;AACH,aAFD,MAEO;AACHzB,mBAAG8B,KAAH,CAAS,QAAT,EAAmBN,GAAnB;AACH;AACJ,SAVD;AAWH;AA3CI,CAAT","file":"PhotoPrefab.js","sourceRoot":"../../../../../../assets/hall/ui/widget","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        photo: {\r\n            default: null,\r\n            type: cc.Node,\r\n            displayName: \"头像\",\r\n        },\r\n    },\r\n\r\n    onLoad: function () {\r\n\r\n    },\r\n\r\n    setPhoto: function (url) {\r\n\r\n        this.photo.active = true;\r\n\r\n        this.loadPhoto(this.photo, url);\r\n    },\r\n    clearPhoto(){\r\n        let photo =  this.photo.getChildByName(\"photo\") || this.photo.getChildByName(\"mask\").getChildByName(\"photo\");\r\n        photo.getComponent(cc.Sprite).spriteFrame = null\r\n    },\r\n\r\n    loadPhoto: function (photoNode, url) {\r\n        if (!url) {\r\n            return;\r\n        }\r\n        var photo =  photoNode.getChildByName(\"photo\") || photoNode.getChildByName(\"mask\").getChildByName(\"photo\");\r\n        var photoSprite = photo.getComponent(cc.Sprite);\r\n        cc.loader.load({ url: url, type: \"jpg\" }, (err, res) => {\r\n            if (err) {\r\n                console.log(\"err: PhotoPrefab.js loadPhoto \", err);\r\n                return;\r\n            }\r\n            if (photoSprite && photoSprite.spriteFrame !== undefined) {\r\n                photoSprite.spriteFrame = new cc.SpriteFrame(res);\r\n            } else {\r\n                cc.error('头像加载失败', err);\r\n            }\r\n        });\r\n    },\r\n});\r\n"]}