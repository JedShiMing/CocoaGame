{"version":3,"sources":["../../../../assets/hall/assets/hall/platformListener.js"],"names":["EventDispatcher","require","Const","views","on","pointId","FriendPassedView","cc","loader","loadRes","err","prefab","node","instantiate","director","getScene","addChild","zIndex","DIALOG_Z_ORDER","emit","destroy","AF","util","postMessage","info","BalancePassedView"],"mappings":";;;;;;AAAA,IAAIA,kBAAkBC,QAAQ,qBAAR,CAAtB;AACA,IAAIC,QAAQD,QAAQ,UAAR,CAAZ;;AAEA,IAAIE,QAAQ,EAAZ;AACA;AACAH,gBAAgBI,EAAhB,CAAmB,kBAAnB,EAAuC,UAACC,OAAD,EAAa;AAChD;AACI,QAAIF,MAAMG,gBAAV,EACI;AACJC,OAAGC,MAAH,CAAUC,OAAV,CAAkB,6CAAlB,EAAiE,UAACC,GAAD,EAAMC,MAAN,EAAiB;AAC9E,YAAI,CAACD,GAAL,EAAU;AACN,gBAAIE,OAAOL,GAAGM,WAAH,CAAeF,MAAf,CAAX;AACAJ,eAAGO,QAAH,CAAYC,QAAZ,GAAuBC,QAAvB,CAAgCJ,IAAhC;AACAA,iBAAKK,MAAL,GAAcf,MAAMgB,cAAN,GAAuB,CAArC,CAHM,CAGiC;AACvCf,kBAAMG,gBAAN,GAAyBM,IAAzB;;AAEAZ,4BAAgBmB,IAAhB,CAAqB,oBAArB,EAA2Cd,OAA3C;AACH;AACJ,KATD;AAUJ;AACH,CAfD;;AAiBAL,gBAAgBI,EAAhB,CAAmB,kBAAnB,EAAuC,YAAM;AACzC,QAAID,MAAMG,gBAAV,EAA4B;AACxBH,cAAMG,gBAAN,CAAuBc,OAAvB;AACAjB,cAAMG,gBAAN,GAAyB,IAAzB;AACH;AACDe,OAAGC,IAAH,CAAQC,WAAR,CAAoB,CAApB,EAAuB,EAAvB;AAEH,CAPD;AAQA;AACAvB,gBAAgBI,EAAhB,CAAmB,mBAAnB,EAAwC,UAACoB,IAAD,EAAU;AAC9C;AACI,QAAIrB,MAAMsB,iBAAV,EAA6B;AACzB;AACH;AACDlB,OAAGC,MAAH,CAAUC,OAAV,CAAkB,8CAAlB,EAAkE,UAACC,GAAD,EAAMC,MAAN,EAAiB;AAC/E,YAAI,CAACD,GAAL,EAAU;AACN,gBAAIE,OAAOL,GAAGM,WAAH,CAAeF,MAAf,CAAX;AACAJ,eAAGO,QAAH,CAAYC,QAAZ,GAAuBC,QAAvB,CAAgCJ,IAAhC;AACAA,iBAAKK,MAAL,GAAcf,MAAMgB,cAAN,GAAuB,CAArC;AACAf,kBAAMsB,iBAAN,GAA0Bb,IAA1B;;AAEAZ,4BAAgBmB,IAAhB,CAAqB,qBAArB,EAA4CK,IAA5C;AACH;AACJ,KATD;AAUJ;AACA;AAEH,CAlBD;;AAoBAxB,gBAAgBI,EAAhB,CAAmB,mBAAnB,EAAwC,YAAM;AAC1C,QAAID,MAAMsB,iBAAV,EAA6B;AACzBtB,cAAMsB,iBAAN,CAAwBL,OAAxB;AACAjB,cAAMsB,iBAAN,GAA0B,IAA1B;AACH;AACDJ,OAAGC,IAAH,CAAQC,WAAR,CAAoB,CAApB,EAAuB,EAAvB;AAEH,CAPD","file":"platformListener.js","sourceRoot":"../../../../assets/hall","sourcesContent":["var EventDispatcher = require(\"af-event-dispatcher\");\r\nvar Const = require(\"af-const\");\r\n\r\nlet views = {}\r\n//游戏界面已通关好友\r\nEventDispatcher.on('ShowFriendPassed', (pointId) => {\r\n    // if (AF.platform.isQQApp()) {\r\n        if (views.FriendPassedView)\r\n            return\r\n        cc.loader.loadRes('hall/prefabs/platformViews/FriendPassedView', (err, prefab) => {\r\n            if (!err) {\r\n                let node = cc.instantiate(prefab)\r\n                cc.director.getScene().addChild(node);\r\n                node.zIndex = Const.DIALOG_Z_ORDER + 1;//显示在UI最上层\r\n                views.FriendPassedView = node\r\n\r\n                EventDispatcher.emit('UpdateFriendPassed', pointId)\r\n            }\r\n        })\r\n    // }\r\n});\r\n\r\nEventDispatcher.on('HideFriendPassed', () => {\r\n    if (views.FriendPassedView) {\r\n        views.FriendPassedView.destroy()\r\n        views.FriendPassedView = null\r\n    }\r\n    AF.util.postMessage(0, {});\r\n\r\n})\r\n//结算页面已通关好友\r\nEventDispatcher.on('ShowBalancePassed', (info) => {\r\n    // if (AF.platform.isQQApp()) {\r\n        if (views.BalancePassedView) {\r\n            return\r\n        }\r\n        cc.loader.loadRes('hall/prefabs/platformViews/BalancePassedView', (err, prefab) => {\r\n            if (!err) {\r\n                let node = cc.instantiate(prefab)\r\n                cc.director.getScene().addChild(node);\r\n                node.zIndex = Const.DIALOG_Z_ORDER + 1;\r\n                views.BalancePassedView = node\r\n\r\n                EventDispatcher.emit('UpdateBalancePassed', info)\r\n            }\r\n        })\r\n    // }\r\n    // AF.util.postMessage(4, info);\r\n\r\n});\r\n\r\nEventDispatcher.on('HideBalancePassed', () => {\r\n    if (views.BalancePassedView) {\r\n        views.BalancePassedView.destroy()\r\n        views.BalancePassedView = null\r\n    }\r\n    AF.util.postMessage(0, {});\r\n\r\n})\r\n"]}