{"version":3,"sources":["../../../../../assets/framework/common/assets/framework/common/AFList.js"],"names":["global","factory","require","module","cc","AF","List","logger","ListItem","value","previous","next","_value","_previous","_next","ListItemPrototype","prototype","clear","_size","_stack","header","_header","ListPrototype","beginIt","forward","push","it","endIt","pop","isItEnd","idx","length","item","moveIt","nxtOrPre","undefined","getIt","getItValue","len","popBack","empty","concat","values","key","pushBack","extend","list","self","forEach","toArray","ret","cb","e","error","forEachReverse","find","remove","i","removeIf","insert","insertIf","back","getBack","pushFront","popFront","front","getFront"],"mappings":"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","file":"AFList.js","sourceRoot":"../../../../../assets/framework/common","sourcesContent":["(function(global, factory) {\r\n    if (typeof require === 'function' && typeof module === 'object' && module && module['exports']) /* nodeJS */\r\n        module['exports'] = (function() {\r\n            return factory(cc);\r\n        })();\r\n    else /* Global */\r\n        (global.AF = global.AF || {}).List = factory(cc);\r\n})(this, function(logger) {\r\n    'use strict';\r\n\r\n    //---------------------------------------------ListItem-------------------------------------------------------------\r\n    function ListItem(value, previous, next) {\r\n        this._value = value;\r\n        this._previous = previous;\r\n        this._next = next;\r\n    }\r\n\r\n    var ListItemPrototype = ListItem.prototype;\r\n    ListItemPrototype.clear = function() {\r\n        this._value = null;\r\n        this._previous = null;\r\n        this._next = null;\r\n    };\r\n\r\n//-----------------------------------------------List---------------------------------------------------------------\r\n    function List() {\r\n        this._size = 0;\r\n        this._stack = [];\r\n        var header = this._header = new ListItem();\r\n        header._next = header;\r\n        header._previous = header;\r\n    }\r\n\r\n    var ListPrototype = List.prototype;\r\n    ListPrototype.beginIt = function(forward) {\r\n        this._stack.push({\r\n            forward:forward,\r\n            it: forward ? this._header._next : this._header._previous\r\n        });\r\n    };\r\n\r\n    ListPrototype.endIt = function() {\r\n        this._stack.pop();\r\n    };\r\n\r\n    ListPrototype.isItEnd = function() {\r\n        var idx = this._stack.length - 1;\r\n        var item = this._stack[idx];\r\n        return !item || item.it == this._header;\r\n    };\r\n\r\n    ListPrototype.moveIt = function(nxtOrPre, idx, it) {\r\n        nxtOrPre === undefined && (nxtOrPre = true);\r\n        idx === undefined && (idx = this._stack.length - 1);\r\n\r\n        var item = this._stack[idx];\r\n        var value = item ? item.it._value : undefined;\r\n        if (item && (it == undefined || item.it == it)) {\r\n            if (item.forward) {\r\n                if (nxtOrPre) {\r\n                    item.it = item.it._next;\r\n                } else {\r\n                    item.it = item.it._previous;\r\n                }\r\n            } else {\r\n                if (!nxtOrPre) {\r\n                    item.it = item.it._next;\r\n                } else {\r\n                    item.it = item.it._previous;\r\n                }\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n\r\n    ListPrototype.getIt = function(idx) {\r\n        idx === undefined && (idx = this._stack.length - 1);\r\n        var item = this._stack[idx];\r\n        return item ? item.it : undefined;\r\n    };\r\n\r\n    ListPrototype.getItValue = function(idx) {\r\n        var it = this.getIt(idx);\r\n        return it ? it._value : undefined;\r\n    };\r\n\r\n    ListPrototype.len = function() {\r\n        return this._size;\r\n    };\r\n\r\n    ListPrototype.clear = function() {\r\n        while(this.popBack()) {}\r\n    };\r\n\r\n    ListPrototype.empty = function() {\r\n        return this._size == 0;\r\n    };\r\n\r\n    ListPrototype.concat = function(values) {\r\n        for (var key in values) {\r\n            var value = values[key];\r\n            this.pushBack(value);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    ListPrototype.extend = function(list) {\r\n        var self = this;\r\n        list.forEach(function(value) {\r\n            self.pushBack(value);\r\n        });\r\n        return this;\r\n    };\r\n\r\n    ListPrototype.toArray = function() {\r\n        var ret = [];\r\n        this.forEach(function(value) {ret.push(value);});\r\n        return ret;\r\n    };\r\n\r\n    ListPrototype.forEach = function(cb) {\r\n        var ret = false;\r\n        this.beginIt(true);\r\n        while (!this.isItEnd()) {\r\n            try {\r\n                ret = cb(this.getItValue());\r\n                if (ret) {\r\n                    break;\r\n                }\r\n            } catch (e) {\r\n                logger.error(e);\r\n            }\r\n            this.moveIt();\r\n        }\r\n        this.endIt();\r\n        return ret;\r\n    };\r\n\r\n    ListPrototype.forEachReverse = function(cb) {\r\n        var ret = false;\r\n        this.beginIt(false);\r\n        while (!this.isItEnd()) {\r\n            try {\r\n                ret = cb(this.getItValue());\r\n                if (ret) {\r\n                    break;\r\n                }\r\n            } catch (e) {\r\n                logger.error(e);\r\n            }\r\n            this.moveIt();\r\n        }\r\n        this.endIt();\r\n        return ret;\r\n    };\r\n\r\n    ListPrototype.find = function(cb) {\r\n        var ret = undefined;\r\n        this.beginIt(true);\r\n        while (!this.isItEnd()) {\r\n            try {\r\n                var value = this.getItValue();\r\n                if (cb(value)) {\r\n                    ret = value;\r\n                    break;\r\n                }\r\n            } catch (e) {\r\n                logger.error(e);\r\n            }\r\n            this.moveIt();\r\n        }\r\n        this.endIt();\r\n        return ret;\r\n    };\r\n\r\n    ListPrototype.remove = function(it) {\r\n        if (it == this._header) {\r\n            return false;\r\n        }\r\n\r\n        for (var i = 0, len = this._stack.length; i < len; ++i) {\r\n            this.moveIt(false, i, it);\r\n        }\r\n\r\n        it._previous._next = it._next;\r\n        it._next._previous = it._previous;\r\n        it.clear();\r\n        this._size--;\r\n        return true;\r\n    };\r\n\r\n    ListPrototype.removeIf = function(cb) {\r\n        var ret = false;\r\n        this.beginIt(true);\r\n        while (!this.isItEnd()) {\r\n            try {\r\n                if (cb(this.getItValue())) {\r\n                    this.remove(this.getIt());\r\n                    ret = true;\r\n                    break;\r\n                }\r\n            } catch (e) {\r\n                logger.error(e);\r\n            }\r\n            this.moveIt();\r\n        }\r\n        this.endIt();\r\n        return ret;\r\n    };\r\n\r\n    ListPrototype.insert = function(it, value) {\r\n        var item = new ListItem(value, it, it._next);\r\n        item._previous._next = item;\r\n        item._next._previous = item;\r\n        this._size++;\r\n    };\r\n\r\n    ListPrototype.insertIf = function(value, cb) {\r\n        this.beginIt(true);\r\n        var ret = false;\r\n        while (!this.isItEnd()) {\r\n            try {\r\n                if (cb(this.getItValue())) {\r\n                    this.insert(this.getIt(), value);\r\n                    ret = true;\r\n                    break;\r\n                }\r\n            } catch (e) {\r\n                logger.error(e);\r\n            }\r\n            this.moveIt();\r\n        }\r\n\r\n        if (!ret) {\r\n            this.insert(this._header._previous, value);\r\n        }\r\n\r\n        this.endIt();\r\n    };\r\n\r\n\r\n    ListPrototype.pushBack = function(value) {\r\n        this.insert(this._header._previous, value);\r\n    };\r\n\r\n    ListPrototype.popBack = function(){\r\n        var back = this._header._previous;\r\n        var value = back._value;\r\n        this.remove(back);\r\n        return value;\r\n    };\r\n\r\n    ListPrototype.getBack = function() {\r\n        return this._header._previous._value;\r\n    };\r\n\r\n    ListPrototype.pushFront = function(value) {\r\n        this.insert(this._header, value)\r\n    };\r\n\r\n    ListPrototype.popFront = function() {\r\n        var front = this._header._next;\r\n        var value = front._value;\r\n        this.remove(front);\r\n        return value;\r\n    };\r\n\r\n    ListPrototype.getFront = function() {\r\n        return this._header._next._value;\r\n    };\r\n\r\n    return List;\r\n});\r\n"]}