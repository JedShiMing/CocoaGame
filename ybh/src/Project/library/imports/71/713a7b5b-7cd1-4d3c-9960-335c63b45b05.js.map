{"version":3,"sources":["../../../../../../assets/framework/ui/widget/assets/framework/ui/widget/AFLoadingLayer.js"],"names":["DialogBase","require","cc","Class","extends","editor","menu","properties","tips","default","type","Label","displayName","onLoad","prototype","call","regEvent","AF","Event","CLOSE_DIALOG_BY_NAME","dialogCloseEvent","dialogName","log","closeImmediate","onEnable","anim","getComponent","Animation","animState","play","wrapMode","WrapMode","Loop","repeatCount","Infinity","show","scheduleOnce","bind","onDisable","onDestroy","setTips","string","isShow","panel","node","getChildByName","opacity"],"mappings":";;;;;;AAAA,IAAIA,aAAaC,QAAQ,cAAR,CAAjB;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASJ,UADJ;;AAGLK,YAAQ;AACJC,cAAM;AADF,KAHH;;AAOLC,gBAAY;AACRC,cAAM;AACFC,qBAAS,IADP;AAEFC,kBAAMR,GAAGS,KAFP;AAGFC,yBAAa;AAHX;AADE,KAPP;;AAeL;AACAC,YAAQ,kBAAY;AAChBb,mBAAWc,SAAX,CAAqBD,MAArB,CAA4BE,IAA5B,CAAiC,IAAjC;AACA,aAAKC,QAAL,CAAcC,GAAGC,KAAH,CAASC,oBAAvB,EAA6C,KAAKC,gBAAlD;AACH,KAnBI;;AAqBLA,sBAAkB,0BAAUC,UAAV,EAAsB;AACpC,YAAIA,eAAe,eAAnB,EAAoC;AAChCnB,eAAGoB,GAAH,CAAO,2CAAP;AACA,iBAAKC,cAAL;AACH;AACJ,KA1BI;;AA4BLC,cAAU,oBAAY;AAClBxB,mBAAWc,SAAX,CAAqBU,QAArB,CAA8BT,IAA9B,CAAmC,IAAnC;;AAEA,YAAIU,OAAO,KAAKC,YAAL,CAAkBxB,GAAGyB,SAArB,CAAX;AACA,YAAIF,IAAJ,EAAU;AACN,gBAAIG,YAAYH,KAAKI,IAAL,EAAhB;;AAEAD,sBAAUE,QAAV,GAAqB5B,GAAG6B,QAAH,CAAYC,IAAjC;AACAJ,sBAAUK,WAAV,GAAwBC,QAAxB;AACH;;AAED,aAAKC,IAAL,CAAU,KAAV;AACA,aAAKC,YAAL,CAAkB,YAAY;AAC1B,iBAAKD,IAAL,CAAU,IAAV;AACH,SAFiB,CAEhBE,IAFgB,CAEX,IAFW,CAAlB,EAEc,GAFd;AAGH,KA3CI;;AA6CLC,eAAW,qBAAY;AACnBtC,mBAAWc,SAAX,CAAqBwB,SAArB,CAA+BvB,IAA/B,CAAoC,IAApC;AACH,KA/CI;;AAiDLwB,eAAW,qBAAY;AACnBvC,mBAAWc,SAAX,CAAqByB,SAArB,CAA+BxB,IAA/B,CAAoC,IAApC;AACH,KAnDI;;AAqDLyB,aAAS,iBAAUhC,IAAV,EAAgB;AACrB,YAAI,CAAC,KAAKA,IAAV,EAAgB;AAChB,aAAKA,IAAL,CAAUiC,MAAV,GAAmBjC,IAAnB;AACH,KAxDI;AAyDL2B,UAAM,cAAUO,MAAV,EAAkB;AACpB,YAAIC,QAAQ,KAAKC,IAAL,CAAUC,cAAV,CAAyB,OAAzB,CAAZ;AACAF,cAAMG,OAAN,GAAgBJ,SAAS,GAAT,GAAe,CAA/B;AACH;AA5DI,CAAT","file":"AFLoadingLayer.js","sourceRoot":"../../../../../../assets/framework/ui/widget","sourcesContent":["var DialogBase = require('AFDialogBase');\r\n\r\ncc.Class({\r\n    extends: DialogBase,\r\n\r\n    editor: {\r\n        menu: 'ApplicationFramework/AFLoadingLayer'\r\n    },\r\n\r\n    properties: {\r\n        tips: {\r\n            default: null,\r\n            type: cc.Label,\r\n            displayName: 'tips文本标签'\r\n        }\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        DialogBase.prototype.onLoad.call(this);\r\n        this.regEvent(AF.Event.CLOSE_DIALOG_BY_NAME, this.dialogCloseEvent);\r\n    },\r\n\r\n    dialogCloseEvent: function (dialogName) {\r\n        if (dialogName === 'LOADING_LAYER') {\r\n            cc.log(\"CLOSE_DIALOG_BY_NAME AFLoadingLayer close\");\r\n            this.closeImmediate();\r\n        }\r\n    },\r\n\r\n    onEnable: function () {\r\n        DialogBase.prototype.onEnable.call(this);\r\n\r\n        var anim = this.getComponent(cc.Animation);\r\n        if (anim) {\r\n            var animState = anim.play();\r\n\r\n            animState.wrapMode = cc.WrapMode.Loop;\r\n            animState.repeatCount = Infinity;\r\n        }\r\n\r\n        this.show(false);\r\n        this.scheduleOnce(function () {\r\n            this.show(true);\r\n        }.bind(this), 1.0);\r\n    },\r\n\r\n    onDisable: function () {\r\n        DialogBase.prototype.onDisable.call(this);\r\n    },\r\n\r\n    onDestroy: function () {\r\n        DialogBase.prototype.onDestroy.call(this);\r\n    },\r\n\r\n    setTips: function (tips) {\r\n        if (!this.tips) return;\r\n        this.tips.string = tips;\r\n    },\r\n    show: function (isShow) {\r\n        var panel = this.node.getChildByName(\"panel\");\r\n        panel.opacity = isShow ? 255 : 0;\r\n    }\r\n});\r\n"]}