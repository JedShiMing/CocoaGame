{"version":3,"sources":["AFLoadingAnim.js"],"names":["cc","Class","extends","Component","editor","menu","properties","inAnimClip","default","type","AnimationClip","displayName","endAnimClip","onLoad","_anim","getComponent","Animation","on","onAnimEndListener","onEnable","node","x","winSize","width","y","height","onDestroy","off","playInAnim","cb","self","active","inAnimClipState1","play","name","playoutflag","playOutAnim","isPlaying","e","v","_clip"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,YAAQ;AACJC,cAAM;AADF,KAHH;;AAOLC,gBAAY;AACRC,oBAAY;AACRC,qBAAS,IADD;AAERC,kBAAMT,GAAGU,aAFD;AAGRC,yBAAa;AAHL,SADJ;AAMRC,qBAAa;AACTJ,qBAAS,IADA;AAETC,kBAAMT,GAAGU,aAFA;AAGTC,yBAAa;AAHJ;AANL,KAPP;;AAoBLE,YAAQ,kBAAW;AACf,aAAKC,KAAL,GAAa,KAAKC,YAAL,CAAkBf,GAAGgB,SAArB,CAAb;AACA,aAAKF,KAAL,CAAWG,EAAX,CAAc,UAAd,EAA0B,KAAKC,iBAA/B,EAAkD,IAAlD;AACH,KAvBI;;AAyBLC,cAAU,oBAAY;AAClB,aAAKC,IAAL,CAAUC,CAAV,GAAcrB,GAAGsB,OAAH,CAAWC,KAAX,GAAmB,CAAjC;AACA,aAAKH,IAAL,CAAUI,CAAV,GAAcxB,GAAGsB,OAAH,CAAWG,MAAX,GAAoB,CAAlC;AACH,KA5BI;;AA8BLC,eAAW,qBAAY;AACnB,aAAKZ,KAAL,IAAc,KAAKA,KAAL,CAAWa,GAAX,CAAe,UAAf,EAA2B,KAAKT,iBAAhC,EAAmD,IAAnD,CAAd;AACH,KAhCI;;AAkCLU,gBAAY,oBAAUC,EAAV,EAAc;AACtB,YAAIC,OAAO,IAAX;AACA,YAAIA,KAAKhB,KAAL,IAAcgB,KAAKvB,UAAvB,EAAmC;AAC/BuB,iBAAKV,IAAL,CAAUW,MAAV,GAAmB,IAAnB;AACAD,iBAAKE,gBAAL,GAAwBF,KAAKhB,KAAL,CAAWmB,IAAX,CAAgB,KAAK1B,UAAL,CAAgB2B,IAAhC,CAAxB;AACAJ,iBAAKK,WAAL,GAAmB,IAAnB;AACAN,kBAAMA,IAAN;AACH;AACJ,KA1CI;;AA4CLO,iBAAa,uBAAY;AACrB,YAAIN,OAAO,IAAX;AACAA,aAAKK,WAAL,GAAmB,KAAnB;AACA,YAAIL,KAAKE,gBAAL,IAAyB,CAACF,KAAKE,gBAAL,CAAsBK,SAApD,EAA+D;AAC3DP,iBAAKhB,KAAL,CAAWmB,IAAX,CAAgBH,KAAKlB,WAAL,CAAiBsB,IAAjC;AACH;AACJ,KAlDI;;AAoDLhB,uBAAmB,2BAAUoB,CAAV,EAAaC,CAAb,EAAgB;AAC/B,YAAIT,OAAO,IAAX;AACA,YAAIS,EAAEC,KAAF,CAAQN,IAAR,KAAiBJ,KAAKvB,UAAL,CAAgB2B,IAArC,EAA2C;AAAE;AACzC,gBAAI,CAAC,KAAKC,WAAV,EAAuB;AACnBL,qBAAKhB,KAAL,CAAWmB,IAAX,CAAgBH,KAAKlB,WAAL,CAAiBsB,IAAjC;AACH;AACJ,SAJD,MAIO,IAAIK,EAAEC,KAAF,CAAQN,IAAR,KAAiBJ,KAAKlB,WAAL,CAAiBsB,IAAtC,EAA4C;AAAE;AACjDJ,iBAAKV,IAAL,CAAUW,MAAV,GAAmB,KAAnB;AACH;AACJ;AA7DI,CAAT","file":"AFLoadingAnim.js","sourceRoot":"../../../../../../assets/framework/ui/widget","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    editor: {\n        menu: 'ApplicationFramework/AFLoadingAnim'\n    },\n\n    properties: {\n        inAnimClip: {\n            default: null,\n            type: cc.AnimationClip,\n            displayName: '开始动画'\n        },\n        endAnimClip: {\n            default: null,\n            type: cc.AnimationClip,\n            displayName: '结束动画'\n        }\n    },\n\n    onLoad: function() {\n        this._anim = this.getComponent(cc.Animation);\n        this._anim.on('finished', this.onAnimEndListener, this)\n    },\n\n    onEnable: function () {\n        this.node.x = cc.winSize.width / 2;\n        this.node.y = cc.winSize.height / 2;\n    },\n\n    onDestroy: function () {\n        this._anim && this._anim.off('finished', this.onAnimEndListener, this)\n    },\n\n    playInAnim: function (cb) {\n        let self = this\n        if (self._anim && self.inAnimClip) {\n            self.node.active = true;\n            self.inAnimClipState1 = self._anim.play(this.inAnimClip.name);\n            self.playoutflag = true\n            cb && cb();\n        }\n    },\n\n    playOutAnim: function () {\n        let self = this\n        self.playoutflag = false\n        if (self.inAnimClipState1 && !self.inAnimClipState1.isPlaying) {\n            self._anim.play(self.endAnimClip.name);\n        }\n    },\n\n    onAnimEndListener: function (e, v) {\n        let self = this\n        if (v._clip.name === self.inAnimClip.name) { // 开始动画结束\n            if (!this.playoutflag) {\n                self._anim.play(self.endAnimClip.name);\n            }\n        } else if (v._clip.name === self.endAnimClip.name) { // 结束动画结束\n            self.node.active = false;\n        }\n    }\n});\n"]}