{"version":3,"sources":["af-message-box-mgr.js"],"names":["Const","require","EventDispatcher","Event","DEFAULT_MESSAGE_BOX_STYLE_NAME","_styles","MessageBox","WECHAT_SUBSCRIPTION","TYPE_OK","TYPE_YES_NO","RET_OK","RET_YES","RET_NO","RET_CLOSE","addStyle","name","prefabName","console","log","AF","preloadDialog","resetDefaultStyle","undefined","show","option","style","enableTouchEmptyPlaceToClose","openDialog","YesNo","title","content","callback","yesButtonText","noButtonText","type","enableCloseButton","OK","okButtonText","NetError","code","gotoScene","zOrder","MESSAGE_BOX_Z_ORDER","module","exports","window"],"mappings":"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","file":"af-message-box-mgr.js","sourceRoot":"../../../../../../assets/framework/ui/mgr","sourcesContent":["/**\r\n * MessageBox管理器\r\n */\r\n\r\nvar Const = require(\"af-const\");\r\nvar EventDispatcher = require(\"af-event-dispatcher\");\r\nvar Event = require(\"af-event\");\r\n\r\nvar DEFAULT_MESSAGE_BOX_STYLE_NAME = 'DefaultMessageBoxStyle';\r\nvar _styles = {};\r\n\r\nvar MessageBox = {};\r\n\r\nconst WECHAT_SUBSCRIPTION = '像素物语';\r\n\r\n// message box 类型， ok模式/确认取消模式\r\nMessageBox.TYPE_OK = 1;\r\nMessageBox.TYPE_YES_NO = 2;\r\n\r\n// 用户操作回调\r\nMessageBox.RET_OK = 1;\r\nMessageBox.RET_YES = 2;\r\nMessageBox.RET_NO = 3;\r\nMessageBox.RET_CLOSE = 4;\r\n\r\n// 添加样式\r\nMessageBox.addStyle = function (name, prefabName) {\r\n    console.log(\"name: \", name, \", prefabName: \", prefabName);\r\n    _styles[name] = prefabName;\r\n    AF.preloadDialog(prefabName);\r\n};\r\n\r\n// 重置默认样式\r\nMessageBox.resetDefaultStyle = function (prefabName) {\r\n    console.log(\"prefabName: \", prefabName);\r\n    _styles['default'] = undefined;\r\n    if (prefabName) {\r\n        this.addStyle('default', prefabName);\r\n    }\r\n};\r\n\r\n/**\r\n * option : {\r\n *      type:  类型 ( TYPE_OK 或 TYPE_YES_NO )\r\n *      title:  标题\r\n *      content: 内容\r\n *      richText: 富文本内容\r\n *      callback: 回调\r\n *      enableCloseButton: 是否显示关闭按钮 (默认kaiqi)\r\n *      okButtonText: OK按钮文本\r\n *      yesButtonText: Yes按钮文本\r\n *      noButtonText: No按钮文本\r\n *      enableTouchEmptyPlaceToClose: 点击空白处关闭\r\n *      style: 样式名\r\n *      zOrder: 层级 \r\n * }\r\n */\r\nMessageBox.show = function (option) {\r\n    var prefabName;\r\n    if (option.style && _styles[option.style]) {\r\n        prefabName = _styles[option.style];\r\n    } else {\r\n        prefabName = _styles['default'] ? _styles['default'] : _styles['_default_'];\r\n    }\r\n    if (option.enableTouchEmptyPlaceToClose === undefined) {\r\n        option.enableTouchEmptyPlaceToClose = true;\r\n    }\r\n    AF.openDialog(prefabName, option);\r\n};\r\n\r\nMessageBox.YesNo = function (title, content, callback, yesButtonText, noButtonText, enableTouchEmptyPlaceToClose) {\r\n    MessageBox.show({\r\n        type: MessageBox.TYPE_YES_NO,\r\n        title: title,\r\n        content: content,\r\n        callback: callback,\r\n        yesButtonText: yesButtonText,\r\n        noButtonText: noButtonText,\r\n        enableCloseButton: false,\r\n        enableTouchEmptyPlaceToClose: enableTouchEmptyPlaceToClose,\r\n    });\r\n};\r\n\r\nMessageBox.OK = function (title, content, callback, okButtonText, enableTouchEmptyPlaceToClose, enableCloseButton) {\r\n    MessageBox.show({\r\n        type: MessageBox.TYPE_OK,\r\n        title: title,\r\n        content: content,\r\n        callback: callback,\r\n        okButtonText: okButtonText || '确定',\r\n        enableCloseButton: enableCloseButton || false,\r\n        enableTouchEmptyPlaceToClose: enableTouchEmptyPlaceToClose,\r\n    });\r\n};\r\n\r\nMessageBox.NetError = function (content) {\r\n    MessageBox.show({\r\n        type: MessageBox.TYPE_OK,\r\n        title: '',\r\n        content: '老大,网络发生错误!',\r\n        callback: function (code) {\r\n            AF.gotoScene(\"HallLoginScene\");\r\n        },\r\n        okButtonText: '重连',\r\n        enableCloseButton: false,\r\n        enableTouchEmptyPlaceToClose: false,\r\n        zOrder: AF.Const.MESSAGE_BOX_Z_ORDER,\r\n    });\r\n};\r\n\r\n// // 加载框架默认的吐司消息样式\r\n// EventDispatcher.once(Event.GAME_LOADED, function () {\r\n//     MessageBox.addStyle('_default_', DEFAULT_MESSAGE_BOX_STYLE_NAME);\r\n// });\r\n\r\nmodule.exports = (window.AF = window.AF || {}).MessageBox = MessageBox;"]}