{"version":3,"sources":["AFClickWidgetAttach.js"],"names":["BUTTON_TYPE","cc","Enum","NORMAL","START","GOLD","CRYSTAL","Class","extends","Component","editor","menu","properties","clickEffect","type","AudioClip","default","displayName","enableClickAudioEffect","buttonType","tooltip","onLoad","node","on","onClicked","onDestroy","off","btn","getComponent","interactable","enabledInHierarchy","AF","audio","playButtonEffect","_pressed"],"mappings":";;;;;;AAAA;AACA,IAAIA,cAAcC,GAAGC,IAAH,CAAQ;AACtBC,YAAQ,CAAC,CADa;AAEtBC,WAAO,CAAC,CAFc;AAGtBC,UAAM,CAAC,CAHe;AAItBC,aAAS,CAAC;AAJY,CAAR,CAAlB;AAMAL,GAAGM,KAAH,CAAS;AACLC,aAASP,GAAGQ,SADP;;AAGLC,YAAQ;AACJC,cAAM;AADF,KAHH;;AAOLC,gBAAY;AACRC,qBAAa;AACTC,kBAAMb,GAAGc,SADA;AAETC,qBAAS,IAFA;AAGTC,yBAAa;AAHJ,SADL;;AAORC,gCAAwB;AACpBF,qBAAS,IADW;AAEpBC,yBAAa;AAFO,SAPhB;AAWRE,oBAAY;AACRL,kBAAMd,WADE;AAERgB,qBAAShB,YAAYG,MAFb;AAGRc,yBAAa,MAHL;AAIRG,qBAAS;AAJD;AAXJ,KAPP;;AA0BL;AACAC,YAAQ,kBAAY;AAChB,aAAKC,IAAL,CAAUC,EAAV,CAAa,UAAb,EAAyB,KAAKC,SAA9B,EAAyC,IAAzC;AACH,KA7BI;;AA+BLC,eAAW,qBAAY;AACnB,aAAKH,IAAL,CAAUI,GAAV,CAAc,UAAd,EAA0B,KAAKF,SAA/B,EAA0C,IAA1C;AACH,KAjCI;;AAmCLA,eAAW,qBAAY;AACnB,YAAI,CAAC,KAAKN,sBAAV,EAAkC;AAAE;AAAS;AAC7C,YAAIS,MAAM,KAAKC,YAAL,CAAkB,WAAlB,CAAV;AACA,YAAI,CAACD,GAAL,EAAU;AACNA,kBAAM,KAAKC,YAAL,CAAkB,WAAlB,CAAN;AACH;AACD,YAAI,CAACD,IAAIE,YAAL,IAAqB,CAACF,IAAIG,kBAA9B,EAAkD;AAC9CC,eAAGC,KAAH,CAASC,gBAAT,CAA0B,gBAA1B;AACA;AACH;AACD,YAAI,CAACN,IAAIO,QAAT,EAAmB;AAAE;AAAS;AAC9B,YAAI,KAAKf,UAAL,KAAoBnB,YAAYG,MAApC,EAA4C;AACxC4B,eAAGC,KAAH,CAASC,gBAAT,CAA0B,QAA1B;AACH,SAFD,MAEO,IAAI,KAAKd,UAAL,KAAoBnB,YAAYI,KAApC,EAA2C;AAC9C2B,eAAGC,KAAH,CAASC,gBAAT,CAA0B,QAA1B;AACH,SAFM,MAEA,IAAI,KAAKd,UAAL,KAAoBnB,YAAYK,IAApC,EAA0C;AAC7C0B,eAAGC,KAAH,CAASC,gBAAT,CAA0B,MAA1B;AACH,SAFM,MAEA,IAAI,KAAKd,UAAL,KAAoBnB,YAAYM,OAApC,EAA6C;AAChDyB,eAAGC,KAAH,CAASC,gBAAT,CAA0B,SAA1B;AACH;AACJ;AAvDI,CAAT","file":"AFClickWidgetAttach.js","sourceRoot":"../../../../../../assets/framework/ui/component","sourcesContent":["// var BUTTON_TYPE = cc.Class({ NORMAL, START });\r\nvar BUTTON_TYPE = cc.Enum({\r\n    NORMAL: -1,\r\n    START: -1,\r\n    GOLD: -1,\r\n    CRYSTAL: -1,\r\n});\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    editor: {\r\n        menu: 'ApplicationFramework/AFClickWidgetAttach'\r\n    },\r\n\r\n    properties: {\r\n        clickEffect: {\r\n            type: cc.AudioClip,\r\n            default: null,\r\n            displayName: '点击音效'\r\n        },\r\n\r\n        enableClickAudioEffect: {\r\n            default: true,\r\n            displayName: \"开启点击音效\"\r\n        },\r\n        buttonType: {\r\n            type: BUTTON_TYPE,\r\n            default: BUTTON_TYPE.NORMAL,\r\n            displayName: '按钮类型',\r\n            tooltip: '气泡或者正常'\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.node.on('touchend', this.onClicked, this);\r\n    },\r\n\r\n    onDestroy: function () {\r\n        this.node.off('touchend', this.onClicked, this);\r\n    },\r\n\r\n    onClicked: function () {\r\n        if (!this.enableClickAudioEffect) { return; }\r\n        var btn = this.getComponent('cc.Button');\r\n        if (!btn) {\r\n            btn = this.getComponent('cc.Toggle');\r\n        }\r\n        if (!btn.interactable || !btn.enabledInHierarchy) {\r\n            AF.audio.playButtonEffect('button_disable');\r\n            return;\r\n        }\r\n        if (!btn._pressed) { return; }\r\n        if (this.buttonType === BUTTON_TYPE.NORMAL) {\r\n            AF.audio.playButtonEffect('button');\r\n        } else if (this.buttonType === BUTTON_TYPE.START) {\r\n            AF.audio.playButtonEffect('bubble');\r\n        } else if (this.buttonType === BUTTON_TYPE.GOLD) {\r\n            AF.audio.playButtonEffect('gold');\r\n        } else if (this.buttonType === BUTTON_TYPE.CRYSTAL) {\r\n            AF.audio.playButtonEffect('crystal');\r\n        }\r\n    },\r\n});\r\n"]}