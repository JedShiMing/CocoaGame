{"version":3,"sources":["AFSwitchSceneAnim.js"],"names":["cc","Class","extends","Component","editor","menu","properties","inAnimClip","default","type","AnimationClip","displayName","loopAnimClip","outAnimClip","onLoad","_anim","getComponent","Animation","on","onAnimCompleted","_inAnimCallback","onDestroy","off","onEnable","node","x","winSize","width","y","height","playInAnim","cb","active","play","name","playOutAnim","event","animationState","state"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,YAAQ;AACJC,cAAM;AADF,KAHH;;AAOLC,gBAAY;AACRC,oBAAY;AACRC,qBAAS,IADD;AAERC,kBAAMT,GAAGU,aAFD;AAGRC,yBAAa;AAHL,SADJ;AAMRC,sBAAc;AACVJ,qBAAS,IADC;AAEVC,kBAAMT,GAAGU,aAFC;AAGVC,yBAAa;AAHH,SANN;AAWRE,qBAAa;AACTL,qBAAS,IADA;AAETC,kBAAMT,GAAGU,aAFA;AAGTC,yBAAa;AAHJ;AAXL,KAPP;;AAyBLG,YAAQ,kBAAY;AAChB,aAAKC,KAAL,GAAa,KAAKC,YAAL,CAAkBhB,GAAGiB,SAArB,CAAb;AACA,aAAKF,KAAL,IAAc,KAAKA,KAAL,CAAWG,EAAX,CAAc,UAAd,EAA0B,KAAKC,eAA/B,EAAgD,IAAhD,CAAd;AACA,aAAKC,eAAL,GAAuB,IAAvB;AACH,KA7BI;;AA+BLC,eAAW,qBAAY;AACnB,YAAI,KAAKN,KAAT,EAAgB;AACZ,iBAAKA,KAAL,CAAWO,GAAX,CAAe,UAAf,EAA2B,KAAKH,eAAhC,EAAiD,IAAjD;AACH;AACJ,KAnCI;;AAqCLI,cAAU,oBAAY;AAClB,aAAKC,IAAL,CAAUC,CAAV,GAAczB,GAAG0B,OAAH,CAAWC,KAAX,GAAmB,CAAjC;AACA,aAAKH,IAAL,CAAUI,CAAV,GAAc5B,GAAG0B,OAAH,CAAWG,MAAX,GAAoB,CAAlC;AACH,KAxCI;;AA0CLC,gBAAY,oBAAUC,EAAV,EAAc;AACtB,aAAKX,eAAL,GAAuBW,EAAvB;AACA,YAAI,KAAKhB,KAAL,IAAc,KAAKR,UAAvB,EAAmC;AAC/B,iBAAKiB,IAAL,CAAUQ,MAAV,GAAmB,IAAnB;AACA,iBAAKjB,KAAL,CAAWkB,IAAX,CAAgB,KAAK1B,UAAL,CAAgB2B,IAAhC;AACH,SAHD,MAGO;AACH,iBAAKd,eAAL,GAAuB,IAAvB;AACAW,kBAAMA,IAAN;AACH;AACJ,KAnDI;;AAqDLI,iBAAa,uBAAW;AACpB,YAAI,KAAKpB,KAAL,IAAc,KAAKF,WAAvB,EAAoC;AAChC,iBAAKE,KAAL,CAAWkB,IAAX,CAAgB,KAAKpB,WAAL,CAAiBqB,IAAjC;AACH;AACJ,KAzDI;;AA2DLf,qBAAiB,yBAAUiB,KAAV,EAAiBC,cAAjB,EAAiC;AAC9C,YAAIC,QAAQD,cAAZ;AACA,YAAI,KAAK9B,UAAL,IAAmB+B,MAAMJ,IAAN,KAAe,KAAK3B,UAAL,CAAgB2B,IAAtD,EAA4D;AACxD,gBAAI,KAAKd,eAAT,EAA0B;AACtB,qBAAKA,eAAL;AACA,qBAAKA,eAAL,GAAuB,IAAvB;AACH;AACD,gBAAI,KAAKR,YAAT,EAAuB;AACnB,qBAAKG,KAAL,CAAWkB,IAAX,CAAgB,KAAKrB,YAAL,CAAkBsB,IAAlC;AACH;AACJ,SARD,MAQO,IAAI,KAAKrB,WAAL,IAAoByB,MAAMJ,IAAN,KAAe,KAAKrB,WAAL,CAAiBqB,IAAxD,EAA8D;AACjE,iBAAKV,IAAL,CAAUQ,MAAV,GAAmB,KAAnB;AACH;AACJ;AAxEI,CAAT","file":"AFSwitchSceneAnim.js","sourceRoot":"../../../../../../assets/framework/ui/widget","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    editor: {\r\n        menu: 'ApplicationFramework/AFSwitchSceneAnim'\r\n    },\r\n\r\n    properties: {\r\n        inAnimClip: {\r\n            default: null,\r\n            type: cc.AnimationClip,\r\n            displayName: '进入动画'\r\n        },\r\n        loopAnimClip: {\r\n            default: null,\r\n            type: cc.AnimationClip,\r\n            displayName: '循环动画'\r\n        },\r\n        outAnimClip: {\r\n            default: null,\r\n            type: cc.AnimationClip,\r\n            displayName: '淡出动画'\r\n        },\r\n    },\r\n\r\n    onLoad: function () {\r\n        this._anim = this.getComponent(cc.Animation);\r\n        this._anim && this._anim.on('finished', this.onAnimCompleted, this);\r\n        this._inAnimCallback = null;\r\n    },\r\n\r\n    onDestroy: function () {\r\n        if (this._anim) {\r\n            this._anim.off('finished', this.onAnimCompleted, this);\r\n        }\r\n    },\r\n\r\n    onEnable: function () {\r\n        this.node.x = cc.winSize.width / 2;\r\n        this.node.y = cc.winSize.height / 2;\r\n    },\r\n\r\n    playInAnim: function (cb) {\r\n        this._inAnimCallback = cb;\r\n        if (this._anim && this.inAnimClip) {\r\n            this.node.active = true;\r\n            this._anim.play(this.inAnimClip.name);\r\n        } else {\r\n            this._inAnimCallback = null;\r\n            cb && cb();\r\n        }\r\n    },\r\n\r\n    playOutAnim: function() {\r\n        if (this._anim && this.outAnimClip) {\r\n            this._anim.play(this.outAnimClip.name);\r\n        }\r\n    },\r\n\r\n    onAnimCompleted: function (event, animationState) {\r\n        var state = animationState;\r\n        if (this.inAnimClip && state.name === this.inAnimClip.name) {\r\n            if (this._inAnimCallback) {\r\n                this._inAnimCallback();\r\n                this._inAnimCallback = null;\r\n            }\r\n            if (this.loopAnimClip) {\r\n                this._anim.play(this.loopAnimClip.name);\r\n            }\r\n        } else if (this.outAnimClip && state.name === this.outAnimClip.name) {\r\n            this.node.active = false;\r\n        }\r\n    }\r\n});"]}