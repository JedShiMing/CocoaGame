{"version":3,"sources":["af-qq-helper.js"],"names":["self","videoAdObj","videoAd","status","bannerAd","infoButton","module","exports","AF","qqHelper","init","isVideoAdOpen","createVideoAd","userInfo","openId","getStorage","nickName","avatarUrl","shareInfo","GameStatusInfo","setStorage","getNickName","getAvatarUrl","BK","onEnterBackground","Console","log","onEnterForeground","_getShareInfo","app","type","NaN","data","str","gameParam","setShareInfo","strs","split","i","length","key","getShareInfo","localStorage","getItem","value","setItem","shareAppMessage","scene","onSuccess","onFail","extendInfo","content","is_success","Share","share","qqImgUrl","isToFriend","summary","success","succObj","code","JSON","stringify","fail","failObj","msg","complete","obj","Advertisement","onLoad","onError","err","onPlayFinish","showVideoAd","onFinish","isVideoAdLoaded","audio","onGameEnterBackground","onClose","onGameEnterForeground","show","showBannerAd","createBannerAd","viewId","ToastMessage","hideBannerAd","upScore","startTime","endTime","score","Script","logToConsole","userData","startMs","toString","endMs","scoreInfo","attr","order","QQ","uploadScoreWithoutRoom","errCode","cmd","getRankList","cb","rankType","getRankListWithoutRoom","ranking_list","getUserInfo","MQQ","Account","getNick","currOpenId","getHeadEx"],"mappings":"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","file":"af-qq-helper.js","sourceRoot":"../../../../../assets/framework/platform","sourcesContent":["\r\n\"use strict\";\r\n\r\nvar self;\r\n\r\nvar videoAdObj = {\r\n    videoAd: null,\r\n    status: 0,\r\n};\r\n\r\nvar bannerAd = null;\r\n\r\nvar infoButton;\r\n\r\nself = module.exports = AF.qqHelper = {\r\n    init: function (isVideoAdOpen) {\r\n        if (isVideoAdOpen) {\r\n            self.createVideoAd();\r\n        }\r\n\r\n        self.userInfo = {\r\n            openId: self.getStorage('qqOpenId'),\r\n            nickName: self.getStorage('qqNickName') || '',\r\n            avatarUrl: self.getStorage('qqAvatarUrl') || '',\r\n        };\r\n\r\n        self.shareInfo = {\r\n\r\n        };\r\n        \r\n        self.userInfo.openId = GameStatusInfo.openId;\r\n        self.setStorage('qqOpenId', self.userInfo.openId);\r\n        self.getNickName(self.userInfo.openId, function (openId, nickName) {\r\n            if(openId !== self.userInfo.openId){\r\n                return;\r\n            }\r\n            self.userInfo.nickName = nickName;\r\n            self.setStorage('qqNickName', self.userInfo.nickName);\r\n        });\r\n        self.getAvatarUrl(self.userInfo.openId, function (openId, avatarUrl) {\r\n            if(openId !== self.userInfo.openId){\r\n                return;\r\n            }\r\n            self.userInfo.avatarUrl = avatarUrl;\r\n            self.setStorage('qqAvatarUrl', self.userInfo.avatarUrl);\r\n        });\r\n\r\n        BK.onEnterBackground(() => {\r\n            BK.Console.log('onEnterBackground ');\r\n            self.onEnterBackground();\r\n        });\r\n\r\n        BK.onEnterForeground(() => {\r\n            BK.Console.log('onEnterForeground ');\r\n            self.onEnterForeground();\r\n        });\r\n\r\n        self._getShareInfo();\r\n        \r\n    },\r\n    \r\n    onEnterBackground: function (app) {\r\n        BK.Console.log('游戏进入后台');\r\n    },\r\n\r\n    onEnterForeground: function (app) {\r\n        BK.Console.log('游戏进入前台');\r\n        self._getShareInfo();\r\n    },\r\n\r\n    _getShareInfo: function () {\r\n        var type = NaN;\r\n        var data = '';\r\n        var str = GameStatusInfo.gameParam;\r\n        BK.Console.log('分享信息 gameParam', str);\r\n        if (!str) {\r\n            self.setShareInfo(type, data);\r\n            return;\r\n        }\r\n        var strs = str.split(\"&\");\r\n        for (var i = 0; i < strs.length; i++) {\r\n            let key = strs[i].split(\"=\")[0];\r\n            if ('type' === key) {\r\n                type = (strs[i].split(\"=\")[1]);\r\n            } else if ('data' === key) {\r\n                data = strs[i].split(\"=\")[1]\r\n            }\r\n        }\r\n        self.setShareInfo(type, data);\r\n\r\n    },\r\n\r\n    getShareInfo: function () {\r\n        return self.shareInfo;\r\n    },\r\n\r\n    setShareInfo: function (type, data) {\r\n        self.shareInfo = {};\r\n        if (type && data) {\r\n            self.shareInfo[type] = data;\r\n        }\r\n    },\r\n\r\n    getStorage: function (key) {\r\n        return BK.localStorage.getItem(key);\r\n    },\r\n\r\n    setStorage: function (key, value) {\r\n        BK.localStorage.setItem(key, value);\r\n    },\r\n\r\n    shareAppMessage: function (scene, onSuccess, onFail, extendInfo, content) {\r\n\r\n        var is_success = false;\r\n\r\n        BK.Share.share({\r\n            qqImgUrl: 'http://manager.pixel08.com/api/public/uploads/c8bc86484b28748830bf1a30b43385951534220948325.jpg',\r\n            isToFriend: true,\r\n            summary: (content && content.summary) || 'O(∩_∩)O，我跳了90分，我打赌你肯定超不过我',\r\n            extendInfo: extendInfo,\r\n            success: function (succObj) {\r\n                BK.Console.log('分享成功', succObj.code, JSON.stringify(succObj.data));\r\n                is_success = true;\r\n            },\r\n            fail: function (failObj) {\r\n                BK.Console.log('分享失败', failObj.code, JSON.stringify(failObj.msg));\r\n            },\r\n            complete: () => {\r\n                BK.Console.log('分享完成，不论成功失败');\r\n                if (is_success) {\r\n                    onSuccess();\r\n                } else {\r\n                    onFail();\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n    createVideoAd: function () {\r\n        var obj = videoAdObj;\r\n\r\n        if (obj.videoAd) {\r\n            return;\r\n        }\r\n\r\n        if (obj.status != 0) {\r\n            return;\r\n        }\r\n\r\n        obj.videoAd = BK.Advertisement.createVideoAd();\r\n        obj.status = 1;\r\n\r\n        obj.videoAd.onLoad(function () {\r\n            obj.status = 2;\r\n        });\r\n\r\n        obj.videoAd.onError(function (err) {\r\n            obj.videoAd = null;\r\n            obj.status = 0;\r\n\r\n            self.createVideoAd();\r\n        });\r\n\r\n        obj.videoAd.onPlayFinish(function () {\r\n            obj.status = 4;\r\n        });\r\n    },\r\n\r\n    showVideoAd: function (onFinish) {\r\n        if (!self.isVideoAdLoaded()) {\r\n            return;\r\n        }\r\n\r\n        AF.audio.onGameEnterBackground();\r\n\r\n        var obj = videoAdObj;\r\n\r\n        obj.status = 3;\r\n\r\n        obj.videoAd.onClose(function () {\r\n            // 用户点击了【关闭广告】按钮\r\n            // 开启声音 \r\n            AF.audio.onGameEnterForeground();\r\n\r\n            onFinish(obj.status == 4);\r\n\r\n            obj.videoAd = null;\r\n            obj.status = 0;\r\n\r\n            self.createVideoAd();\r\n        });\r\n\r\n        obj.videoAd.show();\r\n    },\r\n\r\n    isVideoAdLoaded: function () {\r\n        var obj = videoAdObj;\r\n\r\n        if (!obj.videoAd) {\r\n            return false;\r\n        }\r\n\r\n        if (obj.status != 2) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    showBannerAd: function () {\r\n\r\n        if (true) {\r\n            return;\r\n        }\r\n\r\n        if (bannerAd) {\r\n            return;\r\n        }\r\n\r\n        bannerAd = BK.Advertisement.createBannerAd({\r\n            viewId:1001,\r\n        });\r\n\r\n        bannerAd.onLoad(function () {\r\n            AF.ToastMessage.show(\"onLoad\");\r\n            bannerAd.show();\r\n        });\r\n    },\r\n\r\n    hideBannerAd: function () {\r\n\r\n    },\r\n\r\n    upScore:function({startTime,endTime,score}) {\r\n        BK.Script.logToConsole = 1\r\n        BK.Script.log(1,1,'上传分数' + JSON.stringify({startTime,endTime,score}));\r\n        var data = {\r\n            userData: [\r\n                {\r\n                    openId: GameStatusInfo.openId,\r\n                    startMs: startTime.toString(),    //必填，游戏开始时间，单位为毫秒，字符串类型\r\n                    endMs: endTime.toString(),  //必填，游戏结束时间，单位为毫秒，字符串类型\r\n                    scoreInfo: {score},\r\n                },\r\n            ],\r\n            attr: {\r\n                score: {\r\n                    type: 'rank',\r\n                    order: 1,\r\n                },\r\n            },\r\n        };\r\n        BK.QQ.uploadScoreWithoutRoom(1, data, function(errCode, cmd, data) {\r\n            // 返回错误码信息\r\n            if (errCode !== 0) {\r\n                BK.Script.log(1,1,'上传分数失败!错误码：' + errCode);\r\n            }\r\n            BK.Script.log(1,1,\"上传分数\" + cmd + \" errCode:\" + errCode + \"  data:\" + JSON.stringify(data));\r\n        });\r\n    },\r\n    // 排行榜\r\n    getRankList: function(cb){\r\n        var attr = \"score\";//使用哪一种上报数据做排行，可传入score，a1，a2等\r\n        var order = 1;     //排序的方法：[ 1: 从大到小(单局)，2: 从小到大(单局)，3: 由大到小(累积)]\r\n        var rankType = 0; //要查询的排行榜类型，0: 好友排行榜\r\n        // 必须配置好周期规则后，才能使用数据上报和排行榜功能\r\n        BK.QQ.getRankListWithoutRoom(attr, order, rankType, function(errCode, cmd, data) {\r\n            // 返回错误码信息\r\n            if (errCode !== 0) {\r\n                BK.Script.log(1,1,'获取排行榜数据失败!错误码：' + errCode);\r\n                cb()\r\n                return\r\n            }\r\n            // 解析数据\r\n            if (data) {\r\n                cb(data.data.ranking_list)\r\n                return\r\n            }\r\n            cb()\r\n        });\r\n    },\r\n\r\n    getUserInfo: function () {\r\n        return self.userInfo;\r\n    },\r\n\r\n    getNickName: function (openId, cb) {\r\n        BK.MQQ.Account.getNick(openId, (currOpenId, nickName) => {\r\n            cb && cb(currOpenId, nickName);\r\n        });\r\n    },\r\n\r\n    getAvatarUrl: function (openId, cb) {\r\n        BK.MQQ.Account.getHeadEx(openId, (currOpenId, avatarUrl) => {\r\n            cb && cb(currOpenId, avatarUrl);\r\n        });\r\n    },\r\n}\r\n"]}