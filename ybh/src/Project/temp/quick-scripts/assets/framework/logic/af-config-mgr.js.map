{"version":3,"sources":["af-config-mgr.js"],"names":["Const","require","EventDispatcher","Event","DIALOG_LIST_FILE_PATH","Config","init","_dialogList","console","log","getDialogList","_onEngineLoad","_loadDialogList","cc","loader","loadRes","errors","data","warn","bind","loadDialogList","Promise","resolve","rejec","json","once","GAME_LOADED","AF","module","exports"],"mappings":";;;;;;AAAA;;;;AAIA,IAAIA,QAAkBC,QAAQ,UAAR,CAAtB;AACA,IAAIC,kBAAkBD,QAAQ,qBAAR,CAAtB;AACA,IAAIE,QAAkBF,QAAQ,UAAR,CAAtB;;AAEA;;AAEA,IAAIG,wBAA2B,8BAA/B,EAAgE;;AAEhE,IAAIC,SAAS;;AAETC,UAAM,gBAAW;AACb,aAAKC,WAAL,GAAmB,IAAnB,CADa,CACe;AAC5BC,gBAAQC,GAAR,CAAY,aAAZ;AACH,KALQ;;AAOTC,mBAAe,yBAAW;AACtB,eAAO,KAAKH,WAAZ;AACH,KATQ;;AAWTI,mBAAe,yBAAW;AACtB;AACA;AACH,KAdQ;;AAgBT;AACAC,qBAAiB,2BAAW;AACxBC,WAAGC,MAAH,CAAUC,OAAV,CAAkBX,qBAAlB,EAAyC,UAAUY,MAAV,EAAkBC,IAAlB,EAAwB;AAC7D,gBAAID,MAAJ,EAAY;AACRH,mBAAGK,IAAH,CAAQ,+BAAR;AACA;AACH;AACD,iBAAKX,WAAL,GAAmBU,IAAnB;AACH,SANwC,CAMvCE,IANuC,CAMlC,IANkC,CAAzC;AAOH,KAzBQ;;AA2BTC,oBAAgB,0BAAY;AACxB,eAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,KAAnB,EAA0B;AACzCV,eAAGC,MAAH,CAAUC,OAAV,CAAkBX,qBAAlB,EAAyC,UAAUY,MAAV,EAAkBC,IAAlB,EAAwB;AAC7D,oBAAID,MAAJ,EAAY;AACRH,uBAAGK,IAAH,CAAQ,+BAAR;AACAK,0BAAMP,MAAN;AACA;AACH;AACDX,uBAAOE,WAAP,GAAqBU,KAAKO,IAA1B;AACAF,wBAAQL,IAAR;AACH,aARD;AASH,SAVM,CAAP;AAWH;;AAvCQ,CAAb;;AA2CAZ,OAAOC,IAAP;;AAEA;AACA;AACA;AACA;;AAEAJ,gBAAgBuB,IAAhB,CAAqBtB,MAAMuB,WAA3B,EAAwC,YAAY;AAChDrB,WAAOM,aAAP;AACH,CAFD;;AAIAgB,GAAGtB,MAAH,GAAYuB,OAAOC,OAAP,GAAiBxB,MAA7B","file":"af-config-mgr.js","sourceRoot":"../../../../../assets/framework/logic","sourcesContent":["/**\r\n * 配置管理\r\n */\r\n\r\nvar Const           = require('af-const');\r\nvar EventDispatcher = require(\"af-event-dispatcher\");\r\nvar Event           = require(\"af-event\");\r\n\r\n// (window.AF = window.AF || {}).i18n = require('LanguageData');\r\n \r\nvar DIALOG_LIST_FILE_PATH    = \"framework/config/dialog_list\";  // 对话框列表配置\r\n\r\nvar Config = {\r\n    \r\n    init: function() {\r\n        this._dialogList = null;    // 对话框列表\r\n        console.log('Config init');\r\n    },\r\n\r\n    getDialogList: function() {\r\n        return this._dialogList;\r\n    },\r\n\r\n    _onEngineLoad: function() {\r\n        // AF.i18n.init(\"zh\");\r\n        // this._loadDialogList();\r\n    },\r\n\r\n    // 加载dialog list\r\n    _loadDialogList: function() {\r\n        cc.loader.loadRes(DIALOG_LIST_FILE_PATH, function (errors, data) {\r\n            if (errors) {\r\n                cc.warn('load dialog list file failed!');\r\n                return;\r\n            }\r\n            this._dialogList = data;\r\n        }.bind(this));\r\n    },\r\n\r\n    loadDialogList: function () {\r\n        return new Promise(function (resolve, rejec) {\r\n            cc.loader.loadRes(DIALOG_LIST_FILE_PATH, function (errors, data) {\r\n                if (errors) {\r\n                    cc.warn('load dialog list file failed!');\r\n                    rejec(errors);\r\n                    return;\r\n                }\r\n                Config._dialogList = data.json;\r\n                resolve(data);\r\n            });\r\n        });\r\n    },\r\n\r\n};\r\n\r\nConfig.init();\r\n\r\n// 引擎加载完\r\n// cc.game.once(cc.game.EVENT_GAME_INITED, function () {\r\n//     /*!CC_EDITOR &&*/ Config._onEngineLoad();\r\n// });\r\n\r\nEventDispatcher.once(Event.GAME_LOADED, function () {\r\n    Config._onEngineLoad();\r\n});\r\n\r\nAF.Config = module.exports = Config;"]}