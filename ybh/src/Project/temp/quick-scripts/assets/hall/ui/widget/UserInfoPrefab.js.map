{"version":3,"sources":["UserInfoPrefab.js"],"names":["cc","Class","extends","Component","properties","goldNumLabel","default","type","Label","displayName","onLoad","schedule","onUserInfoUpdate","AF","EventDispatcher","on","Event","USER_INFO_UPDATE","onDestroy","off","onEnable","platform","isHairScreen","node","y","winSize","height","widgetIsActive","active","parent","string","util","formatNumber","onGoldAddButtonClick","event","custom"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,sBAAc;AACVC,qBAAS,IADC;AAEVC,kBAAMP,GAAGQ,KAFC;AAGVC,yBAAa;AAHH;AADN,KAHP;;AAWLC,YAAQ,kBAAY;AAChB,aAAKC,QAAL,CAAc,KAAKC,gBAAnB,EAAqC,CAArC,EAAwC,IAAxC;AACAC,WAAGC,eAAH,CAAmBC,EAAnB,CAAsBF,GAAGG,KAAH,CAASC,gBAA/B,EAAiD,KAAKL,gBAAtD,EAAwE,IAAxE;AACH,KAdI;AAeLM,eAAW,qBAAY;AACnBL,WAAGC,eAAH,CAAmBK,GAAnB,CAAuBN,GAAGG,KAAH,CAASC,gBAAhC,EAAkD,KAAKL,gBAAvD,EAAyE,IAAzE;AACH,KAjBI;;AAmBLQ,cAAU,oBAAY;AAClB,YAAIP,GAAGQ,QAAH,CAAYC,YAAZ,EAAJ,EAAgC;AAC5B,iBAAKC,IAAL,CAAUC,CAAV,GAAcxB,GAAGyB,OAAH,CAAWC,MAAX,GAAoB,EAAlC;AACH,SAFD,MAEO;AACH,iBAAKH,IAAL,CAAUC,CAAV,GAAcxB,GAAGyB,OAAH,CAAWC,MAAX,GAAoB,EAAlC;AACH;;AAED,aAAKd,gBAAL;AACH,KA3BI;;AA6BLA,sBAAkB,4BAAY;;AAE1B,iBAASe,cAAT,CAAwBJ,IAAxB,EAA8B;AAC1B,gBAAIK,SAAS,IAAb;AACA,mBAAOL,IAAP,EAAa;AACT,oBAAI,CAACA,IAAL,EAAW;AAAE;AAAQ;AACrB,oBAAI,CAACA,KAAKM,MAAV,EAAkB;AAAE;AAAQ;AAC5BD,yBAASL,KAAKK,MAAd;AACA,oBAAI,CAACA,MAAL,EAAa;AAAE;AAAQ;AACvBL,uBAAOA,KAAKM,MAAZ;AACH;AACD,mBAAOD,MAAP;AACH;;AAED,YAAI,CAACD,eAAe,KAAKJ,IAApB,CAAL,EAAgC;AAAE;AAAS;;AAE3C,aAAKlB,YAAL,CAAkByB,MAAlB,GAA2BjB,GAAGkB,IAAH,CAAQC,YAAR,CAAqB,CAArB,CAA3B;AACH,KA9CI;;AAgDL;AACAC,wBAjDK,gCAiDgBC,KAjDhB,EAiDuBC,MAjDvB,EAiD+B,CACnC;AAlDI,CAAT","file":"UserInfoPrefab.js","sourceRoot":"../../../../../../assets/hall/ui/widget","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        goldNumLabel: {\r\n            default: null,\r\n            type: cc.Label,\r\n            displayName: \"金币Label\",\r\n        },\r\n    },\r\n\r\n    onLoad: function () {\r\n        this.schedule(this.onUserInfoUpdate, 1, this);\r\n        AF.EventDispatcher.on(AF.Event.USER_INFO_UPDATE, this.onUserInfoUpdate, this);\r\n    },\r\n    onDestroy: function () {\r\n        AF.EventDispatcher.off(AF.Event.USER_INFO_UPDATE, this.onUserInfoUpdate, this);\r\n    },\r\n\r\n    onEnable: function () {\r\n        if (AF.platform.isHairScreen()) {\r\n            this.node.y = cc.winSize.height - 72;\r\n        } else {\r\n            this.node.y = cc.winSize.height - 16;\r\n        }\r\n\r\n        this.onUserInfoUpdate();\r\n    },\r\n\r\n    onUserInfoUpdate: function () {\r\n\r\n        function widgetIsActive(node) {\r\n            var active = true;\r\n            while (node) {\r\n                if (!node) { break; }\r\n                if (!node.parent) { break; }\r\n                active = node.active;\r\n                if (!active) { break; }\r\n                node = node.parent;\r\n            }\r\n            return active;\r\n        }\r\n\r\n        if (!widgetIsActive(this.node)) { return; }\r\n\r\n        this.goldNumLabel.string = AF.util.formatNumber(0);\r\n    },\r\n\r\n    //-------------按钮回调函数-------------\r\n    onGoldAddButtonClick(event, custom) {\r\n    },\r\n});\r\n"]}