cc.Class({
    extends: cc.Component,

    properties: {

        userInfoPre: {
            default: null,
            type: cc.Prefab,
        },

        effectPre: {
            default: null,
            type: cc.Prefab,
        },
    },

    onLoad: function () {

        this.winSize = cc.director.getWinSize();

        //监听事件
        AF.EventDispatcher.on(AF.Event.SELECT_POINT, this.onSelectPoint, this);

        AF.EventDispatcher.on(AF.Event.HIDE_BANNER_AD, this.onHideBannerAd, this);

        // var uiNode = new cc.Node('UILayer');
        // uiNode.setPosition(0 - cc.winSize.width / 2, 0 - cc.winSize.height / 2);
        // this.node.addChild(uiNode, 100, "UILayer");
        // var userInfoPanel = cc.instantiate(this.userInfoPre);
        // uiNode.addChild(userInfoPanel, 1, "userInfoPanel");

        // this.schedule(this.checkLoading, 0.5, this);

        // var loadingLayer = this.node.getChildByName('LoadingLayer');
        // this.node.removeChild(loadingLayer);
        // cc.director.getScene().addChild(loadingLayer);
        // loadingLayer.setPosition(cc.winSize.width / 2, cc.winSize.height / 2);
        // loadingLayer.active = false;

        // 背景音乐
        this.schedule(this.onGameBGM, 0.1, this);
    },

    onDestroy: function () {

        //反监听事件
        AF.EventDispatcher.off(AF.Event.SELECT_POINT, this.onSelectPoint, this);
        AF.EventDispatcher.off(AF.Event.HIDE_BANNER_AD, this.onHideBannerAd, this);

        // AF.wxHelper.hideBannerAd("main");
    },

    onEnable: function () {

        // AF.platform.wxSetLoginTime();

        // AF.wxHelper.createBannerAd("main");

        AF.EventDispatcher.emit(AF.Event.SCENE_LOADED);
    },

    update: function (dt) {

    },

    onGameBGM: function (dt) {
        AF.EventDispatcher.emit(AF.Event.GAME_ON_BGM);
    },

    onSelectPoint: function (pointId) {
        // AF.ToastMessage.show("选择了关卡" + pointId);
        AF.openDialog("HallGameDialog", {pointId: pointId});
    },

    onHideBannerAd: function () {
        this.showOrHideBannerAD();
    },
    rankClick(){
        AF.ToastMessage.show("功能开发中");
    },

    showOrHideBannerAD: function () {
        var adHeight = AF.util.getMainBannerAdHeight();
    },

    checkLoading: function () {

    },

    onBtnNounClick: function () {
        // AF.gotoScene("HallJumpScene", {});
        AF.ToastMessage.show("功能开发中");
    },

    onBtnStartClick: function () {
        AF.openDialog("HallPointDialog", {});
        // AF.openDialog("HallGameDialog", {pointId: 1});
    },
});
