// Learn cc.Class:
//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html
//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html
// Learn Attribute:
//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html
//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html
// Learn life-cycle callbacks:
//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html
//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html
const spriteUrl = ['resources/hall/textures/fill/point/unlock.png', 'resources/hall/textures/fill/point/locking.png', 'resources/hall/textures/fill/point/lock.png', 'resources/hall/textures/fill/point/gift.png'];

module.exports = cc.Class({
    extends: cc.Component,

    properties: {
        label: cc.Label,
        sprite: cc.Node,
    },

    // LIFE-CYCLE CALLBACKS:

    // onLoad () {},

    start () {

    },

    setPointLabel(pointId, point, color, closeFunc) {
        let that = this;
        that.pointId = parseInt(pointId);
        that.colorType = color;
        if (color !== 3) {
            that.label.string = pointId;
        } else {
            that.label.node.active = false
        }
        let sprite = that.node.getComponent(cc.Sprite);
        sprite.spriteFrame = new cc.SpriteFrame(cc.url.raw(spriteUrl[color]));
        that.closefunc = closeFunc
    },

    onSelectPointButtonClick: function (event) {
        if (this.colorType <=1 ) {
            this.closefunc(this.colorType);
            AF.EventDispatcher.emit(AF.Event.SELECT_POINT, this.pointId);
        } else {
            // 点击后续关卡
            // AF.ToastMessage.show('请解锁之前关卡');
        }
    },
    // update (dt) {},
});
