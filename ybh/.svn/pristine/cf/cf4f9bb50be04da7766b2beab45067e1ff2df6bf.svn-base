{"version":3,"sources":["../../../../assets/Script/assets/Script/FriendPassedView.js"],"names":["module","exports","cc","Class","extends","Component","properties","heads","Node","onLoad","updatePoint","pointId","Util","getWXFriendRanks","then","list","updateHeads","node","active","i","length","score","getComponent","setPhoto","avatarUrl","clearPhoto"],"mappings":";;;;;;AAAA;;;;;;AAEAA,OAAOC,OAAP,GAAiBC,GAAGC,KAAH,CAAS;AACtBC,aAASF,GAAGG,SADU;;AAGtBC,gBAAY;AACRC,eAAO,CAACL,GAAGM,IAAJ;AADC,KAHU;;AAOtB;AACAC,YAAQ,kBAAY,CACnB,CATqB;AAUtBC,iBAAa,qBAAUC,OAAV,EAAmB;AAAA;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAC,uBAAKC,gBAAL,GAAwBC,IAAxB,CAA6B,gBAAQ;AACjC,gBAAIC,IAAJ,EAAU;AACN,sBAAKA,IAAL,GAAYA,IAAZ;AACA,sBAAKC,WAAL,CAAiBL,OAAjB;AACH;AACJ,SALD;AAMH,KA3BqB;AA4BtBK,iBAAa,qBAAUL,OAAV,EAAmB;AAC5B,YAAI,CAAC,KAAKM,IAAN,IAAc,CAAC,KAAKA,IAAL,CAAUC,MAA7B,EAAqC;AACjC;AACH;AACD,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,CAAJ,IAASA,IAAI,KAAKJ,IAAL,CAAUK,MAAvC,EAA+CD,GAA/C,EAAoD;AAChD,gBAAI,KAAKJ,IAAL,CAAUI,CAAV,EAAaE,KAAb,IAAsBV,OAA1B,EAAmC;AAC/B,qBAAKJ,KAAL,CAAWY,CAAX,EAAcD,MAAd,GAAuB,IAAvB;AACA,qBAAKX,KAAL,CAAWY,CAAX,EAAcG,YAAd,CAA2B,aAA3B,EAA0CC,QAA1C,CAAmD,KAAKR,IAAL,CAAUI,CAAV,EAAaK,SAAhE;AACH,aAHD,MAGO;AACH;AACA,qBAAKjB,KAAL,CAAWY,CAAX,EAAcG,YAAd,CAA2B,aAA3B,EAA0CG,UAA1C;AACH;AACJ;AACJ;AAzCqB,CAAT,CAAjB","file":"FriendPassedView.js","sourceRoot":"../../../../assets/Script","sourcesContent":["import Util from './Util'\r\n\r\nmodule.exports = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        heads: [cc.Node]\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onLoad: function () {\r\n    },\r\n    updatePoint: function (pointId) {\r\n\r\n        // {\r\n        //     AF.util.getRankList(list => {\r\n        //         if (list) {\r\n        //             this.list = list\r\n        //             this.updateHeads(pointId)\r\n        //         }\r\n        //     })\r\n        // }\r\n\r\n        Util.getWXFriendRanks().then(list => {\r\n            if (list) {\r\n                this.list = list\r\n                this.updateHeads(pointId)\r\n            }\r\n        })\r\n    },\r\n    updateHeads: function (pointId) {\r\n        if (!this.node || !this.node.active) {\r\n            return\r\n        }\r\n        for (let i = 0; i < 3 && i < this.list.length; i++) {\r\n            if (this.list[i].score >= pointId) {\r\n                this.heads[i].active = true\r\n                this.heads[i].getComponent(\"PhotoPrefab\").setPhoto(this.list[i].avatarUrl);\r\n            } else {\r\n                // this.heads[i].active = false\r\n                this.heads[i].getComponent(\"PhotoPrefab\").clearPhoto()\r\n            }\r\n        }\r\n    },\r\n})\r\n\r\n\r\n\r\n"]}