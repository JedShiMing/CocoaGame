{"version":3,"sources":["PhotoPrefab.js"],"names":["cc","Class","extends","Component","properties","photo","default","type","Node","displayName","onLoad","setPhoto","url","active","loadPhoto","clearPhoto","getChildByName","getComponent","Sprite","spriteFrame","photoNode","photoSprite","loader","load","err","res","console","log","undefined","SpriteFrame","error"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAO;AACHC,qBAAS,IADN;AAEHC,kBAAMP,GAAGQ,IAFN;AAGHC,yBAAa;AAHV;AADC,KAHP;;AAWLC,YAAQ,kBAAY,CAEnB,CAbI;;AAeLC,cAAU,kBAAUC,GAAV,EAAe;;AAErB,aAAKP,KAAL,CAAWQ,MAAX,GAAoB,IAApB;;AAEA,aAAKC,SAAL,CAAe,KAAKT,KAApB,EAA2BO,GAA3B;AACH,KApBI;AAqBLG,cArBK,wBAqBO;AACR,YAAIV,QAAS,KAAKA,KAAL,CAAWW,cAAX,CAA0B,OAA1B,KAAsC,KAAKX,KAAL,CAAWW,cAAX,CAA0B,MAA1B,EAAkCA,cAAlC,CAAiD,OAAjD,CAAnD;AACAX,cAAMY,YAAN,CAAmBjB,GAAGkB,MAAtB,EAA8BC,WAA9B,GAA4C,IAA5C;AACH,KAxBI;;;AA0BLL,eAAW,mBAAUM,SAAV,EAAqBR,GAArB,EAA0B;AACjC,YAAI,CAACA,GAAL,EAAU;AACN;AACH;AACD,YAAIP,QAASe,UAAUJ,cAAV,CAAyB,OAAzB,KAAqCI,UAAUJ,cAAV,CAAyB,MAAzB,EAAiCA,cAAjC,CAAgD,OAAhD,CAAlD;AACA,YAAIK,cAAchB,MAAMY,YAAN,CAAmBjB,GAAGkB,MAAtB,CAAlB;AACAlB,WAAGsB,MAAH,CAAUC,IAAV,CAAe,EAAEX,KAAKA,GAAP,EAAYL,MAAM,KAAlB,EAAf,EAA0C,UAACiB,GAAD,EAAMC,GAAN,EAAc;AACpD,gBAAID,GAAJ,EAAS;AACLE,wBAAQC,GAAR,CAAY,gCAAZ,EAA8CH,GAA9C;AACA;AACH;AACD,gBAAIH,eAAeA,YAAYF,WAAZ,KAA4BS,SAA/C,EAA0D;AACtDP,4BAAYF,WAAZ,GAA0B,IAAInB,GAAG6B,WAAP,CAAmBJ,GAAnB,CAA1B;AACH,aAFD,MAEO;AACHzB,mBAAG8B,KAAH,CAAS,QAAT,EAAmBN,GAAnB;AACH;AACJ,SAVD;AAWH;AA3CI,CAAT","file":"PhotoPrefab.js","sourceRoot":"../../../../assets/Script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        photo: {\n            default: null,\n            type: cc.Node,\n            displayName: \"头像\",\n        },\n    },\n\n    onLoad: function () {\n\n    },\n\n    setPhoto: function (url) {\n\n        this.photo.active = true;\n\n        this.loadPhoto(this.photo, url);\n    },\n    clearPhoto(){\n        let photo =  this.photo.getChildByName(\"photo\") || this.photo.getChildByName(\"mask\").getChildByName(\"photo\");\n        photo.getComponent(cc.Sprite).spriteFrame = null\n    },\n\n    loadPhoto: function (photoNode, url) {\n        if (!url) {\n            return;\n        }\n        var photo =  photoNode.getChildByName(\"photo\") || photoNode.getChildByName(\"mask\").getChildByName(\"photo\");\n        var photoSprite = photo.getComponent(cc.Sprite);\n        cc.loader.load({ url: url, type: \"jpg\" }, (err, res) => {\n            if (err) {\n                console.log(\"err: PhotoPrefab.js loadPhoto \", err);\n                return;\n            }\n            if (photoSprite && photoSprite.spriteFrame !== undefined) {\n                photoSprite.spriteFrame = new cc.SpriteFrame(res);\n            } else {\n                cc.error('头像加载失败', err);\n            }\n        });\n    },\n});\n"]}